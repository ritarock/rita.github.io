{"pageProps":{"docData":{"id":"20180213090000","title":"Docker のインストールからコンテナ作成まで","content":"\n## 開発環境\nUbuntu/trusty64\n\n## Docker のインストール\n```bash\n$ sudo apt-get update\n$ sudo apt-get -y install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n$ sudo apt-key fingerprint 0EBFCD88\n$ sudo add-apt-repository -y  \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n$ sudo apt-get update\n$ sudo apt-get install -y docker-ce\n```\n\n## Docker コマンド\n### ローカルに保存された docker イメージの一覧を取得\n```bash\n$ docker images\n```\n\n### docker hub にあるイメージを検索\n```bash\n$ docker search <イメージ>\n```\n\n### docker hub にあるイメージをローカルに取得する\n```bash\n$ docker pull <イメージ>\n```\n\n### コンテナでプロセスを起動する\n```bash\n$ docker run -it <イメージ> /bin/bash\n```\n\n### プロセスを確認する(停止されたものも含む)\n```bash\n$ docker ps -a\n```\n\n### 停止されたコンテナの削除\n```bash\n$ docker rm <コンテナid>\n```\n\nid は一意なので頭の 4 桁程度入力すれば OK.\n\n### コンテナを全て削除\n```bash\n$ docker rm $(docker ps -aq)\n```\n\n### exit と同時にコンテナの削除\n```bash\n$ docker run --rm -it <イメージ> /bin/bash\n```\n\n### ポートをホスト側に公開して起動\n```bash\n$ docker run -it -p 80:80 <イメージ> /bin/bash\n```\n\n### 外部ファイルを取り込む\n```bash\n$ docker run -it -v <ホスト側のパス>:<コンテナ側のパス> <イメージ> /bin/bash\n```\n\n## Dockerfile 作成してからの流れ\n### Dockerfile からイメージを作成\n```bash\n$ docker build -t <作成するイメージ名> .\n```\n\n### 作成したイメージからコンテナを起動\n```bash\n$ docker run --name <起動するコンテナ名> -d -p <イメージ名>\n```\n\n### コンテナの停止\n```bash\n$ docker stop <コンテナ名>\n```\n"}},"__N_SSG":true}