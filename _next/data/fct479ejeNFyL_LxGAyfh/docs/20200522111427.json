{"pageProps":{"body":{"id":"20200522111427","title":"deno を触ってみる","body":"\n## 通常の実行\n```ts\nconsole.log(\"Wellcome to Deno\");\n```\n\n```bash\n$ deno run hello.ts\nWellcome to Deno\n```\n\n## http request があるとき\n```ts\nconst url = Deno.args[0];\nconst res = await fetch(url);\n\nconst body = new Uint8Array(await res.arrayBuffer());\nawait Deno.stdout.write(body);\n```\n\n`--allow-net` をつける。\n```bash\n$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps\n```\n\n### コマンドラインで引数を渡す\n```ts\nconsole.log(Deno.args)\n```\n\n```bash\n$ deno run args.ts 1 2 3\n[ \"1\", \"2\", \"3\" ]\n```\n\n## ファイル読み込み\n```ts\nfor (let i = 0; i < Deno.args.length; i++) {\n    let filename = Deno.args[i];\n    let file = await Deno.open(filename);\n    await Deno.copy(file, Deno.stdout);\n    file.close();\n}\n```\n\n`--allow-read` をつける。\n```bash\n$ deno run --allow-read read.ts args.ts\nconsole.log(Deno.args);\n```\n\n## server を起動\n```ts\nconst listener = Deno.listen({ port: 8080  });\nconsole.log(\"listening on 0.0.0.0:8080\");\nfor await (const conn of listener) {\n      Deno.copy(conn, conn);\n}\n```\n\n```bash\n$ deno run --allow-net server.ts\n```\n"}},"__N_SSG":true}