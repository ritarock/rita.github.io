{"pageProps":{"contents":{"id":"20230210174709","title":"aws-sdk-go-v2 で profile を使う","body":"\nprofile を指定している場合は profile を使うが、指定していない場合は IAM ロールを使う。\n\n```go\nfunc session(ctx context.Context, profile string) (aws.Config, error) {\n\tconfigOptions := []func(*config.LoadOptions) error{\n\t\tconfig.WithRegion(\"ap-northeast-1\"),\n\t}\n\tif profile != \"\" {\n\t\tconfigOptions = append(configOptions, config.WithSharedConfigProfile(aws.ToString(&profile)))\n\t}\n\tcfg, err := config.LoadDefaultConfig(ctx, configOptions...)\n\tif err != nil {\n\t\treturn aws.Config{}, err\n\t}\n\treturn cfg, nil\n}\n```\n\n[このコード](https://github.com/turbot/steampipe-plugin-aws/blob/main/aws/service.go#L1437-L1460) が参考になった。\n"}},"__N_SSG":true}