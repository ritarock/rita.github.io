<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/dd1d8e71a2aa8e7e10f5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/dd1d8e71a2aa8e7e10f5.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-2f612445bd50b211f15a.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7163558e7d92093a94d2.js" as="script"/><link rel="preload" href="/_next/static/chunks/996-109927db333074874af4.js" as="script"/><link rel="preload" href="/_next/static/chunks/394-1ac6c205f84cbd1b2925.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bid%5D-6ddac1fc6283bcb21133.js" as="script"/></head><body><div id="__next"><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->deno を触ってみる</b></h1><h2>通常の実行</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>console.</span><span style="color:#a6e22e">log</span><span>(&quot;Wellcome to Deno&quot;);</span></code></div></pre>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run hello.ts
</span>Wellcome to Deno
</code></div></pre>
<h2>http request があるとき</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const </span><span class="hljs-attr">url</span><span> = De</span><span style="color:#f92672;font-weight:bold">no</span><span>.args[</span><span class="hljs-number">0</span><span>]</span><span style="color:#75715e">;</span><span>
</span><span>const </span><span class="hljs-attr">res</span><span> = await fetch(url)</span><span style="color:#75715e">;</span><span>
</span>
<span>const </span><span class="hljs-attr">body</span><span> = new Uint8Array(await res.arrayBuffer())</span><span style="color:#75715e">;</span><span>
</span><span>await Deno.stdout.write(body)</span><span style="color:#75715e">;</span></code></div></pre>
<p><em><strong>--allow-net</strong></em> をつける。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps</span></code></div></pre>
<h3>コマンドラインで引数を渡す</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>console.</span><span style="color:#a6e22e">log</span><span>(Deno.</span><span style="color:#a6e22e">args</span><span>)</span></code></div></pre>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run args.ts 1 2 3
</span><span>[ </span><span style="color:#a6e22e">&quot;1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;2&quot;</span><span>, </span><span style="color:#a6e22e">&quot;3&quot;</span><span> ]</span></code></div></pre>
<h2>ファイル読み込み</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">for</span><span> (</span><span style="color:#f92672;font-weight:bold">let</span><span> i = </span><span class="hljs-number">0</span><span>; i &lt; </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>args.length; i++) {
</span><span>    </span><span style="color:#f92672;font-weight:bold">let</span><span> filename = </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>args</span><span style="color:#f92672;font-weight:bold">[</span><span class="hljs-identifier" style="color:#f92672;font-weight:bold">i</span><span style="color:#f92672;font-weight:bold">]</span><span>;
</span><span>    </span><span style="color:#f92672;font-weight:bold">let</span><span> file = await </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span style="color:#f92672;font-weight:bold">open</span><span>(filename);
</span><span>    await </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>copy(file, </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>stdout);
</span><span>    file.close</span><span style="color:#f92672;font-weight:bold">()</span><span>;
</span>}
</code></div></pre>
<p><em><strong>--allow-read</strong></em> をつける。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run --allow-read read.ts args.ts
</span>console.log(Deno.args);
</code></div></pre>
<h2>server を起動</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const listener = Deno.listen({ port: </span><span class="hljs-number">8080</span><span>  })</span><span style="color:#75715e">;</span><span>
</span><span>console.log(</span><span style="color:#a6e22e">&quot;listening on 0.0.0.0:8080&quot;</span><span>)</span><span style="color:#75715e">;</span><span>
</span><span>for await (</span><span style="color:#f92672">const</span><span> conn of listener) {
</span><span>      Deno.copy(</span><span style="color:#f92672">conn</span><span>, conn)</span><span style="color:#75715e">;</span><span>
</span>}
</code></div></pre>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run --allow-net server.ts</span></code></div></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"id":"20200522111427","fileContents":"{\n  \"title\": \"deno を触ってみる\",\n  \"date\": 20200522111427,\n  \"tags\": [\n    \"typescript\"\n  ],\n  \"bodyContent\": \"## 通常の実行\\n```ts\\nconsole.log(\\\"Wellcome to Deno\\\");\\n```\\n\\n```bash\\n$ deno run hello.ts\\nWellcome to Deno\\n```\\n\\n## http request があるとき\\n```ts\\nconst url = Deno.args[0];\\nconst res = await fetch(url);\\n\\nconst body = new Uint8Array(await res.arrayBuffer());\\nawait Deno.stdout.write(body);\\n```\\n\\n***--allow-net*** をつける。\\n```bash\\n$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps\\n```\\n\\n### コマンドラインで引数を渡す\\n```ts\\nconsole.log(Deno.args)\\n```\\n\\n```bash\\n$ deno run args.ts 1 2 3\\n[ \\\"1\\\", \\\"2\\\", \\\"3\\\" ]\\n```\\n\\n## ファイル読み込み\\n```ts\\nfor (let i = 0; i \u003c Deno.args.length; i++) {\\n    let filename = Deno.args[i];\\n    let file = await Deno.open(filename);\\n    await Deno.copy(file, Deno.stdout);\\n    file.close();\\n}\\n```\\n\\n***--allow-read*** をつける。\\n```bash\\n$ deno run --allow-read read.ts args.ts\\nconsole.log(Deno.args);\\n```\\n\\n## server を起動\\n```ts\\nconst listener = Deno.listen({ port: 8080  });\\nconsole.log(\\\"listening on 0.0.0.0:8080\\\");\\nfor await (const conn of listener) {\\n      Deno.copy(conn, conn);\\n}\\n```\\n\\n```bash\\n$ deno run --allow-net server.ts\\n```\",\n  \"bodyHtml\": \"\u003ch2\u003e通常の実行\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-built_in\\\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;Wellcome to Deno\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e$ deno run hello.ts\\nWellcome to Deno\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003ehttp request があるとき\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e url = Deno.args[\u003cspan class=\\\"hljs-number\\\"\u003e0\u003c/span\u003e];\\n\u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e res = \u003cspan class=\\\"hljs-keyword\\\"\u003eawait\u003c/span\u003e fetch(url);\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e body = \u003cspan class=\\\"hljs-keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"hljs-built_in\\\"\u003eUint8Array\u003c/span\u003e(\u003cspan class=\\\"hljs-keyword\\\"\u003eawait\u003c/span\u003e res.arrayBuffer());\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eawait\u003c/span\u003e Deno.stdout.write(body);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003e\u003cstrong\u003e--allow-net\u003c/strong\u003e\u003c/em\u003e をつける。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eコマンドラインで引数を渡す\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-built_in\\\"\u003econsole\u003c/span\u003e.log(Deno.args)\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e$ deno run args.ts 1 2 3\\n[ \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;1\u0026quot;\u003c/span\u003e, \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;2\u0026quot;\u003c/span\u003e, \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;3\u0026quot;\u003c/span\u003e ]\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eファイル読み込み\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003efor\u003c/span\u003e (\u003cspan class=\\\"hljs-keyword\\\"\u003elet\u003c/span\u003e i = \u003cspan class=\\\"hljs-number\\\"\u003e0\u003c/span\u003e; i \u0026lt; Deno.args.length; i++) {\\n    \u003cspan class=\\\"hljs-keyword\\\"\u003elet\u003c/span\u003e filename = Deno.args[i];\\n    \u003cspan class=\\\"hljs-keyword\\\"\u003elet\u003c/span\u003e file = \u003cspan class=\\\"hljs-keyword\\\"\u003eawait\u003c/span\u003e Deno.open(filename);\\n    \u003cspan class=\\\"hljs-keyword\\\"\u003eawait\u003c/span\u003e Deno.copy(file, Deno.stdout);\\n    file.close();\\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003e\u003cstrong\u003e--allow-read\u003c/strong\u003e\u003c/em\u003e をつける。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e$ deno run --allow-read read.ts args.ts\\nconsole.log(Deno.args);\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eserver を起動\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e listener = Deno.listen({ \u003cspan class=\\\"hljs-attr\\\"\u003eport\u003c/span\u003e: \u003cspan class=\\\"hljs-number\\\"\u003e8080\u003c/span\u003e  });\\n\u003cspan class=\\\"hljs-built_in\\\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;listening on 0.0.0.0:8080\u0026quot;\u003c/span\u003e);\\n\u003cspan class=\\\"hljs-keyword\\\"\u003efor\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eawait\u003c/span\u003e (\u003cspan class=\\\"hljs-keyword\\\"\u003econst\u003c/span\u003e conn \u003cspan class=\\\"hljs-keyword\\\"\u003eof\u003c/span\u003e listener) {\\n      Deno.copy(conn, conn);\\n}\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e$ deno run --allow-net server.ts\u003c/code\u003e\u003c/pre\u003e\",\n  \"dir\": \"articles\",\n  \"base\": \"20200522111427.json\",\n  \"ext\": \".json\",\n  \"sourceBase\": \"20200522111427.md\",\n  \"sourceExt\": \".md\"\n}"}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"20200522111427"},"buildId":"j0qEr6JZ7JnigW5qKQCVL","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7b08e4c67f4f1b892f4b.js"></script><script src="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" async=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" async=""></script><script src="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" async=""></script><script src="/_next/static/chunks/pages/_app-7163558e7d92093a94d2.js" async=""></script><script src="/_next/static/chunks/996-109927db333074874af4.js" async=""></script><script src="/_next/static/chunks/394-1ac6c205f84cbd1b2925.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-6ddac1fc6283bcb21133.js" async=""></script><script src="/_next/static/j0qEr6JZ7JnigW5qKQCVL/_buildManifest.js" async=""></script><script src="/_next/static/j0qEr6JZ7JnigW5qKQCVL/_ssgManifest.js" async=""></script></body></html>