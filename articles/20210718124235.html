<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/718387ccdbc2fd6d5285.css" as="style"/><link rel="stylesheet" href="/_next/static/css/718387ccdbc2fd6d5285.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-2f612445bd50b211f15a.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7163558e7d92093a94d2.js" as="script"/><link rel="preload" href="/_next/static/chunks/996-109927db333074874af4.js" as="script"/><link rel="preload" href="/_next/static/chunks/394-1ac6c205f84cbd1b2925.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bid%5D-ab036cc92d9ceaf2a9ff.js" as="script"/></head><body><div id="__next"><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->Golang で json を操作する</b></h1><h2>JSON の解析</h2>
<p>今回使う JSON ファイル.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-json" style="white-space:pre"><span>{
</span><span>  </span><span class="hljs-attr">&quot;id&quot;</span><span>: </span><span class="hljs-number">1</span><span>,
</span><span>  </span><span class="hljs-attr">&quot;content&quot;</span><span>: </span><span style="color:#a6e22e">&quot;Hello&quot;</span><span>,
</span><span>  </span><span class="hljs-attr">&quot;author&quot;</span><span>: {
</span><span>    </span><span class="hljs-attr">&quot;id&quot;</span><span>: </span><span class="hljs-number">1</span><span>,
</span><span>    </span><span class="hljs-attr">&quot;name&quot;</span><span>: </span><span style="color:#a6e22e">&quot;author1&quot;</span><span>
</span>  },
<span>  </span><span class="hljs-attr">&quot;comments&quot;</span><span>: [
</span>    {
<span>      </span><span class="hljs-attr">&quot;id&quot;</span><span>: </span><span class="hljs-number">1</span><span>,
</span><span>      </span><span class="hljs-attr">&quot;content&quot;</span><span>: </span><span style="color:#a6e22e">&quot;comment1&quot;</span><span>,
</span><span>      </span><span class="hljs-attr">&quot;author&quot;</span><span>: </span><span style="color:#a6e22e">&quot;author2&quot;</span><span>
</span>    },
<!-- -->    {
<span>      </span><span class="hljs-attr">&quot;id&quot;</span><span>: </span><span class="hljs-number">2</span><span>,
</span><span>      </span><span class="hljs-attr">&quot;content&quot;</span><span>: </span><span style="color:#a6e22e">&quot;comment2&quot;</span><span>,
</span><span>      </span><span class="hljs-attr">&quot;author&quot;</span><span>: </span><span style="color:#a6e22e">&quot;author3&quot;</span><span>
</span>    }
<!-- -->  ]
<!-- -->}
<!-- -->
</code></div></pre>
<h3>Unmarshal を使う</h3>
<p>文字列データの場合は Unmarshal を使う.</p>
<ul>
<li>構造体を定義</li>
<li>JSON を構造体に格納</li>
</ul>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> (
</span><span>	</span><span style="color:#a6e22e">&quot;encoding/json&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;fmt&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;io/ioutil&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;os&quot;</span><span>
</span>)
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Post </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id      </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Content </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>	Author  </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>		Id   </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>		Name </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;name&quot;`</span><span>
</span><span>	} </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span><span>	Comments []</span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>		Id      </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>		Content </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>		Author  </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span><span>	} </span><span style="color:#a6e22e">`json:&quot;comments&quot;`</span><span>
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	jsonFile, err := os.Open(</span><span style="color:#a6e22e">&quot;file.json&quot;</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<span>	</span><span style="color:#f92672;font-weight:bold">defer</span><span> jsonFile.Close()
</span>
<!-- -->	jsonData, err := ioutil.ReadAll(jsonFile)
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<!-- -->
<span>	</span><span style="color:#f92672;font-weight:bold">var</span><span> post Post
</span>	json.Unmarshal(jsonData, &amp;post)
<span>	fmt.Println(post) </span><span style="color:#75715e">// {1 Hello {0 author1} [{1 comment1 author2} {2 comment2 author3}]}</span><span>
</span>}
</code></div></pre>
<h3>デコーダを使う</h3>
<p>http.Request の Body のように <code node="[object Object]">io.Reader</code> のストリームからデータが入ってくる場合に使う.</p>
<ul>
<li>構造体を定義</li>
<li>デコーダを作成する</li>
<li>JSON を順次処理してデコードする</li>
</ul>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> (
</span><span>	</span><span style="color:#a6e22e">&quot;encoding/json&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;fmt&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;io&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;os&quot;</span><span>
</span>)
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Post </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id      </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Content </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>	Author  </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>		Id   </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>		Name </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;name&quot;`</span><span>
</span><span>	} </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span><span>	Comments []</span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>		Id      </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>		Content </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>		Author  </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span><span>	} </span><span style="color:#a6e22e">`json:&quot;comments&quot;`</span><span>
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	jsonFile, err := os.Open(</span><span style="color:#a6e22e">&quot;file.json&quot;</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<span>	</span><span style="color:#f92672;font-weight:bold">defer</span><span> jsonFile.Close()
</span>
<!-- -->	decoder := json.NewDecoder(jsonFile)
<span>	</span><span style="color:#f92672;font-weight:bold">for</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">var</span><span> post Post
</span>		err := decoder.Decode(&amp;post)
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err == io.EOF {
</span><span>			</span><span style="color:#f92672;font-weight:bold">break</span><span>
</span>		}
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>			fmt.Println(err)
<span>			</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>		}
<span>		fmt.Println(post) </span><span style="color:#75715e">// {1 Hello {1 author1} [{1 comment1 author2} {2 comment2 author3}]}</span><span>
</span>	}
<!-- -->}
</code></div></pre>
<h2>JSON データを作成する</h2>
<ul>
<li>構造体を定義</li>
<li>構造体を JSON データに組み換え</li>
</ul>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> (
</span><span>	</span><span style="color:#a6e22e">&quot;encoding/json&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;fmt&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;io/ioutil&quot;</span><span>
</span>)
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Post </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id       </span><span style="color:#f92672;font-weight:bold">int</span><span>       </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Content  </span><span style="color:#f92672;font-weight:bold">string</span><span>    </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>	Author   Author    </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span><span>	Comments []Comment </span><span style="color:#a6e22e">`json:&quot;comments&quot;`</span><span>
</span>}
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Author </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id   </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Name </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;name&quot;`</span><span>
</span>}
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Comment </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id      </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Content </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>	Author  </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span>	post := Post{
<span>		Id:      </span><span class="hljs-number">1</span><span>,
</span><span>		Content: </span><span style="color:#a6e22e">&quot;Hello&quot;</span><span>,
</span>		Author: Author{
<span>			Id:   </span><span class="hljs-number">1</span><span>,
</span><span>			Name: </span><span style="color:#a6e22e">&quot;author1&quot;</span><span>,
</span>		},
<!-- -->		Comments: []Comment{
<!-- -->			{
<span>				Id:      </span><span class="hljs-number">1</span><span>,
</span><span>				Content: </span><span style="color:#a6e22e">&quot;comment1&quot;</span><span>,
</span><span>				Author:  </span><span style="color:#a6e22e">&quot;author2&quot;</span><span>,
</span>			},
<!-- -->			{
<span>				Id:      </span><span class="hljs-number">2</span><span>,
</span><span>				Content: </span><span style="color:#a6e22e">&quot;comment2&quot;</span><span>,
</span><span>				Author:  </span><span style="color:#a6e22e">&quot;author3&quot;</span><span>,
</span>			},
<!-- -->		},
<!-- -->	}
<span>	output, err := json.MarshalIndent(&amp;post, </span><span style="color:#a6e22e">&quot;&quot;</span><span>, </span><span style="color:#a6e22e">&quot;\t\t&quot;</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<span>	err = ioutil.WriteFile(</span><span style="color:#a6e22e">&quot;created.json&quot;</span><span>, output, </span><span class="hljs-number">0644</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<!-- -->}
</code></div></pre>
<h3>エンコーダを使う</h3>
<ul>
<li>構造体を定義</li>
<li>エンコーダを作成する</li>
<li>エンコーダを使い構造体を JSON ファイルにエンコード</li>
</ul>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> (
</span><span>	</span><span style="color:#a6e22e">&quot;encoding/json&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;fmt&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;os&quot;</span><span>
</span>)
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Post </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id       </span><span style="color:#f92672;font-weight:bold">int</span><span>       </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Content  </span><span style="color:#f92672;font-weight:bold">string</span><span>    </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>	Author   Author    </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span><span>	Comments []Comment </span><span style="color:#a6e22e">`json:&quot;comments&quot;`</span><span>
</span>}
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Author </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id   </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Name </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;name&quot;`</span><span>
</span>}
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Comment </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Id      </span><span style="color:#f92672;font-weight:bold">int</span><span>    </span><span style="color:#a6e22e">`json:&quot;id&quot;`</span><span>
</span><span>	Content </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;content&quot;`</span><span>
</span><span>	Author  </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;author&quot;`</span><span>
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span>	post := Post{
<span>		Id:      </span><span class="hljs-number">1</span><span>,
</span><span>		Content: </span><span style="color:#a6e22e">&quot;Hello&quot;</span><span>,
</span>		Author: Author{
<span>			Id:   </span><span class="hljs-number">1</span><span>,
</span><span>			Name: </span><span style="color:#a6e22e">&quot;author1&quot;</span><span>,
</span>		},
<!-- -->		Comments: []Comment{
<!-- -->			{
<span>				Id:      </span><span class="hljs-number">1</span><span>,
</span><span>				Content: </span><span style="color:#a6e22e">&quot;comment1&quot;</span><span>,
</span><span>				Author:  </span><span style="color:#a6e22e">&quot;author2&quot;</span><span>,
</span>			},
<!-- -->			{
<span>				Id:      </span><span class="hljs-number">2</span><span>,
</span><span>				Content: </span><span style="color:#a6e22e">&quot;comment2&quot;</span><span>,
</span><span>				Author:  </span><span style="color:#a6e22e">&quot;author3&quot;</span><span>,
</span>			},
<!-- -->		},
<!-- -->	}
<span>	jsonFile, err := os.Create(</span><span style="color:#a6e22e">&quot;created.json&quot;</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<!-- -->	encoder := json.NewEncoder(jsonFile)
<!-- -->	err = encoder.Encode(&amp;post)
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span>		fmt.Println(err)
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span>
</span>	}
<!-- -->}
</code></div></pre> </div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"id":"20210718124235","fileContents":"{\n  \"title\": \"Golang で json を操作する\",\n  \"date\": 20210718124235,\n  \"tags\": [\n    \"golang\"\n  ],\n  \"bodyContent\": \"## JSON の解析\\n今回使う JSON ファイル.\\n```json\\n{\\n  \\\"id\\\": 1,\\n  \\\"content\\\": \\\"Hello\\\",\\n  \\\"author\\\": {\\n    \\\"id\\\": 1,\\n    \\\"name\\\": \\\"author1\\\"\\n  },\\n  \\\"comments\\\": [\\n    {\\n      \\\"id\\\": 1,\\n      \\\"content\\\": \\\"comment1\\\",\\n      \\\"author\\\": \\\"author2\\\"\\n    },\\n    {\\n      \\\"id\\\": 2,\\n      \\\"content\\\": \\\"comment2\\\",\\n      \\\"author\\\": \\\"author3\\\"\\n    }\\n  ]\\n}\\n\\n```\\n\\n### Unmarshal を使う\\n文字列データの場合は Unmarshal を使う.\\n\\n- 構造体を定義\\n- JSON を構造体に格納\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\\"encoding/json\\\"\\n\\t\\\"fmt\\\"\\n\\t\\\"io/ioutil\\\"\\n\\t\\\"os\\\"\\n)\\n\\ntype Post struct {\\n\\tId      int    `json:\\\"id\\\"`\\n\\tContent string `json:\\\"content\\\"`\\n\\tAuthor  struct {\\n\\t\\tId   int    `json:\\\"id\\\"`\\n\\t\\tName string `json:\\\"name\\\"`\\n\\t} `json:\\\"author\\\"`\\n\\tComments []struct {\\n\\t\\tId      int    `json:\\\"id\\\"`\\n\\t\\tContent string `json:\\\"content\\\"`\\n\\t\\tAuthor  string `json:\\\"author\\\"`\\n\\t} `json:\\\"comments\\\"`\\n}\\n\\nfunc main() {\\n\\tjsonFile, err := os.Open(\\\"file.json\\\")\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n\\tdefer jsonFile.Close()\\n\\n\\tjsonData, err := ioutil.ReadAll(jsonFile)\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n\\n\\tvar post Post\\n\\tjson.Unmarshal(jsonData, \u0026post)\\n\\tfmt.Println(post) // {1 Hello {0 author1} [{1 comment1 author2} {2 comment2 author3}]}\\n}\\n```\\n\\n### デコーダを使う\\nhttp.Request の Body のように `io.Reader` のストリームからデータが入ってくる場合に使う.\\n\\n- 構造体を定義\\n- デコーダを作成する\\n- JSON を順次処理してデコードする\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\\"encoding/json\\\"\\n\\t\\\"fmt\\\"\\n\\t\\\"io\\\"\\n\\t\\\"os\\\"\\n)\\n\\ntype Post struct {\\n\\tId      int    `json:\\\"id\\\"`\\n\\tContent string `json:\\\"content\\\"`\\n\\tAuthor  struct {\\n\\t\\tId   int    `json:\\\"id\\\"`\\n\\t\\tName string `json:\\\"name\\\"`\\n\\t} `json:\\\"author\\\"`\\n\\tComments []struct {\\n\\t\\tId      int    `json:\\\"id\\\"`\\n\\t\\tContent string `json:\\\"content\\\"`\\n\\t\\tAuthor  string `json:\\\"author\\\"`\\n\\t} `json:\\\"comments\\\"`\\n}\\n\\nfunc main() {\\n\\tjsonFile, err := os.Open(\\\"file.json\\\")\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n\\tdefer jsonFile.Close()\\n\\n\\tdecoder := json.NewDecoder(jsonFile)\\n\\tfor {\\n\\t\\tvar post Post\\n\\t\\terr := decoder.Decode(\u0026post)\\n\\t\\tif err == io.EOF {\\n\\t\\t\\tbreak\\n\\t\\t}\\n\\t\\tif err != nil {\\n\\t\\t\\tfmt.Println(err)\\n\\t\\t\\treturn\\n\\t\\t}\\n\\t\\tfmt.Println(post) // {1 Hello {1 author1} [{1 comment1 author2} {2 comment2 author3}]}\\n\\t}\\n}\\n```\\n\\n## JSON データを作成する\\n- 構造体を定義\\n- 構造体を JSON データに組み換え\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\\"encoding/json\\\"\\n\\t\\\"fmt\\\"\\n\\t\\\"io/ioutil\\\"\\n)\\n\\ntype Post struct {\\n\\tId       int       `json:\\\"id\\\"`\\n\\tContent  string    `json:\\\"content\\\"`\\n\\tAuthor   Author    `json:\\\"author\\\"`\\n\\tComments []Comment `json:\\\"comments\\\"`\\n}\\ntype Author struct {\\n\\tId   int    `json:\\\"id\\\"`\\n\\tName string `json:\\\"name\\\"`\\n}\\ntype Comment struct {\\n\\tId      int    `json:\\\"id\\\"`\\n\\tContent string `json:\\\"content\\\"`\\n\\tAuthor  string `json:\\\"author\\\"`\\n}\\n\\nfunc main() {\\n\\tpost := Post{\\n\\t\\tId:      1,\\n\\t\\tContent: \\\"Hello\\\",\\n\\t\\tAuthor: Author{\\n\\t\\t\\tId:   1,\\n\\t\\t\\tName: \\\"author1\\\",\\n\\t\\t},\\n\\t\\tComments: []Comment{\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      1,\\n\\t\\t\\t\\tContent: \\\"comment1\\\",\\n\\t\\t\\t\\tAuthor:  \\\"author2\\\",\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      2,\\n\\t\\t\\t\\tContent: \\\"comment2\\\",\\n\\t\\t\\t\\tAuthor:  \\\"author3\\\",\\n\\t\\t\\t},\\n\\t\\t},\\n\\t}\\n\\toutput, err := json.MarshalIndent(\u0026post, \\\"\\\", \\\"\\\\t\\\\t\\\")\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n\\terr = ioutil.WriteFile(\\\"created.json\\\", output, 0644)\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n}\\n```\\n\\n### エンコーダを使う\\n- 構造体を定義\\n- エンコーダを作成する\\n- エンコーダを使い構造体を JSON ファイルにエンコード\\n\\n```go\\npackage main\\n\\nimport (\\n\\t\\\"encoding/json\\\"\\n\\t\\\"fmt\\\"\\n\\t\\\"os\\\"\\n)\\n\\ntype Post struct {\\n\\tId       int       `json:\\\"id\\\"`\\n\\tContent  string    `json:\\\"content\\\"`\\n\\tAuthor   Author    `json:\\\"author\\\"`\\n\\tComments []Comment `json:\\\"comments\\\"`\\n}\\ntype Author struct {\\n\\tId   int    `json:\\\"id\\\"`\\n\\tName string `json:\\\"name\\\"`\\n}\\ntype Comment struct {\\n\\tId      int    `json:\\\"id\\\"`\\n\\tContent string `json:\\\"content\\\"`\\n\\tAuthor  string `json:\\\"author\\\"`\\n}\\n\\nfunc main() {\\n\\tpost := Post{\\n\\t\\tId:      1,\\n\\t\\tContent: \\\"Hello\\\",\\n\\t\\tAuthor: Author{\\n\\t\\t\\tId:   1,\\n\\t\\t\\tName: \\\"author1\\\",\\n\\t\\t},\\n\\t\\tComments: []Comment{\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      1,\\n\\t\\t\\t\\tContent: \\\"comment1\\\",\\n\\t\\t\\t\\tAuthor:  \\\"author2\\\",\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      2,\\n\\t\\t\\t\\tContent: \\\"comment2\\\",\\n\\t\\t\\t\\tAuthor:  \\\"author3\\\",\\n\\t\\t\\t},\\n\\t\\t},\\n\\t}\\n\\tjsonFile, err := os.Create(\\\"created.json\\\")\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n\\tencoder := json.NewEncoder(jsonFile)\\n\\terr = encoder.Encode(\u0026post)\\n\\tif err != nil {\\n\\t\\tfmt.Println(err)\\n\\t\\treturn\\n\\t}\\n}\\n```\",\n  \"bodyHtml\": \"\u003ch2\u003eJSON の解析\u003c/h2\u003e\\n\u003cp\u003e今回使う JSON ファイル.\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e{\\n  \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n  \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;content\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;Hello\u0026quot;\u003c/span\u003e,\\n  \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e: {\\n    \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n    \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author1\u0026quot;\u003c/span\u003e\\n  },\\n  \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;comments\u0026quot;\u003c/span\u003e: [\\n    {\\n      \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n      \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;content\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;comment1\u0026quot;\u003c/span\u003e,\\n      \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author2\u0026quot;\u003c/span\u003e\\n    },\\n    {\\n      \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-number\\\"\u003e2\u003c/span\u003e,\\n      \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;content\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;comment2\u0026quot;\u003c/span\u003e,\\n      \u003cspan class=\\\"hljs-attr\\\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author3\u0026quot;\u003c/span\u003e\\n    }\\n  ]\\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eUnmarshal を使う\u003c/h3\u003e\\n\u003cp\u003e文字列データの場合は Unmarshal を使う.\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e構造体を定義\u003c/li\u003e\\n\u003cli\u003eJSON を構造体に格納\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003epackage\u003c/span\u003e main\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eimport\u003c/span\u003e (\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;encoding/json\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;fmt\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;io/ioutil\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;os\u0026quot;\u003c/span\u003e\\n)\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Post \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId      \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tContent \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\tAuthor  \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\t\\tId   \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\t\\tName \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;name\u0026quot;`\u003c/span\u003e\\n\\t} \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n\\tComments []\u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\t\\tId      \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\t\\tContent \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\t\\tAuthor  \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n\\t} \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;comments\u0026quot;`\u003c/span\u003e\\n}\\n\\n\u003cspan class=\\\"hljs-function\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003efunc\u003c/span\u003e \u003cspan class=\\\"hljs-title\\\"\u003emain\u003c/span\u003e\u003cspan class=\\\"hljs-params\\\"\u003e()\u003c/span\u003e\u003c/span\u003e {\\n\\tjsonFile, err := os.Open(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;file.json\u0026quot;\u003c/span\u003e)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003edefer\u003c/span\u003e jsonFile.Close()\\n\\n\\tjsonData, err := ioutil.ReadAll(jsonFile)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003evar\u003c/span\u003e post Post\\n\\tjson.Unmarshal(jsonData, \u0026amp;post)\\n\\tfmt.Println(post) \u003cspan class=\\\"hljs-comment\\\"\u003e// {1 Hello {0 author1} [{1 comment1 author2} {2 comment2 author3}]}\u003c/span\u003e\\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eデコーダを使う\u003c/h3\u003e\\n\u003cp\u003ehttp.Request の Body のように \u003ccode\u003eio.Reader\u003c/code\u003e のストリームからデータが入ってくる場合に使う.\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e構造体を定義\u003c/li\u003e\\n\u003cli\u003eデコーダを作成する\u003c/li\u003e\\n\u003cli\u003eJSON を順次処理してデコードする\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003epackage\u003c/span\u003e main\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eimport\u003c/span\u003e (\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;encoding/json\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;fmt\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;io\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;os\u0026quot;\u003c/span\u003e\\n)\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Post \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId      \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tContent \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\tAuthor  \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\t\\tId   \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\t\\tName \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;name\u0026quot;`\u003c/span\u003e\\n\\t} \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n\\tComments []\u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\t\\tId      \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\t\\tContent \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\t\\tAuthor  \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n\\t} \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;comments\u0026quot;`\u003c/span\u003e\\n}\\n\\n\u003cspan class=\\\"hljs-function\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003efunc\u003c/span\u003e \u003cspan class=\\\"hljs-title\\\"\u003emain\u003c/span\u003e\u003cspan class=\\\"hljs-params\\\"\u003e()\u003c/span\u003e\u003c/span\u003e {\\n\\tjsonFile, err := os.Open(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;file.json\u0026quot;\u003c/span\u003e)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003edefer\u003c/span\u003e jsonFile.Close()\\n\\n\\tdecoder := json.NewDecoder(jsonFile)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003efor\u003c/span\u003e {\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003evar\u003c/span\u003e post Post\\n\\t\\terr := decoder.Decode(\u0026amp;post)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err == io.EOF {\\n\\t\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ebreak\u003c/span\u003e\\n\\t\\t}\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\t\\tfmt.Println(err)\\n\\t\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t\\t}\\n\\t\\tfmt.Println(post) \u003cspan class=\\\"hljs-comment\\\"\u003e// {1 Hello {1 author1} [{1 comment1 author2} {2 comment2 author3}]}\u003c/span\u003e\\n\\t}\\n}\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eJSON データを作成する\u003c/h2\u003e\\n\u003cul\u003e\\n\u003cli\u003e構造体を定義\u003c/li\u003e\\n\u003cli\u003e構造体を JSON データに組み換え\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003epackage\u003c/span\u003e main\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eimport\u003c/span\u003e (\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;encoding/json\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;fmt\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;io/ioutil\u0026quot;\u003c/span\u003e\\n)\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Post \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId       \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e       \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tContent  \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\tAuthor   Author    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n\\tComments []Comment \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;comments\u0026quot;`\u003c/span\u003e\\n}\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Author \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId   \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tName \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;name\u0026quot;`\u003c/span\u003e\\n}\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Comment \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId      \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tContent \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\tAuthor  \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n}\\n\\n\u003cspan class=\\\"hljs-function\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003efunc\u003c/span\u003e \u003cspan class=\\\"hljs-title\\\"\u003emain\u003c/span\u003e\u003cspan class=\\\"hljs-params\\\"\u003e()\u003c/span\u003e\u003c/span\u003e {\\n\\tpost := Post{\\n\\t\\tId:      \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n\\t\\tContent: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;Hello\u0026quot;\u003c/span\u003e,\\n\\t\\tAuthor: Author{\\n\\t\\t\\tId:   \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n\\t\\t\\tName: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author1\u0026quot;\u003c/span\u003e,\\n\\t\\t},\\n\\t\\tComments: []Comment{\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n\\t\\t\\t\\tContent: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;comment1\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t\\tAuthor:  \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author2\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      \u003cspan class=\\\"hljs-number\\\"\u003e2\u003c/span\u003e,\\n\\t\\t\\t\\tContent: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;comment2\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t\\tAuthor:  \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author3\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t},\\n\\t\\t},\\n\\t}\\n\\toutput, err := json.MarshalIndent(\u0026amp;post, \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;\\\\t\\\\t\u0026quot;\u003c/span\u003e)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n\\terr = ioutil.WriteFile(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;created.json\u0026quot;\u003c/span\u003e, output, \u003cspan class=\\\"hljs-number\\\"\u003e0644\u003c/span\u003e)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n}\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eエンコーダを使う\u003c/h3\u003e\\n\u003cul\u003e\\n\u003cli\u003e構造体を定義\u003c/li\u003e\\n\u003cli\u003eエンコーダを作成する\u003c/li\u003e\\n\u003cli\u003eエンコーダを使い構造体を JSON ファイルにエンコード\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003epackage\u003c/span\u003e main\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eimport\u003c/span\u003e (\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;encoding/json\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;fmt\u0026quot;\u003c/span\u003e\\n\\t\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;os\u0026quot;\u003c/span\u003e\\n)\\n\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Post \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId       \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e       \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tContent  \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\tAuthor   Author    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n\\tComments []Comment \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;comments\u0026quot;`\u003c/span\u003e\\n}\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Author \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId   \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tName \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;name\u0026quot;`\u003c/span\u003e\\n}\\n\u003cspan class=\\\"hljs-keyword\\\"\u003etype\u003c/span\u003e Comment \u003cspan class=\\\"hljs-keyword\\\"\u003estruct\u003c/span\u003e {\\n\\tId      \u003cspan class=\\\"hljs-keyword\\\"\u003eint\u003c/span\u003e    \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;id\u0026quot;`\u003c/span\u003e\\n\\tContent \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;content\u0026quot;`\u003c/span\u003e\\n\\tAuthor  \u003cspan class=\\\"hljs-keyword\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e`json:\u0026quot;author\u0026quot;`\u003c/span\u003e\\n}\\n\\n\u003cspan class=\\\"hljs-function\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003efunc\u003c/span\u003e \u003cspan class=\\\"hljs-title\\\"\u003emain\u003c/span\u003e\u003cspan class=\\\"hljs-params\\\"\u003e()\u003c/span\u003e\u003c/span\u003e {\\n\\tpost := Post{\\n\\t\\tId:      \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n\\t\\tContent: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;Hello\u0026quot;\u003c/span\u003e,\\n\\t\\tAuthor: Author{\\n\\t\\t\\tId:   \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n\\t\\t\\tName: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author1\u0026quot;\u003c/span\u003e,\\n\\t\\t},\\n\\t\\tComments: []Comment{\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      \u003cspan class=\\\"hljs-number\\\"\u003e1\u003c/span\u003e,\\n\\t\\t\\t\\tContent: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;comment1\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t\\tAuthor:  \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author2\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t},\\n\\t\\t\\t{\\n\\t\\t\\t\\tId:      \u003cspan class=\\\"hljs-number\\\"\u003e2\u003c/span\u003e,\\n\\t\\t\\t\\tContent: \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;comment2\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t\\tAuthor:  \u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;author3\u0026quot;\u003c/span\u003e,\\n\\t\\t\\t},\\n\\t\\t},\\n\\t}\\n\\tjsonFile, err := os.Create(\u003cspan class=\\\"hljs-string\\\"\u003e\u0026quot;created.json\u0026quot;\u003c/span\u003e)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n\\tencoder := json.NewEncoder(jsonFile)\\n\\terr = encoder.Encode(\u0026amp;post)\\n\\t\u003cspan class=\\\"hljs-keyword\\\"\u003eif\u003c/span\u003e err != \u003cspan class=\\\"hljs-literal\\\"\u003enil\u003c/span\u003e {\\n\\t\\tfmt.Println(err)\\n\\t\\t\u003cspan class=\\\"hljs-keyword\\\"\u003ereturn\u003c/span\u003e\\n\\t}\\n}\u003c/code\u003e\u003c/pre\u003e\",\n  \"dir\": \"articles\",\n  \"base\": \"20210718124235.json\",\n  \"ext\": \".json\",\n  \"sourceBase\": \"20210718124235.md\",\n  \"sourceExt\": \".md\"\n}"}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"20210718124235"},"buildId":"g1tRWIeVJIrrorQy3XYS2","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7b08e4c67f4f1b892f4b.js"></script><script src="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" async=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" async=""></script><script src="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" async=""></script><script src="/_next/static/chunks/pages/_app-7163558e7d92093a94d2.js" async=""></script><script src="/_next/static/chunks/996-109927db333074874af4.js" async=""></script><script src="/_next/static/chunks/394-1ac6c205f84cbd1b2925.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-ab036cc92d9ceaf2a9ff.js" async=""></script><script src="/_next/static/g1tRWIeVJIrrorQy3XYS2/_buildManifest.js" async=""></script><script src="/_next/static/g1tRWIeVJIrrorQy3XYS2/_ssgManifest.js" async=""></script></body></html>