<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/e5069c53c645de81365c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e5069c53c645de81365c.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-2f612445bd50b211f15a.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7163558e7d92093a94d2.js" as="script"/><link rel="preload" href="/_next/static/chunks/996-109927db333074874af4.js" as="script"/><link rel="preload" href="/_next/static/chunks/394-1ac6c205f84cbd1b2925.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bid%5D-6ddac1fc6283bcb21133.js" as="script"/></head><body><div id="__next"><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->データベース操作</b></h1><h2>データベースの作成</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">CREATE</span><span> DATABASE database_name;</span></code></div></pre>
<h2>データベースの削除</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">DROP</span><span> DATABASE database_name;</span></code></div></pre>
<h2>テーブルの作成</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">CREATE</span><span> </span><span style="color:#f92672;font-weight:bold">TABLE</span><span> table_name (col_name type, ...);</span></code></div></pre>
<h3>主キー</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">CREATE</span><span> </span><span style="color:#f92672;font-weight:bold">TABLE</span><span> table_name (col_name type, ..., </span><span style="color:#f92672;font-weight:bold">PRIMARY</span><span> KEY (col_name));</span></code></div></pre>
<ul>
<li>PRIMARY KEY の重複と NULL は NG</li>
<li>複数の列を指定できる (複合主キー)<!-- -->
<ul>
<li>PRIMARY KEY(列名1, 列名2)</li>
</ul>
</li>
</ul>
<h3>外部キー</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">CREATE</span><span> </span><span style="color:#f92672;font-weight:bold">TABLE</span><span> table_name (
</span>  col_name type, ...,
<span>  </span><span style="color:#f92672;font-weight:bold">FOREIGN</span><span> KEY (col_name) </span><span style="color:#f92672;font-weight:bold">REFERENCES</span><span> parent_table_name(col_name)
</span>);
</code></div></pre>
<ul>
<li>子テーブルの外部キーの値は親テーブルに存在しないといけない</li>
<li>参照される値 (親テーブル) の UPDATE / DELETE は NG</li>
</ul>
<h4>親テーブルの UPDATE / DELETE 時の設定</h4>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">CREATE</span><span> </span><span style="color:#f92672;font-weight:bold">TABLE</span><span> table_name (
</span>  col_name type, ...,
<span>  </span><span style="color:#f92672;font-weight:bold">FOREIGN</span><span> KEY (col_name) </span><span style="color:#f92672;font-weight:bold">REFERENCES</span><span> parent_table_name(col_name)
</span><span>  </span><span style="color:#f92672;font-weight:bold">ON</span><span> </span><span style="color:#f92672;font-weight:bold">DELETE</span><span> [ アクション ]
</span><span>  </span><span style="color:#f92672;font-weight:bold">ON</span><span> UPDATE [ アクション ]
</span>);
<!-- -->
</code></div></pre>
<p>設定できるアクション。</p>
<table><thead><tr><th>アクション</th><th>詳細</th></tr></thead><tbody><tr><td>RESTRICT</td><td>親テーブルに対して UPDATE / DELETE を行うとエラーになる (デフォルト)</td></tr><tr><td>CASCADE</td><td>親テーブルに対して UPDATE / DELETE を行うと、子テーブルの一致する行に自動的に UPDATE / DELETE を行う</td></tr><tr><td>SET NULL</td><td>親テーブルに対して UPDATE / DELETE を行うと、子テーブルの外部キーを NULL に設定する</td></tr></tbody></table>
<h2>データの検索</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> col_name1, col_name2, ... </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name [ 条件 ];</span></code></div></pre>
<h3>条件</h3>
<ul>
<li>比較演算子</li>
</ul>
<table><thead><tr><th>演算子</th><th>意味</th></tr></thead><tbody><tr><td>&quot;=&quot;</td><td>等しい</td></tr><tr><td>&quot;&lt;&quot;</td><td>小さい</td></tr><tr><td>&quot;&gt;&quot;</td><td>大きい</td></tr><tr><td>&quot;&lt;=&quot;</td><td>以下</td></tr><tr><td>&quot;&gt;=&quot;</td><td>以上</td></tr><tr><td>&quot;&lt;&gt;&quot;</td><td>等しくない</td></tr></tbody></table>
<ul>
<li>BETWEEN</li>
</ul>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">WHERE</span><span> </span><span style="color:#f92672;font-weight:bold">BETWEEN</span><span> value1 </span><span style="color:#f92672;font-weight:bold">AND</span><span> value2;</span></code></div></pre>
<p>指定した範囲に値があるものを取得。</p>
<ul>
<li>IN</li>
</ul>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">WHERE</span><span> col_name </span><span style="color:#f92672;font-weight:bold">IN</span><span> (</span><span style="color:#a6e22e">&#x27;value1&#x27;</span><span>, </span><span style="color:#a6e22e">&#x27;value2&#x27;</span><span>);</span></code></div></pre>
<p>指定した値のリストの中にあるものを取得。</p>
<ul>
<li>LIKE</li>
</ul>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">WHERE</span><span> col_name </span><span style="color:#f92672;font-weight:bold">LIKE</span><span> </span><span style="color:#a6e22e">&#x27;_100%&#x27;</span><span>;</span></code></div></pre>
<p><em><strong>%</strong></em> は任意の文字数の任意の文字、 <em><strong>_</strong></em> は 1 文字の任意の文字。</p>
<ul>
<li>サブクエリ</li>
</ul>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name
</span><span></span><span style="color:#f92672;font-weight:bold">WHERE</span><span> col_name1 </span><span class="hljs-operator">=</span><span> (
</span><span>  </span><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">WHERE</span><span> col_name2 </span><span class="hljs-operator">=</span><span> </span><span style="color:#f92672;font-weight:bold">value</span><span>
</span>);
</code></div></pre>
<p>副問合せ。</p>
<h3>DISTINCT</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span style="color:#f92672;font-weight:bold">DISTINCT</span><span> col_name1, col_name2, ... </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name;</span></code></div></pre>
<p>SELECT の結果から重複業を除外できる。</p>
<p><em><strong>GROUP BY</strong></em> でも重複削除できる。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> col_name1, col_name2, ... </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">GROUP</span><span> </span><span style="color:#f92672;font-weight:bold">BY</span><span> col_name1;</span></code></div></pre>
<h3>ORDER BY</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">ORDER</span><span> </span><span style="color:#f92672;font-weight:bold">BY</span><span> col_name1 </span><span style="color:#f92672;font-weight:bold">ASC</span><span>, col_name2 </span><span style="color:#f92672;font-weight:bold">DESC</span><span>;</span></code></div></pre>
<p>ASC は昇順。 DESC は降順。 ASC は省略可能。</p>
<h3>LIMIT</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span> </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">ORDER</span><span> </span><span style="color:#f92672;font-weight:bold">BY</span><span> col_name LIMIT </span><span class="hljs-number">5</span><span>;</span></code></div></pre>
<h3>集約関数</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> col_name, </span><span style="color:#a6e22e">MAX</span><span>(col_name) </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name;</span></code></div></pre>
<p>基本的に NULL は無視される。
集約関数の種類。</p>
<table><thead><tr><th>関数</th><th>意味</th></tr></thead><tbody><tr><td>MAX</td><td>最大値</td></tr><tr><td>MIN</td><td>最小値</td></tr><tr><td>SUM</td><td>合計</td></tr><tr><td>AVG</td><td>平均</td></tr><tr><td>COUNT</td><td>カウント</td></tr></tbody></table>
<p>SUM / AVG / COUNT は DISTINCT をサポートしている。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> col_name, </span><span style="color:#a6e22e">COUNT</span><span>( </span><span style="color:#f92672;font-weight:bold">DISTINCT</span><span> col_name ) </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name;</span></code></div></pre>
<h3>GROUP BY</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> col_name, </span><span style="color:#a6e22e">COUNT</span><span>(col_name) </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">GROUP</span><span> </span><span style="color:#f92672;font-weight:bold">BY</span><span> col_name;</span></code></div></pre>
<p>テーブルを集約キーでグループ分けしてから集計する。</p>
<h3>HAVING</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span style="color:#a6e22e">COUNT</span><span>(col_name1) </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name </span><span style="color:#f92672;font-weight:bold">GROUP</span><span> </span><span style="color:#f92672;font-weight:bold">BY</span><span> col_name1 </span><span style="color:#f92672;font-weight:bold">HAVING</span><span> </span><span style="color:#a6e22e">COUNT</span><span>(col_name1) </span><span class="hljs-operator">&gt;=</span><span> </span><span style="color:#f92672;font-weight:bold">value</span><span>;</span></code></div></pre>
<p><em><strong>GROUP BY</strong></em> されたグループに対して条件を指定できる。</p>
<p>この場合、列名 1 で集計した値をカウントしてから HAVING で指定した条件のもののみを取得する。</p>
<h2>結合 ( JOIN )</h2>
<p>結合の種類は3つ。</p>
<ul>
<li>クロス結合 ( CROSS JOIN )</li>
<li>内部結合 ( INNER JOIN )</li>
<li>外部結合 ( OUTER JOIN )</li>
</ul>
<h3>クロス結合 ( CROSS JOIN )</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> </span><span class="hljs-operator">*</span><span>
</span><span></span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name1 </span><span style="color:#f92672;font-weight:bold">CROSS</span><span> </span><span style="color:#f92672;font-weight:bold">JOIN</span><span> table_name2;</span></code></div></pre>
<p>すべてのテーブルの組み合わせを作る。</p>
<h3>内部結合 ( INNER JOIN )</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> table_name1.</span><span class="hljs-operator">*</span><span>, table_name2.col_name, ...
</span><span></span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name1 </span><span style="color:#f92672;font-weight:bold">INNER</span><span> </span><span style="color:#f92672;font-weight:bold">JOIN</span><span> table_name2
</span><span></span><span style="color:#f92672;font-weight:bold">ON</span><span> table_name1.col_name1 </span><span class="hljs-operator">=</span><span> table_name2.col_name1;</span></code></div></pre>
<p>クロス結合の部分集合。条件一致したものだけを取得する。</p>
<p><em><strong>USING</strong></em> でも書ける。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> table_name1.</span><span class="hljs-operator">*</span><span>, table_name2.col_name, ...
</span><span></span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name1 </span><span style="color:#f92672;font-weight:bold">INNER</span><span> </span><span style="color:#f92672;font-weight:bold">JOIN</span><span> table_name2 </span><span style="color:#f92672;font-weight:bold">USING</span><span>(col_name);</span></code></div></pre>
<h3>外部結合</h3>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> table_name1.</span><span class="hljs-operator">*</span><span>, table_name2.col_name, ...
</span><span></span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name1 ( </span><span style="color:#f92672;font-weight:bold">LEFT</span><span> </span><span class="hljs-operator">|</span><span> </span><span style="color:#f92672;font-weight:bold">RIGHT</span><span> ) </span><span style="color:#f92672;font-weight:bold">OUTER</span><span> </span><span style="color:#f92672;font-weight:bold">JOIN</span><span> table_name2
</span><span></span><span style="color:#f92672;font-weight:bold">ON</span><span> table_name1.col_name1 </span><span class="hljs-operator">=</span><span> table_name2.col_name1;</span></code></div></pre>
<p>内部結合と同様に条件一致したものを取得し、さらに、 マッチしなかった ( LEFT | RIGHT ) のテーブルの行は残す。</p>
<table><thead><tr><th>書式</th><th>内容</th></tr></thead><tbody><tr><td>LEFT OUTER JOIN</td><td>FROM のあとに書かれたテーブルのデータだけを取得</td></tr><tr><td>RIGHT OUTER JOIN</td><td>JOIN の後に書かれたテーブルのデータだけを取得</td></tr></tbody></table>
<h2>テーブルの削除</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">DROP</span><span> </span><span style="color:#f92672;font-weight:bold">TABLE</span><span> table_name;</span></code></div></pre>
<h2>データの挿入</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">INSERT</span><span> </span><span style="color:#f92672;font-weight:bold">INTO</span><span> database_name.table_name(col_name1, col_name2, ...) </span><span style="color:#f92672;font-weight:bold">VALUES</span><span> (value1, value2, ...);</span></code></div></pre>
<p>全てのカラムに値を追加する場合は以下のように書ける。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">INSERT</span><span> </span><span style="color:#f92672;font-weight:bold">INTO</span><span> table_name </span><span style="color:#f92672;font-weight:bold">VALUES</span><span>(value1, value2, ...);</span></code></div></pre>
<h2>ビュー</h2>
<p>データを持たず実行分だけが入っている。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">CREATE</span><span> </span><span style="color:#f92672;font-weight:bold">VIEW</span><span> view_name (col_name1, col_name2, ...) </span><span style="color:#f92672;font-weight:bold">AS</span><span> select_statement;</span></code></div></pre>
<h2>数値として取り出す</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">SELECT</span><span> col_name </span><span style="color:#f92672;font-weight:bold">FROM</span><span> </span><span style="color:#f92672;font-weight:bold">as</span><span> unsigned </span><span style="color:#f92672;font-weight:bold">FROM</span><span> table_name;</span></code></div></pre>
<h2>index の付け方</h2>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">ALTER</span><span> </span><span style="color:#f92672;font-weight:bold">TABLE</span><span> table_name </span><span style="color:#f92672;font-weight:bold">AND</span><span> INDEX index_name (col_name);</span></code></div></pre>
<h2>トランザクション</h2>
<p><em><strong>BEGIN</strong></em> で開始して、 <em><strong>COMMIT</strong></em> で反映、 <em><strong>ROLLBACK</strong></em> で取り消しができる。</p>
<pre><div class="text-xs" node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-sql" style="white-space:pre"><span style="color:#f92672;font-weight:bold">BEGIN</span><span>;
</span>  SQL1;
<!-- -->  SQL2;
<span></span><span style="color:#f92672;font-weight:bold">COMMIT</span><span>;</span></code></div></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"id":"20191103015727","fileContents":"{\n  \"title\": \"データベース操作\",\n  \"date\": 20191103015727,\n  \"tags\": [\n    \"mysql\"\n  ],\n  \"bodyContent\": \"## データベースの作成\\n```sql\\nCREATE DATABASE database_name;\\n```\\n\\n## データベースの削除\\n```sql\\nDROP DATABASE database_name;\\n```\\n\\n## テーブルの作成\\n```sql\\nCREATE TABLE table_name (col_name type, ...);\\n```\\n\\n### 主キー\\n```sql\\nCREATE TABLE table_name (col_name type, ..., PRIMARY KEY (col_name));\\n```\\n- PRIMARY KEY の重複と NULL は NG\\n- 複数の列を指定できる (複合主キー)\\n  - PRIMARY KEY(列名1, 列名2)\\n\\n### 外部キー\\n```sql\\nCREATE TABLE table_name (\\n  col_name type, ...,\\n  FOREIGN KEY (col_name) REFERENCES parent_table_name(col_name)\\n);\\n```\\n- 子テーブルの外部キーの値は親テーブルに存在しないといけない\\n- 参照される値 (親テーブル) の UPDATE / DELETE は NG\\n\\n#### 親テーブルの UPDATE / DELETE 時の設定\\n```sql\\nCREATE TABLE table_name (\\n  col_name type, ...,\\n  FOREIGN KEY (col_name) REFERENCES parent_table_name(col_name)\\n  ON DELETE [ アクション ]\\n  ON UPDATE [ アクション ]\\n);\\n\\n```\\n設定できるアクション。\\n|アクション|詳細|\\n|-|-|\\nRESTRICT|親テーブルに対して UPDATE / DELETE を行うとエラーになる (デフォルト)\\nCASCADE|親テーブルに対して UPDATE / DELETE を行うと、子テーブルの一致する行に自動的に UPDATE / DELETE を行う\\nSET NULL|親テーブルに対して UPDATE / DELETE を行うと、子テーブルの外部キーを NULL に設定する\\n\\n\\n## データの検索\\n```sql\\nSELECT col_name1, col_name2, ... FROM table_name [ 条件 ];\\n```\\n\\n### 条件\\n- 比較演算子\\n\\n|演算子|意味|\\n|-|-|\\n\\\"=\\\"|等しい\\n\\\"\u003c\\\"|小さい\\n\\\"\u003e\\\"|大きい\\n\\\"\u003c=\\\"|以下\\n\\\"\u003e=\\\"|以上\\n\\\"\u003c\u003e\\\"|等しくない\\n\\n- BETWEEN\\n```sql\\nSELECT * FROM table_name WHERE BETWEEN value1 AND value2;\\n```\\n指定した範囲に値があるものを取得。\\n\\n- IN\\n```sql\\nSELECT * FROM table_name WHERE col_name IN ('value1', 'value2');\\n```\\n指定した値のリストの中にあるものを取得。\\n\\n- LIKE\\n```sql\\nSELECT * FROM table_name WHERE col_name LIKE '_100%';\\n```\\n***%*** は任意の文字数の任意の文字、 ***_*** は 1 文字の任意の文字。\\n\\n- サブクエリ\\n```sql\\nSELECT * FROM table_name\\nWHERE col_name1 = (\\n  SELECT * FROM table_name WHERE col_name2 = value\\n);\\n```\\n副問合せ。\\n\\n### DISTINCT\\n```sql\\nSELECT DISTINCT col_name1, col_name2, ... FROM table_name;\\n```\\nSELECT の結果から重複業を除外できる。\\n\\n***GROUP BY*** でも重複削除できる。\\n```sql\\nSELECT col_name1, col_name2, ... FROM table_name GROUP BY col_name1;\\n```\\n\\n### ORDER BY\\n```sql\\nSELECT * FROM table_name ORDER BY col_name1 ASC, col_name2 DESC;\\n```\\nASC は昇順。 DESC は降順。 ASC は省略可能。\\n\\n### LIMIT\\n```sql\\nSELECT * FROM table_name ORDER BY col_name LIMIT 5;\\n```\\n\\n### 集約関数\\n```sql\\nSELECT col_name, MAX(col_name) FROM table_name;\\n```\\n基本的に NULL は無視される。\\n集約関数の種類。\\n|関数|意味|\\n|-|-|\\nMAX|最大値\\nMIN|最小値\\nSUM|合計\\nAVG|平均\\nCOUNT|カウント\\n\\nSUM / AVG / COUNT は DISTINCT をサポートしている。\\n```sql\\nSELECT col_name, COUNT( DISTINCT col_name ) FROM table_name;\\n```\\n\\n### GROUP BY\\n```sql\\nSELECT col_name, COUNT(col_name) FROM table_name GROUP BY col_name;\\n```\\nテーブルを集約キーでグループ分けしてから集計する。\\n\\n### HAVING\\n```sql\\nSELECT COUNT(col_name1) FROM table_name GROUP BY col_name1 HAVING COUNT(col_name1) \u003e= value;\\n```\\n***GROUP BY*** されたグループに対して条件を指定できる。\\n\\nこの場合、列名 1 で集計した値をカウントしてから HAVING で指定した条件のもののみを取得する。\\n\\n## 結合 ( JOIN )\\n結合の種類は3つ。\\n- クロス結合 ( CROSS JOIN )\\n- 内部結合 ( INNER JOIN )\\n- 外部結合 ( OUTER JOIN )\\n\\n### クロス結合 ( CROSS JOIN )\\n```sql\\nSELECT *\\nFROM table_name1 CROSS JOIN table_name2;\\n```\\nすべてのテーブルの組み合わせを作る。\\n\\n### 内部結合 ( INNER JOIN )\\n```sql\\nSELECT table_name1.*, table_name2.col_name, ...\\nFROM table_name1 INNER JOIN table_name2\\nON table_name1.col_name1 = table_name2.col_name1;\\n```\\nクロス結合の部分集合。条件一致したものだけを取得する。\\n\\n***USING*** でも書ける。\\n```sql\\nSELECT table_name1.*, table_name2.col_name, ...\\nFROM table_name1 INNER JOIN table_name2 USING(col_name);\\n```\\n\\n### 外部結合\\n```sql\\nSELECT table_name1.*, table_name2.col_name, ...\\nFROM table_name1 ( LEFT | RIGHT ) OUTER JOIN table_name2\\nON table_name1.col_name1 = table_name2.col_name1;\\n```\\n内部結合と同様に条件一致したものを取得し、さらに、 マッチしなかった ( LEFT | RIGHT ) のテーブルの行は残す。\\n\\n|書式|内容|\\n|-|-|\\nLEFT OUTER JOIN|FROM のあとに書かれたテーブルのデータだけを取得\\nRIGHT OUTER JOIN|JOIN の後に書かれたテーブルのデータだけを取得\\n\\n## テーブルの削除\\n```sql\\nDROP TABLE table_name;\\n```\\n\\n## データの挿入\\n```sql\\nINSERT INTO database_name.table_name(col_name1, col_name2, ...) VALUES (value1, value2, ...);\\n```\\n\\n全てのカラムに値を追加する場合は以下のように書ける。\\n```sql\\nINSERT INTO table_name VALUES(value1, value2, ...);\\n```\\n\\n## ビュー\\nデータを持たず実行分だけが入っている。\\n```sql\\nCREATE VIEW view_name (col_name1, col_name2, ...) AS select_statement;\\n```\\n\\n## 数値として取り出す\\n```sql\\nSELECT col_name FROM as unsigned FROM table_name;\\n```\\n\\n## index の付け方\\n```sql\\nALTER TABLE table_name AND INDEX index_name (col_name);\\n```\\n\\n## トランザクション\\n***BEGIN*** で開始して、 ***COMMIT*** で反映、 ***ROLLBACK*** で取り消しができる。\\n```sql\\nBEGIN;\\n  SQL1;\\n  SQL2;\\nCOMMIT;\\n```\",\n  \"bodyHtml\": \"\u003ch2\u003eデータベースの作成\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eCREATE\u003c/span\u003e DATABASE database_name;\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eデータベースの削除\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eDROP\u003c/span\u003e DATABASE database_name;\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eテーブルの作成\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eCREATE\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eTABLE\u003c/span\u003e table_name (col_name type, ...);\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003e主キー\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eCREATE\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eTABLE\u003c/span\u003e table_name (col_name type, ..., \u003cspan class=\\\"hljs-keyword\\\"\u003ePRIMARY\u003c/span\u003e KEY (col_name));\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\\n\u003cli\u003ePRIMARY KEY の重複と NULL は NG\u003c/li\u003e\\n\u003cli\u003e複数の列を指定できる (複合主キー)\\n\u003cul\u003e\\n\u003cli\u003ePRIMARY KEY(列名1, 列名2)\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003ch3\u003e外部キー\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eCREATE\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eTABLE\u003c/span\u003e table_name (\\n  col_name type, ...,\\n  \u003cspan class=\\\"hljs-keyword\\\"\u003eFOREIGN\u003c/span\u003e KEY (col_name) \u003cspan class=\\\"hljs-keyword\\\"\u003eREFERENCES\u003c/span\u003e parent_table_name(col_name)\\n);\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\\n\u003cli\u003e子テーブルの外部キーの値は親テーブルに存在しないといけない\u003c/li\u003e\\n\u003cli\u003e参照される値 (親テーブル) の UPDATE / DELETE は NG\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003ch4\u003e親テーブルの UPDATE / DELETE 時の設定\u003c/h4\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eCREATE\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eTABLE\u003c/span\u003e table_name (\\n  col_name type, ...,\\n  \u003cspan class=\\\"hljs-keyword\\\"\u003eFOREIGN\u003c/span\u003e KEY (col_name) \u003cspan class=\\\"hljs-keyword\\\"\u003eREFERENCES\u003c/span\u003e parent_table_name(col_name)\\n  \u003cspan class=\\\"hljs-keyword\\\"\u003eON\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eDELETE\u003c/span\u003e [ アクション ]\\n  \u003cspan class=\\\"hljs-keyword\\\"\u003eON\u003c/span\u003e UPDATE [ アクション ]\\n);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e設定できるアクション。\u003c/p\u003e\\n\u003ctable\u003e\\n\u003cthead\u003e\\n\u003ctr\u003e\\n\u003cth\u003eアクション\u003c/th\u003e\\n\u003cth\u003e詳細\u003c/th\u003e\\n\u003c/tr\u003e\\n\u003c/thead\u003e\\n\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eRESTRICT\u003c/td\u003e\\n\u003ctd\u003e親テーブルに対して UPDATE / DELETE を行うとエラーになる (デフォルト)\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eCASCADE\u003c/td\u003e\\n\u003ctd\u003e親テーブルに対して UPDATE / DELETE を行うと、子テーブルの一致する行に自動的に UPDATE / DELETE を行う\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eSET NULL\u003c/td\u003e\\n\u003ctd\u003e親テーブルに対して UPDATE / DELETE を行うと、子テーブルの外部キーを NULL に設定する\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003c/tbody\u003e\\n\u003c/table\u003e\\n\u003ch2\u003eデータの検索\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e col_name1, col_name2, ... \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name [ 条件 ];\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003e条件\u003c/h3\u003e\\n\u003cul\u003e\\n\u003cli\u003e比較演算子\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003ctable\u003e\\n\u003cthead\u003e\\n\u003ctr\u003e\\n\u003cth\u003e演算子\u003c/th\u003e\\n\u003cth\u003e意味\u003c/th\u003e\\n\u003c/tr\u003e\\n\u003c/thead\u003e\\n\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd\u003e\u0026quot;=\u0026quot;\u003c/td\u003e\\n\u003ctd\u003e等しい\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003e\u0026quot;\u0026lt;\u0026quot;\u003c/td\u003e\\n\u003ctd\u003e小さい\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003e\u0026quot;\u0026gt;\u0026quot;\u003c/td\u003e\\n\u003ctd\u003e大きい\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003e\u0026quot;\u0026lt;=\u0026quot;\u003c/td\u003e\\n\u003ctd\u003e以下\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003e\u0026quot;\u0026gt;=\u0026quot;\u003c/td\u003e\\n\u003ctd\u003e以上\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003e\u0026quot;\u0026lt;\u0026gt;\u0026quot;\u003c/td\u003e\\n\u003ctd\u003e等しくない\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003c/tbody\u003e\\n\u003c/table\u003e\\n\u003cul\u003e\\n\u003cli\u003eBETWEEN\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eWHERE\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eBETWEEN\u003c/span\u003e value1 \u003cspan class=\\\"hljs-keyword\\\"\u003eAND\u003c/span\u003e value2;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e指定した範囲に値があるものを取得。\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eIN\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eWHERE\u003c/span\u003e col_name \u003cspan class=\\\"hljs-keyword\\\"\u003eIN\u003c/span\u003e (\u003cspan class=\\\"hljs-string\\\"\u003e\u0026#x27;value1\u0026#x27;\u003c/span\u003e, \u003cspan class=\\\"hljs-string\\\"\u003e\u0026#x27;value2\u0026#x27;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e指定した値のリストの中にあるものを取得。\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eLIKE\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eWHERE\u003c/span\u003e col_name \u003cspan class=\\\"hljs-keyword\\\"\u003eLIKE\u003c/span\u003e \u003cspan class=\\\"hljs-string\\\"\u003e\u0026#x27;_100%\u0026#x27;\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003e\u003cstrong\u003e%\u003c/strong\u003e\u003c/em\u003e は任意の文字数の任意の文字、 \u003cem\u003e\u003cstrong\u003e_\u003c/strong\u003e\u003c/em\u003e は 1 文字の任意の文字。\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eサブクエリ\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eWHERE\u003c/span\u003e col_name1 \u003cspan class=\\\"hljs-operator\\\"\u003e=\u003c/span\u003e (\\n  \u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eWHERE\u003c/span\u003e col_name2 \u003cspan class=\\\"hljs-operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003evalue\u003c/span\u003e\\n);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e副問合せ。\u003c/p\u003e\\n\u003ch3\u003eDISTINCT\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eDISTINCT\u003c/span\u003e col_name1, col_name2, ... \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSELECT の結果から重複業を除外できる。\u003c/p\u003e\\n\u003cp\u003e\u003cem\u003e\u003cstrong\u003eGROUP BY\u003c/strong\u003e\u003c/em\u003e でも重複削除できる。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e col_name1, col_name2, ... \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eGROUP\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eBY\u003c/span\u003e col_name1;\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eORDER BY\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eORDER\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eBY\u003c/span\u003e col_name1 \u003cspan class=\\\"hljs-keyword\\\"\u003eASC\u003c/span\u003e, col_name2 \u003cspan class=\\\"hljs-keyword\\\"\u003eDESC\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eASC は昇順。 DESC は降順。 ASC は省略可能。\u003c/p\u003e\\n\u003ch3\u003eLIMIT\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eORDER\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eBY\u003c/span\u003e col_name LIMIT \u003cspan class=\\\"hljs-number\\\"\u003e5\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003e集約関数\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e col_name, \u003cspan class=\\\"hljs-built_in\\\"\u003eMAX\u003c/span\u003e(col_name) \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e基本的に NULL は無視される。\\n集約関数の種類。\u003c/p\u003e\\n\u003ctable\u003e\\n\u003cthead\u003e\\n\u003ctr\u003e\\n\u003cth\u003e関数\u003c/th\u003e\\n\u003cth\u003e意味\u003c/th\u003e\\n\u003c/tr\u003e\\n\u003c/thead\u003e\\n\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eMAX\u003c/td\u003e\\n\u003ctd\u003e最大値\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eMIN\u003c/td\u003e\\n\u003ctd\u003e最小値\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eSUM\u003c/td\u003e\\n\u003ctd\u003e合計\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eAVG\u003c/td\u003e\\n\u003ctd\u003e平均\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eCOUNT\u003c/td\u003e\\n\u003ctd\u003eカウント\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003c/tbody\u003e\\n\u003c/table\u003e\\n\u003cp\u003eSUM / AVG / COUNT は DISTINCT をサポートしている。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e col_name, \u003cspan class=\\\"hljs-built_in\\\"\u003eCOUNT\u003c/span\u003e( \u003cspan class=\\\"hljs-keyword\\\"\u003eDISTINCT\u003c/span\u003e col_name ) \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name;\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003eGROUP BY\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e col_name, \u003cspan class=\\\"hljs-built_in\\\"\u003eCOUNT\u003c/span\u003e(col_name) \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eGROUP\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eBY\u003c/span\u003e col_name;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eテーブルを集約キーでグループ分けしてから集計する。\u003c/p\u003e\\n\u003ch3\u003eHAVING\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-built_in\\\"\u003eCOUNT\u003c/span\u003e(col_name1) \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eGROUP\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eBY\u003c/span\u003e col_name1 \u003cspan class=\\\"hljs-keyword\\\"\u003eHAVING\u003c/span\u003e \u003cspan class=\\\"hljs-built_in\\\"\u003eCOUNT\u003c/span\u003e(col_name1) \u003cspan class=\\\"hljs-operator\\\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003evalue\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cem\u003e\u003cstrong\u003eGROUP BY\u003c/strong\u003e\u003c/em\u003e されたグループに対して条件を指定できる。\u003c/p\u003e\\n\u003cp\u003eこの場合、列名 1 で集計した値をカウントしてから HAVING で指定した条件のもののみを取得する。\u003c/p\u003e\\n\u003ch2\u003e結合 ( JOIN )\u003c/h2\u003e\\n\u003cp\u003e結合の種類は3つ。\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003eクロス結合 ( CROSS JOIN )\u003c/li\u003e\\n\u003cli\u003e内部結合 ( INNER JOIN )\u003c/li\u003e\\n\u003cli\u003e外部結合 ( OUTER JOIN )\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003ch3\u003eクロス結合 ( CROSS JOIN )\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name1 \u003cspan class=\\\"hljs-keyword\\\"\u003eCROSS\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eJOIN\u003c/span\u003e table_name2;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eすべてのテーブルの組み合わせを作る。\u003c/p\u003e\\n\u003ch3\u003e内部結合 ( INNER JOIN )\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e table_name1.\u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e, table_name2.col_name, ...\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name1 \u003cspan class=\\\"hljs-keyword\\\"\u003eINNER\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eJOIN\u003c/span\u003e table_name2\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eON\u003c/span\u003e table_name1.col_name1 \u003cspan class=\\\"hljs-operator\\\"\u003e=\u003c/span\u003e table_name2.col_name1;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eクロス結合の部分集合。条件一致したものだけを取得する。\u003c/p\u003e\\n\u003cp\u003e\u003cem\u003e\u003cstrong\u003eUSING\u003c/strong\u003e\u003c/em\u003e でも書ける。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e table_name1.\u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e, table_name2.col_name, ...\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name1 \u003cspan class=\\\"hljs-keyword\\\"\u003eINNER\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eJOIN\u003c/span\u003e table_name2 \u003cspan class=\\\"hljs-keyword\\\"\u003eUSING\u003c/span\u003e(col_name);\u003c/code\u003e\u003c/pre\u003e\u003ch3\u003e外部結合\u003c/h3\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e table_name1.\u003cspan class=\\\"hljs-operator\\\"\u003e*\u003c/span\u003e, table_name2.col_name, ...\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name1 ( \u003cspan class=\\\"hljs-keyword\\\"\u003eLEFT\u003c/span\u003e \u003cspan class=\\\"hljs-operator\\\"\u003e|\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eRIGHT\u003c/span\u003e ) \u003cspan class=\\\"hljs-keyword\\\"\u003eOUTER\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eJOIN\u003c/span\u003e table_name2\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eON\u003c/span\u003e table_name1.col_name1 \u003cspan class=\\\"hljs-operator\\\"\u003e=\u003c/span\u003e table_name2.col_name1;\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e内部結合と同様に条件一致したものを取得し、さらに、 マッチしなかった ( LEFT | RIGHT ) のテーブルの行は残す。\u003c/p\u003e\\n\u003ctable\u003e\\n\u003cthead\u003e\\n\u003ctr\u003e\\n\u003cth\u003e書式\u003c/th\u003e\\n\u003cth\u003e内容\u003c/th\u003e\\n\u003c/tr\u003e\\n\u003c/thead\u003e\\n\u003ctbody\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eLEFT OUTER JOIN\u003c/td\u003e\\n\u003ctd\u003eFROM のあとに書かれたテーブルのデータだけを取得\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003ctr\u003e\\n\u003ctd\u003eRIGHT OUTER JOIN\u003c/td\u003e\\n\u003ctd\u003eJOIN の後に書かれたテーブルのデータだけを取得\u003c/td\u003e\\n\u003c/tr\u003e\\n\u003c/tbody\u003e\\n\u003c/table\u003e\\n\u003ch2\u003eテーブルの削除\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eDROP\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eTABLE\u003c/span\u003e table_name;\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eデータの挿入\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eINSERT\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eINTO\u003c/span\u003e database_name.table_name(col_name1, col_name2, ...) \u003cspan class=\\\"hljs-keyword\\\"\u003eVALUES\u003c/span\u003e (value1, value2, ...);\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e全てのカラムに値を追加する場合は以下のように書ける。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eINSERT\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eINTO\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eVALUES\u003c/span\u003e(value1, value2, ...);\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eビュー\u003c/h2\u003e\\n\u003cp\u003eデータを持たず実行分だけが入っている。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eCREATE\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eVIEW\u003c/span\u003e view_name (col_name1, col_name2, ...) \u003cspan class=\\\"hljs-keyword\\\"\u003eAS\u003c/span\u003e select_statement;\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003e数値として取り出す\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eSELECT\u003c/span\u003e col_name \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eas\u003c/span\u003e unsigned \u003cspan class=\\\"hljs-keyword\\\"\u003eFROM\u003c/span\u003e table_name;\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eindex の付け方\u003c/h2\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eALTER\u003c/span\u003e \u003cspan class=\\\"hljs-keyword\\\"\u003eTABLE\u003c/span\u003e table_name \u003cspan class=\\\"hljs-keyword\\\"\u003eAND\u003c/span\u003e INDEX index_name (col_name);\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003eトランザクション\u003c/h2\u003e\\n\u003cp\u003e\u003cem\u003e\u003cstrong\u003eBEGIN\u003c/strong\u003e\u003c/em\u003e で開始して、 \u003cem\u003e\u003cstrong\u003eCOMMIT\u003c/strong\u003e\u003c/em\u003e で反映、 \u003cem\u003e\u003cstrong\u003eROLLBACK\u003c/strong\u003e\u003c/em\u003e で取り消しができる。\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"hljs\\\"\u003e\u003cspan class=\\\"hljs-keyword\\\"\u003eBEGIN\u003c/span\u003e;\\n  SQL1;\\n  SQL2;\\n\u003cspan class=\\\"hljs-keyword\\\"\u003eCOMMIT\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\",\n  \"dir\": \"articles\",\n  \"base\": \"20191103015727.json\",\n  \"ext\": \".json\",\n  \"sourceBase\": \"20191103015727.md\",\n  \"sourceExt\": \".md\"\n}"}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"20191103015727"},"buildId":"I5wtuWD1UYhbDUiWyKPLc","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-7b08e4c67f4f1b892f4b.js"></script><script src="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" async=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" async=""></script><script src="/_next/static/chunks/main-c8b51cc0a92c3008cd1b.js" async=""></script><script src="/_next/static/chunks/pages/_app-7163558e7d92093a94d2.js" async=""></script><script src="/_next/static/chunks/996-109927db333074874af4.js" async=""></script><script src="/_next/static/chunks/394-1ac6c205f84cbd1b2925.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-6ddac1fc6283bcb21133.js" async=""></script><script src="/_next/static/I5wtuWD1UYhbDUiWyKPLc/_buildManifest.js" async=""></script><script src="/_next/static/I5wtuWD1UYhbDUiWyKPLc/_ssgManifest.js" async=""></script></body></html>