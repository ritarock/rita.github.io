<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Ansibleでmacbookを管理</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/e1c3d6ee91fcccc28a7c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e1c3d6ee91fcccc28a7c.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-f7ca7a935b246c4edd14.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.d2e6186d001d2275b0af.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.b2562460c774f5a57980.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-a51059d102973e3ed49e.js" as="script"/><link rel="preload" href="/_next/static/chunks/c5b568cee8545d966ddc8d89f9063461e084494a.c564a02921d697744263.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/articles/%5Bid%5D-f1b3a6a86284515e3de9.js" as="script"/></head><body><div id="__next"><div><div><div><h1>Ghostの囁き</h1><hr color="black"/></div><h2>Ansibleでmacbookを管理</h2><p>MacBook の環境を管理する。</p><h2>環境</h2><pre style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;position:relative;margin:.5em 0;overflow:visible;padding:0;background-color:#fdfdfd;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-bottom:1em"><code class="language-bash" style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto"><span class="token" style="color:#7D8B99"># brew と brew cask は導入済み</span><span>
</span><span>$ brew </span><span class="token" style="color:#2f9c0a">install</span><span> ansible
</span>
<span></span><span class="token" style="color:#7D8B99"># 上記、コマンドを実行済み</span><span>
</span>$ ansible --version
<span>ansible </span><span class="token" style="color:#c92c2c">2.5</span><span>.0</span></code></pre><p>今回用意した 2 つのファイル。</p><p><code>hosts</code></p><pre style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;position:relative;margin:.5em 0;overflow:visible;padding:0;background-color:#fdfdfd;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-bottom:1em"><code class="language-hosts" style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto"><span>localhost</span></code></pre><p><code>localhost.yml</code></p><pre style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;position:relative;margin:.5em 0;overflow:visible;padding:0;background-color:#fdfdfd;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-bottom:1em"><code class="language-yaml" style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto"><span class="token" style="color:#5F6364">---</span><span>
</span><span>  </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">hosts</span><span class="token" style="color:#5F6364">:</span><span> localhost
</span><span>    </span><span class="token key" style="color:#1990b8">connection</span><span class="token" style="color:#5F6364">:</span><span> local
</span><span>    </span><span class="token key" style="color:#1990b8">gather_facts</span><span class="token" style="color:#5F6364">:</span><span> no
</span><span>    </span><span class="token key" style="color:#1990b8">become</span><span class="token" style="color:#5F6364">:</span><span> no
</span>
<span>    </span><span class="token key" style="color:#1990b8">vars</span><span class="token" style="color:#5F6364">:</span><span>
</span><span>      </span><span class="token key" style="color:#1990b8">homebrew_packages</span><span class="token" style="color:#5F6364">:</span><span>
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> fish
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> git
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> node
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> pyenv
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> python
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> tree
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> vim
</span>
<span>      </span><span class="token key" style="color:#1990b8">homebrew_cask_packages</span><span class="token" style="color:#5F6364">:</span><span>
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> atom
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> docker
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> dropbox
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> evernote
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> google</span><span class="token" style="color:#5F6364">-</span><span>chrome
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> google</span><span class="token" style="color:#5F6364">-</span><span>drive
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> iTerm2
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> slack
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> vagrant
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> virtualbox
</span>
<span>    </span><span class="token key" style="color:#1990b8">tasks</span><span class="token" style="color:#5F6364">:</span><span>
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> update homebrew
</span><span>          </span><span class="token key" style="color:#1990b8">homebrew</span><span class="token" style="color:#5F6364">:</span><span> update_homebrew=yes
</span>
<span>        </span><span class="token" style="color:#7D8B99"># brew</span><span>
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> install homebrew_packages
</span><span>          </span><span class="token key" style="color:#1990b8">homebrew</span><span class="token" style="color:#5F6364">:</span><span>
</span><span>            name=</span><span class="token" style="color:#5F6364">{</span><span class="token" style="color:#5F6364">{</span><span> item.name </span><span class="token" style="color:#5F6364">}</span><span class="token" style="color:#5F6364">}</span><span>
</span><span>          </span><span class="token key" style="color:#1990b8">with_items</span><span class="token" style="color:#5F6364">:</span><span> </span><span class="token" style="color:#2f9c0a">&#x27;{{ homebrew_packages }}&#x27;</span><span>
</span>
<span>        </span><span class="token" style="color:#7D8B99"># homebrew_cask</span><span>
</span><span>        </span><span class="token" style="color:#5F6364">-</span><span> </span><span class="token key" style="color:#1990b8">name</span><span class="token" style="color:#5F6364">:</span><span> install homebrew_cask_packages
</span><span>          </span><span class="token key" style="color:#1990b8">homebrew_cask</span><span class="token" style="color:#5F6364">:</span><span>
</span><span>            name=</span><span class="token" style="color:#5F6364">{</span><span class="token" style="color:#5F6364">{</span><span> item.name </span><span class="token" style="color:#5F6364">}</span><span class="token" style="color:#5F6364">}</span><span>
</span><span>          </span><span class="token key" style="color:#1990b8">with_items</span><span class="token" style="color:#5F6364">:</span><span> </span><span class="token" style="color:#2f9c0a">&#x27;{{ homebrew_cask_packages }}&#x27;</span></code></pre><pre style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;position:relative;margin:.5em 0;overflow:visible;padding:0;background-color:#fdfdfd;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-bottom:1em"><code class="language-bash" style="color:black;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto"><span>$ ansible-playbook -i hosts localhostsyml</span></code></pre><p><a href="https://github.com/ritarock/dotfiles/tree/master/.macbook-provisioning">ソースコード</a></p><div><p><a href="/">TOPへ戻る</a></p></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"articleData":{"id":"20180409090000","contentHtml":"\nMacBook の環境を管理する。\n\n## 環境\n\n```bash\n# brew と brew cask は導入済み\n$ brew install ansible\n\n# 上記、コマンドを実行済み\n$ ansible --version\nansible 2.5.0\n```\n\n今回用意した 2 つのファイル。\n\n`hosts`\n\n```hosts\nlocalhost\n```\n\n`localhost.yml`\n\n```yaml\n---\n  - hosts: localhost\n    connection: local\n    gather_facts: no\n    become: no\n\n    vars:\n      homebrew_packages:\n        - name: fish\n        - name: git\n        - name: node\n        - name: pyenv\n        - name: python\n        - name: tree\n        - name: vim\n\n      homebrew_cask_packages:\n        - name: atom\n        - name: docker\n        - name: dropbox\n        - name: evernote\n        - name: google-chrome\n        - name: google-drive\n        - name: iTerm2\n        - name: slack\n        - name: vagrant\n        - name: virtualbox\n\n    tasks:\n        - name: update homebrew\n          homebrew: update_homebrew=yes\n\n        # brew\n        - name: install homebrew_packages\n          homebrew:\n            name={{ item.name }}\n          with_items: '{{ homebrew_packages }}'\n\n        # homebrew_cask\n        - name: install homebrew_cask_packages\n          homebrew_cask:\n            name={{ item.name }}\n          with_items: '{{ homebrew_cask_packages }}'\n```\n\n```bash\n$ ansible-playbook -i hosts localhostsyml\n```\n\n[ソースコード](https://github.com/ritarock/dotfiles/tree/master/.macbook-provisioning)\n","title":"Ansibleでmacbookを管理","date":20180409090000,"tags":["Ansible","Mac"]}},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"20180409090000"},"buildId":"4XdhE36HIcpNEHEaQPgpB","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8f31809deb7932dd0187.js"></script><script src="/_next/static/chunks/main-f7ca7a935b246c4edd14.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.d2e6186d001d2275b0af.js" async=""></script><script src="/_next/static/chunks/commons.b2562460c774f5a57980.js" async=""></script><script src="/_next/static/chunks/pages/_app-a51059d102973e3ed49e.js" async=""></script><script src="/_next/static/chunks/c5b568cee8545d966ddc8d89f9063461e084494a.c564a02921d697744263.js" async=""></script><script src="/_next/static/chunks/pages/articles/%5Bid%5D-f1b3a6a86284515e3de9.js" async=""></script><script src="/_next/static/4XdhE36HIcpNEHEaQPgpB/_buildManifest.js" async=""></script><script src="/_next/static/4XdhE36HIcpNEHEaQPgpB/_ssgManifest.js" async=""></script></body></html>