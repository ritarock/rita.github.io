<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<style type=text/css>body{font-family:monospace;}</style>
	<title>Docker のインストールからコンテナ作成まで</title>
	
	
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	============<br>
	== <a href="https://ritarock.github.io/">MyDocs</a> ==<br>
	============
	<div style="float: right;"></div><br>
	<p>
	<nav>
			
			
			<a href="/tags/"><b>Tags</b></a>
			
	</nav>
	</p>
	
</header>

	
	<main>
		<article>
			<h1>Docker のインストールからコンテナ作成まで</h1>
			<b><time>2018-02-13 09:00:00</time></b>
		       
		           <a href="/tags/docker">docker</a>
        	       

			<div>
				<h2 id="開発環境">開発環境</h2>
<ul>
<li>Ubuntu/trusty64</li>
</ul>
<h2 id="docker-のインストール">Docker のインストール</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ sudo apt-get update
</span></span><span style="display:flex;"><span>$ sudo apt-get -y install <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    apt-transport-https <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    ca-certificates <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    curl <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>    software-properties-common
</span></span><span style="display:flex;"><span>$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
</span></span><span style="display:flex;"><span>$ sudo apt-key fingerprint 0EBFCD88
</span></span><span style="display:flex;"><span>$ sudo add-apt-repository -y  <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   <span style="color:#e6db74">&#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   </span><span style="color:#66d9ef">$(</span>lsb_release -cs<span style="color:#66d9ef">)</span><span style="color:#e6db74"> \
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   stable&#34;</span>
</span></span><span style="display:flex;"><span>$ sudo apt-get update
</span></span><span style="display:flex;"><span>$ sudo apt-get install -y docker-ce
</span></span></code></pre></div><h2 id="docker-コマンド">Docker コマンド</h2>
<h3 id="ローカルに保存された-docker-イメージの一覧を取得">ローカルに保存された docker イメージの一覧を取得</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker images
</span></span></code></pre></div><h3 id="docker-hub-にあるイメージを検索">docker hub にあるイメージを検索</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker search &lt;イメージ&gt;
</span></span></code></pre></div><h3 id="docker-hub-にあるイメージをローカルに取得する">docker hub にあるイメージをローカルに取得する</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker pull &lt;イメージ&gt;
</span></span></code></pre></div><h3 id="コンテナでプロセスを起動する">コンテナでプロセスを起動する</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker run -it &lt;イメージ&gt; /bin/bash
</span></span></code></pre></div><h3 id="プロセスを確認する--停止されたものも含む-">プロセスを確認する ( 停止されたものも含む )</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker ps -a
</span></span></code></pre></div><h3 id="停止されたコンテナの削除">停止されたコンテナの削除</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker rm &lt;コンテナid&gt;
</span></span></code></pre></div><p>id は一意なので頭の 4 桁程度入力すれば OK。</p>
<h3 id="コンテナを全て削除">コンテナを全て削除</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker rm <span style="color:#66d9ef">$(</span>docker ps -aq<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><h3 id="exit-と同時にコンテナの削除">exit と同時にコンテナの削除</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker run --rm -it &lt;イメージ&gt; /bin/bash
</span></span></code></pre></div><h3 id="ポートをホスト側に公開して起動">ポートをホスト側に公開して起動</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker run -it -p 80:80 &lt;イメージ&gt; /bin/bash
</span></span></code></pre></div><h3 id="外部ファイルを取り込む">外部ファイルを取り込む</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker run -it -v &lt;ホスト側のパス&gt;:&lt;コンテナ側のパス&gt; &lt;イメージ&gt; /bin/bash
</span></span></code></pre></div><h2 id="dockerfile-作成してからの流れ">Dockerfile 作成してからの流れ</h2>
<h3 id="dockerfile-からイメージを作成">Dockerfile からイメージを作成</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker build -t &lt;作成するイメージ名&gt; .
</span></span></code></pre></div><h3 id="作成したイメージからコンテナを起動">作成したイメージからコンテナを起動</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker run --name &lt;起動するコンテナ名&gt; -d -p &lt;イメージ名&gt;
</span></span></code></pre></div><h3 id="コンテナの停止">コンテナの停止</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker stop &lt;コンテナ名&gt;
</span></span></code></pre></div>
			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>LATEST POSTS</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/20231216175817/">ブログを next.js 辞めて hugo にした</a></li>
				
				<li><a href="/posts/20230322173450/">Slack のスラッシュコマンドを Lambda で受け取る</a></li>
				
				<li><a href="/posts/20230223173604/">gqlgen を触る</a></li>
				
				<li><a href="/posts/20230210174709/">aws-sdk-go-v2 で profile を使う</a></li>
				
				<li><a href="/posts/20230204160502/">github action で日付を扱う</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<p>&copy; 2023 <a href="https://ritarock.github.io/"><b>MyDocs</b></a>.
	</p>
</footer>

</body>
</html>
