<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ec23c38ee66c087d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec23c38ee66c087d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f65e66e62fc5ca80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c8629aafccf90c37.js" defer=""></script><script src="/_next/static/chunks/996-9e3c12b77542c098.js" defer=""></script><script src="/_next/static/chunks/711-7d68ff1249d1d375.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-2063ba6ca0b41b92.js" defer=""></script><script src="/_next/static/DIZOSW1OSeZ6hCOIsCJQ0/_buildManifest.js" defer=""></script><script src="/_next/static/DIZOSW1OSeZ6hCOIsCJQ0/_ssgManifest.js" defer=""></script><script src="/_next/static/DIZOSW1OSeZ6hCOIsCJQ0/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-10"><h1><b># <!-- -->Ansible で MacBook を管理</b></h1><p>MacBook の環境を管理する。</p>
<h2>環境</h2>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">#</span><span class="bash"> brew と brew cask は導入済み</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> brew install ansible</span><span>
</span><span></span><span style="color:#75715e">
</span><span style="color:#75715e">#</span><span class="bash"> 上記,コマンドを実行済み</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> ansible --version</span><span>
</span>ansible 2.5.0</code></pre></div></pre>
<p>今回用意した 2 つのファイル。</p>
<ul>
<li>hosts</li>
</ul>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">hosts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>localhost</span></code></pre></div></pre>
<ul>
<li>localhost.yml</li>
</ul>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">yaml</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-yaml" style="white-space:pre"><span style="color:#75715e">---</span><span>
</span><span>  </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">hosts:</span><span> </span><span style="color:#a6e22e">localhost</span><span>
</span><span>    </span><span class="hljs-attr">connection:</span><span> </span><span style="color:#a6e22e">local</span><span>
</span><span>    </span><span class="hljs-attr">gather_facts:</span><span> </span><span style="color:#f92672;font-weight:bold">no</span><span>
</span><span>    </span><span class="hljs-attr">become:</span><span> </span><span style="color:#f92672;font-weight:bold">no</span><span>
</span>
<span>    </span><span class="hljs-attr">vars:</span><span>
</span><span>      </span><span class="hljs-attr">homebrew_packages:</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">fish</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">git</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">node</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">pyenv</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">python</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">tree</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">vim</span><span>
</span>
<span>      </span><span class="hljs-attr">homebrew_cask_packages:</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">atom</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">docker</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">dropbox</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">evernote</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">google-chrome</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">google-drive</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">iTerm2</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">slack</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">vagrant</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">virtualbox</span><span>
</span>
<span>    </span><span class="hljs-attr">tasks:</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">update</span><span> </span><span style="color:#a6e22e">homebrew</span><span>
</span><span>          </span><span class="hljs-attr">homebrew:</span><span> </span><span style="color:#a6e22e">update_homebrew=yes</span><span>
</span>
<span>        </span><span style="color:#75715e"># brew</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">install</span><span> </span><span style="color:#a6e22e">homebrew_packages</span><span>
</span><span>          </span><span class="hljs-attr">homebrew:</span><span>
</span><span>            </span><span style="color:#a6e22e">name={{</span><span> </span><span style="color:#a6e22e">item.name</span><span> </span><span style="color:#a6e22e">}}</span><span>
</span><span>          </span><span class="hljs-attr">with_items:</span><span> </span><span style="color:#a6e22e">&#x27;</span><span style="color:#a6e22e">{{ homebrew_packages }}</span><span style="color:#a6e22e">&#x27;</span><span>
</span>
<span>        </span><span style="color:#75715e"># homebrew_cask</span><span>
</span><span>        </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">install</span><span> </span><span style="color:#a6e22e">homebrew_cask_packages</span><span>
</span><span>          </span><span class="hljs-attr">homebrew_cask:</span><span>
</span><span>            </span><span style="color:#a6e22e">name={{</span><span> </span><span style="color:#a6e22e">item.name</span><span> </span><span style="color:#a6e22e">}}</span><span>
</span><span>          </span><span class="hljs-attr">with_items:</span><span> </span><span style="color:#a6e22e">&#x27;</span><span style="color:#a6e22e">{{ homebrew_cask_packages }}</span><span style="color:#a6e22e">&#x27;</span></code></pre></div></pre>
<p>実行。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> ansible-playbook -i hosts localhostsyml</span></code></pre></div></pre>
<p><a href="https://github.com/ritarock/dotfiles/tree/master/.macbook-provisioning">ソースコード</a></p></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20180409090000","title":"Ansible で MacBook を管理","body":"\nMacBook の環境を管理する。\n\n## 環境\n```bash\n# brew と brew cask は導入済み\n$ brew install ansible\n\n# 上記,コマンドを実行済み\n$ ansible --version\nansible 2.5.0\n```\n\n今回用意した 2 つのファイル。\n\n- hosts\n```hosts\nlocalhost\n```\n\n- localhost.yml\n```yaml\n---\n  - hosts: localhost\n    connection: local\n    gather_facts: no\n    become: no\n\n    vars:\n      homebrew_packages:\n        - name: fish\n        - name: git\n        - name: node\n        - name: pyenv\n        - name: python\n        - name: tree\n        - name: vim\n\n      homebrew_cask_packages:\n        - name: atom\n        - name: docker\n        - name: dropbox\n        - name: evernote\n        - name: google-chrome\n        - name: google-drive\n        - name: iTerm2\n        - name: slack\n        - name: vagrant\n        - name: virtualbox\n\n    tasks:\n        - name: update homebrew\n          homebrew: update_homebrew=yes\n\n        # brew\n        - name: install homebrew_packages\n          homebrew:\n            name={{ item.name }}\n          with_items: '{{ homebrew_packages }}'\n\n        # homebrew_cask\n        - name: install homebrew_cask_packages\n          homebrew_cask:\n            name={{ item.name }}\n          with_items: '{{ homebrew_cask_packages }}'\n```\n\n実行。\n```bash\n$ ansible-playbook -i hosts localhostsyml\n```\n\n[ソースコード](https://github.com/ritarock/dotfiles/tree/master/.macbook-provisioning)\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20180409090000"},"buildId":"DIZOSW1OSeZ6hCOIsCJQ0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>