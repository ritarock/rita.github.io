<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/47b31a99984783d5.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-720d97b6bc629885.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-c7082c319cc53ced.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-e3dbb5f8498dce62.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-4a08b92cc00737ec.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-92aea3426083640b.js" async=""></script><script src="/_next/static/chunks/app/docs/%5Bid%5D/page-a14447f626e33a06.js" async=""></script><title>MyDocs</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="__className_aaf875"><div><a style="text-decoration:none" href="/"><div style="color:black;font-size:22px;cusor:pointer">MyDocs</div></a></div><p></p><h1><b># <!-- -->docker-composeでRailsとMysqlを使う</b></h1><h2>ディレクトリ構成</h2>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span>./
</span>├── Dockerfile
<span>├── docker-compose</span><span class="hljs-selector-class">.yml</span><span>
</span>├── db_volume/
<!-- -->├── mysql-confd/
<span>│   └── default_authentication</span><span class="hljs-selector-class">.cnf</span><span>
</span><span>└── </span><span style="color:#bf79db">src</span><span>/
</span>    ├── Gemfile
<!-- -->    └── Gemfile.lock</code></pre></code></pre>
<h2>ファイルの説明</h2>
<h3>Dockerfile</h3>
<p>Rails のアプリ用の Dockerfile を定義する。
MySQL と連携するために mysql-client をインストールしている。</p>
<pre><code class="language-Dockerfile"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#f92672;font-weight:bold">FROM</span><span> ruby:latest
</span>
<span></span><span style="color:#a6e22e">RUN</span><span> apt-</span><span style="color:#a6e22e">get</span><span> update -qq &amp;&amp; \
</span><span>    apt-</span><span style="color:#a6e22e">get</span><span> install -y build-essential &amp;&amp; \
</span><span>    apt-</span><span style="color:#a6e22e">get</span><span> install -y libpq-dev &amp;&amp; \
</span><span>    apt-</span><span style="color:#a6e22e">get</span><span> install -y mysql-client &amp;&amp; \
</span><span>    apt-</span><span style="color:#a6e22e">get</span><span> install -y nodejs
</span>
<span></span><span style="color:#a6e22e">RUN</span><span> mkdir /myapp
</span>ENV APP_ROOT /myapp
<span>WORKDIR </span><span style="color:#a6e22e">$APP_ROOT</span><span>
</span><span></span><span style="color:#a6e22e">ADD</span><span> ./src/Gemfile </span><span style="color:#a6e22e">$APP_ROOT</span><span>/Gemfile
</span><span></span><span style="color:#a6e22e">ADD</span><span> ./src/Gemfile.lock </span><span style="color:#a6e22e">$APP_ROOT</span><span>/Gemfile.lock
</span>
<span></span><span style="color:#a6e22e">RUN</span><span> bundle install
</span><span></span><span style="color:#a6e22e">ADD</span><span> ./src/ </span><span style="color:#a6e22e">$APP_ROOT</span></code></pre></code></pre>
<h3>docker-compose</h3>
<p>MySQL のバージョンが 8 以上だと認証でエラーになるので設定ファイルをにマウントする。
また <code>./db_volume:/var/lib/mysql</code> で DB を永続化している。</p>
<p><a href="https://qiita.com/yensaki/items/9e453b7320ca2d0461c7">参考</a></p>
<pre><code class="language-yaml"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#bf79db">version:</span><span> </span><span style="color:#a6e22e">&#x27;3&#x27;</span><span>
</span><span></span><span style="color:#bf79db">services:</span><span>
</span><span></span><span style="color:#bf79db">  db:</span><span>
</span><span></span><span style="color:#bf79db">    image:</span><span> mysql:latest
</span><span></span><span style="color:#bf79db">    volumes:</span><span>
</span><span>      - ./mysql-confd:</span><span class="hljs-meta-keyword">/etc/</span><span>mysql/conf.d
</span><span>      - ./db_volume:</span><span class="hljs-meta-keyword">/var/</span><span>lib/mysql
</span><span></span><span style="color:#bf79db">    environment:</span><span>
</span><span></span><span style="color:#bf79db">      MYSQL_ROOT_PASSWORD:</span><span> root
</span><span></span><span style="color:#bf79db">      MYSQL_DATABASE:</span><span> root
</span><span></span><span style="color:#bf79db">    ports:</span><span>
</span><span>      - </span><span style="color:#a6e22e">&quot;3306:3306&quot;</span><span>
</span><span></span><span style="color:#bf79db">
</span><span style="color:#bf79db">  web:</span><span>
</span><span></span><span style="color:#bf79db">    build:</span><span> .
</span><span></span><span style="color:#bf79db">    command:</span><span> bundle exec rails s -p </span><span class="hljs-number">3000</span><span> -b </span><span style="color:#a6e22e">&#x27;0.0.0.0&#x27;</span><span>
</span><span></span><span style="color:#bf79db">    volumes:</span><span>
</span>      - ./src:/myapp
<span></span><span style="color:#bf79db">    ports:</span><span>
</span><span>      - </span><span style="color:#a6e22e">&quot;3000:3000&quot;</span><span>
</span><span></span><span style="color:#bf79db">    links:</span><span>
</span>      - db</code></pre></code></pre>
<h3>default_authentication.cnf</h3>
<p>認証用の設定ファイル。</p>
<pre><code class="language-default_authentication.cnf"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#a6e22e;font-weight:bold">[mysqld]</span><span>
</span><span></span><span class="hljs-attr">default_authentication_plugin</span><span>= mysql_native_password</span></code></pre></code></pre>
<h3>Gemfile</h3>
<pre><code class="language-Gemfile"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span>source </span><span style="color:#bf79db">&#x27;https://rubygems.org</span><span>&#x27;
</span><span>gem </span><span style="color:#bf79db">&#x27;rails</span><span>&#x27;, </span><span style="color:#bf79db">&#x27;5.1.6</span><span>&#x27;</span></code></pre></code></pre>
<p>Gemfile.lock も作成しておく ( 中身は空 ) 。</p>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span>$ touch .</span><span style="color:#bf79db">/src/</span><span>Gemfile.lock</span></code></pre></code></pre>
<h2>プロジェクトの構築</h2>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span>$ docker-compose </span><span style="color:#a6e22e">run</span><span> web rails new . --force </span><span style="color:#bf79db">--database</span><span>=mysql --skip-bundle</span></code></pre></code></pre>
<p><code>--skip-bundle</code> で gem のインストールを回避。
実行後 <code>./src</code> 配下に新しいアプリケーションが作成されている。</p>
<h2>データベースに接続</h2>
<p><code>./src/config/database.yml</code> の password と host を docker-compose で定義した内容に変更。</p>
<pre><code class="language-yaml"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#bf79db">default:</span><span> </span><span style="color:#a6e22e">&amp;default</span><span>
</span><span></span><span style="color:#bf79db">  adapter:</span><span> mysql2
</span><span></span><span style="color:#bf79db">  encoding:</span><span> utf8
</span><span></span><span style="color:#bf79db">  pool:</span><span> </span><span class="hljs-params">&lt;%= ENV.fetch(&quot;RAILS_MAX_THREADS&quot;) { </span><span class="hljs-params hljs-number">5</span><span class="hljs-params"> } %&gt;</span><span>
</span><span></span><span style="color:#bf79db">  username:</span><span> root
</span><span></span><span style="color:#bf79db">  password:</span><span> root
</span><span></span><span style="color:#bf79db">  host:</span><span> db</span></code></pre></code></pre>
<h2>dockerの起動</h2>
<p>ビルド。</p>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#a6e22e">$ </span><span>docker-compose build</span></code></pre></code></pre>
<p>起動。</p>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#a6e22e">$ </span><span>docker-compose up</span></code></pre></code></pre>
<h2>DBの作成</h2>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span>$ docker-compose </span><span style="color:#f92672;font-weight:bold">run</span><span> web rails db:</span><span style="color:#f92672;font-weight:bold">create</span></code></pre></code></pre>
<h2>確認</h2>
<p>ブラウザで localhost:3000 にアクセス。</p>
<p>Rails のコンテナにアクセスして DB との接続確認。</p>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span>$ docker exec -it コンテナID </span><span style="color:#bf79db">/bin/</span><span>bash</span></code></pre></code></pre>
<p>接続したコンテナから DB に接続。</p>
<pre><code class="language-bash"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code style="white-space:pre"><span style="color:#a6e22e">$ </span><span>rails dbconsole</span></code></pre></code></pre><script src="/_next/static/chunks/webpack-720d97b6bc629885.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/47b31a99984783d5.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\nb:I[8955,[],\"\"]\n8:[\"id\",\"20190829090000\",\"d\"]\nc:[]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/47b31a99984783d5.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"AKd5b8CAF0Ntz1BXd6Z1A\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/docs/20190829090000\",\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"id\",\"20190829090000\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"20190829090000\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"id\",\"20190829090000\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_aaf875\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]}],null]],\"initialHead\":[false,\"$La\"],\"globalErrorComponent\":\"$b\",\"missingSlots\":\"$Wc\"}]]\n"])</script><script>self.__next_f.push([1,"d:I[5250,[\"250\",\"static/chunks/250-92aea3426083640b.js\",\"314\",\"static/chunks/app/docs/%5Bid%5D/page-a14447f626e33a06.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"6:[[[\"$\",\"div\",null,{\"children\":[null,[\"$\",\"$Ld\",null,{\"href\":\"/\",\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"color\":\"black\",\"fontSize\":\"22px\",\"cusor\":\"pointer\"},\"children\":\"MyDocs\"}]}]]}],[\"$\",\"p\",null,{}]],[\"$\",\"h1\",null,{\"children\":[\"$\",\"b\",null,{\"children\":[\"# \",\"docker-composeでRailsとMysqlを使う\"]}]}],[[\"$\",\"h2\",\"h2-0\",{\"children\":\"ディレクトリ構成\"}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"./\\n\"]}],\"├── Dockerfile\\n\",[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"├── docker-compose\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"hljs-selector-class\",\"style\":{},\"children\":[\".yml\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"├── db_volume/\\n\",\"├── mysql-confd/\\n\",[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"│   └── default_authentication\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"hljs-selector-class\",\"style\":{},\"children\":[\".cnf\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"└── \"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"src\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"/\\n\"]}],\"    ├── Gemfile\\n\",\"    └── Gemfile.lock\"]]}]}]}]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"ファイルの説明\"}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"Dockerfile\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Rails のアプリ用の Dockerfile を定義する。\\nMySQL と連携するために mysql-client をインストールしている。\"}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-Dockerfile\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"FROM\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" ruby:latest\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"RUN\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" apt-\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"get\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" update -qq \u0026\u0026 \\\\\\n\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"    apt-\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"get\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" install -y build-essential \u0026\u0026 \\\\\\n\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"    apt-\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"get\"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" install -y libpq-dev \u0026\u0026 \\\\\\n\"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"    apt-\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"get\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" install -y mysql-client \u0026\u0026 \\\\\\n\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"    apt-\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"get\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" install -y nodejs\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement21\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"RUN\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" mkdir /myapp\\n\"]}],\"ENV APP_ROOT /myapp\\n\",[\"$\",\"span\",\"code-segement25\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"WORKDIR \"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$APP_ROOT\"]}],[\"$\",\"span\",\"code-segement27\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement28\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement29\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"ADD\"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" ./src/Gemfile \"]}],[\"$\",\"span\",\"code-segement31\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$APP_ROOT\"]}],[\"$\",\"span\",\"code-segement32\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"/Gemfile\\n\"]}],[\"$\",\"span\",\"code-segement33\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement34\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"ADD\"]}],[\"$\",\"span\",\"code-segement35\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" ./src/Gemfile.lock \"]}],[\"$\",\"span\",\"code-segement36\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$APP_ROOT\"]}],[\"$\",\"span\",\"code-segement37\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"/Gemfile.lock\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement39\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement40\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"RUN\"]}],[\"$\",\"span\",\"code-segement41\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" bundle install\\n\"]}],[\"$\",\"span\",\"code-segement42\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement43\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"ADD\"]}],[\"$\",\"span\",\"code-segement44\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" ./src/ \"]}],[\"$\",\"span\",\"code-segement45\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$APP_ROOT\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"docker-compose\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[\"MySQL のバージョンが 8 以上だと認証でエラーになるので設定ファイルをにマウントする。\\nまた \",[\"$\",\"code\",null,{\"children\":\"./db_volume:/var/lib/mysql\"}],\" で DB を永続化している。\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"https://qiita.com/yensaki/items/9e453b7320ca2d0461c7\",\"children\":\"参考\"}]}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-yaml\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"version:\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"'3'\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"services:\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  db:\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    image:\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" mysql:latest\\n\"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    volumes:\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"      - ./mysql-confd:\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"hljs-meta-keyword\",\"style\":{},\"children\":[\"/etc/\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mysql/conf.d\\n\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"      - ./db_volume:\"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"hljs-meta-keyword\",\"style\":{},\"children\":[\"/var/\"]}],[\"$\",\"span\",\"code-segement21\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"lib/mysql\\n\"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    environment:\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement25\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"      MYSQL_ROOT_PASSWORD:\"]}],[\"$\",\"span\",\"code-segement27\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" root\\n\"]}],[\"$\",\"span\",\"code-segement28\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement29\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"      MYSQL_DATABASE:\"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" root\\n\"]}],[\"$\",\"span\",\"code-segement31\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement32\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    ports:\"]}],[\"$\",\"span\",\"code-segement33\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement34\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"      - \"]}],[\"$\",\"span\",\"code-segement35\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"3306:3306\\\"\"]}],[\"$\",\"span\",\"code-segement36\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement37\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement38\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement39\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  web:\"]}],[\"$\",\"span\",\"code-segement40\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement41\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement42\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    build:\"]}],[\"$\",\"span\",\"code-segement43\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" .\\n\"]}],[\"$\",\"span\",\"code-segement44\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement45\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    command:\"]}],[\"$\",\"span\",\"code-segement46\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" bundle exec rails s -p \"]}],[\"$\",\"span\",\"code-segement47\",{\"className\":\"hljs-number\",\"style\":{},\"children\":[\"3000\"]}],[\"$\",\"span\",\"code-segement48\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" -b \"]}],[\"$\",\"span\",\"code-segement49\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"'0.0.0.0'\"]}],[\"$\",\"span\",\"code-segement50\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement51\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement52\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    volumes:\"]}],[\"$\",\"span\",\"code-segement53\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"      - ./src:/myapp\\n\",[\"$\",\"span\",\"code-segement55\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement56\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    ports:\"]}],[\"$\",\"span\",\"code-segement57\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement58\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"      - \"]}],[\"$\",\"span\",\"code-segement59\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"3000:3000\\\"\"]}],[\"$\",\"span\",\"code-segement60\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement61\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement62\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"    links:\"]}],[\"$\",\"span\",\"code-segement63\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"      - db\"]]}]}]}]}],\"\\n\",[\"$\",\"h3\",\"h3-2\",{\"children\":\"default_authentication.cnf\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"認証用の設定ファイル。\"}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-default_authentication.cnf\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"[mysqld]\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"hljs-attr\",\"style\":{},\"children\":[\"default_authentication_plugin\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"= mysql_native_password\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"h3\",\"h3-3\",{\"children\":\"Gemfile\"}],\"\\n\",[\"$\",\"pre\",\"pre-4\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-Gemfile\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"source \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"'https://rubygems.org\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"'\\n\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"gem \"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"'rails\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"', \"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"'5.1.6\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"'\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"Gemfile.lock も作成しておく ( 中身は空 ) 。\"}],\"\\n\",[\"$\",\"pre\",\"pre-5\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"$$ touch .\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"/src/\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"Gemfile.lock\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"プロジェクトの構築\"}],\"\\n\",[\"$\",\"pre\",\"pre-6\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"$$ docker-compose \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"run\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" web rails new . --force \"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"--database\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"=mysql --skip-bundle\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":[[\"$\",\"code\",null,{\"children\":\"--skip-bundle\"}],\" で gem のインストールを回避。\\n実行後 \",[\"$\",\"code\",null,{\"children\":\"./src\"}],\" 配下に新しいアプリケーションが作成されている。\"]}],\"\\n\",[\"$\",\"h2\",\"h2-3\",{\"children\":\"データベースに接続\"}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":[[\"$\",\"code\",null,{\"children\":\"./src/config/database.yml\"}],\" の password と host を docker-compose で定義した内容に変更。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-7\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-yaml\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"default:\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\u0026default\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  adapter:\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" mysql2\\n\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  encoding:\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" utf8\\n\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  pool:\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"hljs-params\",\"style\":{},\"children\":[\"\u003c%= ENV.fetch(\\\"RAILS_MAX_THREADS\\\") { \"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"hljs-params hljs-number\",\"style\":{},\"children\":[\"5\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"hljs-params\",\"style\":{},\"children\":[\" } %\u003e\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  username:\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" root\\n\"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement21\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  password:\"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" root\\n\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"  host:\"]}],[\"$\",\"span\",\"code-segement25\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" db\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"h2\",\"h2-4\",{\"children\":\"dockerの起動\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"ビルド。\"}],\"\\n\",[\"$\",\"pre\",\"pre-8\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$ \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"docker-compose build\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":\"起動。\"}],\"\\n\",[\"$\",\"pre\",\"pre-9\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$ \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"docker-compose up\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"h2\",\"h2-5\",{\"children\":\"DBの作成\"}],\"\\n\",[\"$\",\"pre\",\"pre-10\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"$$ docker-compose \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"run\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" web rails db:\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"create\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"h2\",\"h2-6\",{\"children\":\"確認\"}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":\"ブラウザで localhost:3000 にアクセス。\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":\"Rails のコンテナにアクセスして DB との接続確認。\"}],\"\\n\",[\"$\",\"pre\",\"pre-11\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"$$ docker exec -it コンテナID \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#bf79db\"},\"children\":[\"/bin/\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"bash\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":\"接続したコンテナから DB に接続。\"}],\"\\n\",[\"$\",\"pre\",\"pre-12\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"$undefined\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"$$ \"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"rails dbconsole\"]}]]]}]}]}]}]]]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"MyDocs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>