<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/0675b109fae35ba9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0675b109fae35ba9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-0f8b31729833af61.js" defer=""></script><script src="/_next/static/chunks/main-a89779f987984dde.js" defer=""></script><script src="/_next/static/chunks/pages/_app-eddec6d010f06c43.js" defer=""></script><script src="/_next/static/chunks/548-2da8f2137a34d623.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-3337e28c632a2e4a.js" defer=""></script><script src="/_next/static/GXoiw4l0rQd_zf7dqPS3j/_buildManifest.js" defer=""></script><script src="/_next/static/GXoiw4l0rQd_zf7dqPS3j/_ssgManifest.js" defer=""></script><script src="/_next/static/GXoiw4l0rQd_zf7dqPS3j/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->Go のテストを勉強する</b></h1><p>今まで VSCode の <code node="[object Object]">Generate Unit Tests For Function</code> で作成してなんとなくで書いてたけどちゃんと勉強した.</p>
<p><a href="https://github.com/andmorefine/learn-go-with-tests">https://github.com/andmorefine/learn-go-with-tests</a> を使って勉強した.日本語訳が微妙だったので英語版がよかった.</p>
<p>以下メモ.</p>
<ul>
<li><code node="[object Object]">t.Helper()</code> を使えば失敗した行が関数呼び出し側になる</li>
<li>Benchmark 実行には <code node="[object Object]">go test -bench=.</code> を実行する</li>
<li>カバレッジを確認するには <code node="[object Object]">go test -cover</code> を実行する</li>
<li>スライスの test は <code node="[object Object]">reflect.DeepEqual</code> を使って変数を比較する. ただ <code node="[object Object]">reflect.DeepEqual</code> は型安全ではないので注意</li>
<li>マップは nil に書き込もうとするとランタイムパニックになるので初期化に気をつける<!-- -->
<ul>
<li>NG: <code node="[object Object]">var m map[string]string</code></li>
<li>OK: <code node="[object Object]">var dictonary = map[string]string{}</code> もしくは <code node="[object Object]">var dictonary = make(map[string]string)</code></li>
</ul>
</li>
<li>標準ライブラリに <code node="[object Object]">net/http/httptest</code> があってこれで模擬 HTTP サーバを作れる</li>
<li>&#x27;入力 X のとき出力 Y を期待する&#x27; というテストを作るときはテーブルベースのテストを使う</li>
</ul></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20211112233257","title":"Go のテストを勉強する","content":"\n今まで VSCode の `Generate Unit Tests For Function` で作成してなんとなくで書いてたけどちゃんと勉強した.\n\nhttps://github.com/andmorefine/learn-go-with-tests を使って勉強した.日本語訳が微妙だったので英語版がよかった.\n\n以下メモ.\n- `t.Helper()` を使えば失敗した行が関数呼び出し側になる\n- Benchmark 実行には `go test -bench=.` を実行する\n- カバレッジを確認するには `go test -cover` を実行する\n- スライスの test は `reflect.DeepEqual` を使って変数を比較する. ただ `reflect.DeepEqual` は型安全ではないので注意\n- マップは nil に書き込もうとするとランタイムパニックになるので初期化に気をつける\n  - NG: `var m map[string]string`\n  - OK: `var dictonary = map[string]string{}` もしくは `var dictonary = make(map[string]string)`\n- 標準ライブラリに `net/http/httptest` があってこれで模擬 HTTP サーバを作れる\n- '入力 X のとき出力 Y を期待する' というテストを作るときはテーブルベースのテストを使う\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20211112233257"},"buildId":"GXoiw4l0rQd_zf7dqPS3j","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>