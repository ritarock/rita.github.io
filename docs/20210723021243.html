<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/45686ffcb70a597f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-0954c5d36ad957a9.js"/><script src="/_next/static/chunks/fd9d1056-7d9b70e9456442b8.js" async=""></script><script src="/_next/static/chunks/117-9e8e11acbc02133b.js" async=""></script><script src="/_next/static/chunks/main-app-e458bfafba31dafd.js" async=""></script><script src="/_next/static/chunks/972-7c12054a4e525885.js" async=""></script><script src="/_next/static/chunks/app/docs/%5Bid%5D/page-8f3672b7de158179.js" async=""></script><title>MyDocs</title><meta name="description" content="Generated by create next app"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_36bd41"><div><a style="text-decoration:none" href="/"><div style="color:black;font-size:22px;cusor:pointer">MyDocs</div></a></div><p></p><h1><b># <!-- -->Golangのhttp/netについて調べた</b></h1><h2>サーバ</h2>
<p>何もしないサーバを起動。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> </span><span style="color:#a6e22e">&quot;net/http&quot;</span><span>
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	http.ListenAndServe(</span><span style="color:#a6e22e">&quot;&quot;</span><span>, </span><span style="color:#f92672;font-weight:bold">nil</span><span>)
</span>}</code></pre></code></pre>
<p><code>ListenAndServe</code> はネットワークアドレスとハンドラを引数で受け取る。ハンドラが nil の場合は <code>DefaultServerMux</code> が使われる。</p>
<p>Server の構造体はこんな感じ。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> Server </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Addr </span><span style="color:#f92672;font-weight:bold">string</span><span>
</span>	Handler Handler
<!-- -->	TLSConfig *tls.Config
<!-- -->	ReadTimeout time.Duration
<!-- -->	ReadHeaderTimeout time.Duration
<!-- -->	WriteTimeout time.Duration
<!-- -->	IdleTimeout time.Duration
<span>	MaxHeaderBytes </span><span style="color:#f92672;font-weight:bold">int</span><span>
</span><span>	TLSNextProto </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(*Server, *tls.Conn, Handler)</span><span>
</span><span>	ConnState </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(net.Conn, ConnState)</span><span>
</span>	ErrorLog *log.Logger
<span>	BaseContext </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(net.Listener)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">context</span><span class="hljs-function">.</span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Context</span><span>
</span><span>	ConnContext </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(ctx context.Context, c net.Conn)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">context</span><span class="hljs-function">.</span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Context</span><span>
</span>	inShutdown atomicBool
<span>	disableKeepAlives </span><span style="color:#f92672;font-weight:bold">int32</span><span>
</span>	nextProtoOnce     sync.Once
<!-- -->	nextProtoErr      error
<!-- -->	mu         sync.Mutex
<span>	listeners  </span><span style="color:#f92672;font-weight:bold">map</span><span>[*net.Listener]</span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span><span>	activeConn </span><span style="color:#f92672;font-weight:bold">map</span><span>[*conn]</span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span><span>	doneChan   </span><span style="color:#f92672;font-weight:bold">chan</span><span> </span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span><span>	onShutdown []</span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">()</span><span>
</span>}</code></pre></code></pre>
<p>設定を変更する場合は Server の構造体に値を指定する。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span>	server := http.Server{
<span>		Addr:    </span><span style="color:#a6e22e">&quot;0.0.0.0:8080&quot;</span><span>,
</span><span>		Handler: </span><span style="color:#f92672;font-weight:bold">nil</span><span>,
</span>	}
<!-- -->	server.ListenAndServe()</code></pre></code></pre>
<h3>ハンドラとハンドラ関数</h3>
<p>ハンドラがない場合すべてのリクエストで 404 を返す。</p>
<p>ハンドラとは、 <code>ServerHTTP メソッド</code> を持ったインターフェースのことを指す。
このメソッドは、 <code>インターフェース HTTPResponseWriter</code> と <code>構造体 Request のポインタ</code> の 2 つの引数を取る。
つまり、 <code>ServerHTTP(http.ResponseWriter, *http.Request)</code> をもつインターフェースがハンドラになる。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> HelloHandler </span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(h *HelloHandler)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">ServeHTTP</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;hello&quot;</span><span>)
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	helloHandler := </span><span style="color:#a6e22e">new</span><span>(HelloHandler)
</span>	server := http.Server{
<span>		Addr:    </span><span style="color:#a6e22e">&quot;0.0.0.0:8080&quot;</span><span>,
</span>		Handler: helloHandler,
<!-- -->	}
<!-- -->	server.ListenAndServe()
<!-- -->}</code></pre></code></pre>
<p>この状態だと、すべてのアクセスが 1 つのハンドラに行く。</p>
<p>実際は URL ごとに異なるハンドラで処理する必要があるため Handler フィールドに値を指定しない ( デフォルトで DefaultServerMux を使う ) 。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> HelloHandler </span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span><span></span><span style="color:#f92672;font-weight:bold">type</span><span> WorldHandler </span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(h *HelloHandler)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">ServeHTTP</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;hello&quot;</span><span>)
</span>}
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(w *WorldHandler)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">ServeHTTP</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;world&quot;</span><span>)
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	helloHandler := </span><span style="color:#a6e22e">new</span><span>(HelloHandler)
</span><span>	worldHandler := </span><span style="color:#a6e22e">new</span><span>(WorldHandler)
</span>	server := http.Server{
<span>		Addr: </span><span style="color:#a6e22e">&quot;0.0.0.0:8080&quot;</span><span>,
</span>	}
<span>	http.Handle(</span><span style="color:#a6e22e">&quot;/hello&quot;</span><span>, helloHandler)
</span><span>	http.Handle(</span><span style="color:#a6e22e">&quot;/world&quot;</span><span>, worldHandler)
</span>	server.ListenAndServe()
<!-- -->}</code></pre></code></pre>
<p><code>http.Handle</code> は実際には DefaultServeMux の Handle メソッドを呼び出している。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Handle</span><span class="hljs-function hljs-params">(pattern </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">string</span><span class="hljs-function hljs-params">, handler Handler)</span><span> { DefaultServeMux.Handle(pattern, handler) }</span></code></pre></code></pre>
<p>ハンドラとは、 <code>ServerHTTP(http.ResponseWriter, *http.Request)</code> をもつインターフェースのこと。
ハンドラ関数とは、ハンドラのように振る舞う関数。リクエストのポインタを受け取ることができる。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> (
</span><span>	</span><span style="color:#a6e22e">&quot;fmt&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;net/http&quot;</span><span>
</span>)
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> HelloHandler </span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span><span></span><span style="color:#f92672;font-weight:bold">type</span><span> WorldHandler </span><span style="color:#f92672;font-weight:bold">struct</span><span>{}
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(h *HelloHandler)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">ServeHTTP</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;hello&quot;</span><span>)
</span>}
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(w *WorldHandler)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">ServeHTTP</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;world&quot;</span><span>)
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">hello</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;hello&quot;</span><span>)
</span>}
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">world</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	fmt.Fprintf(writer, </span><span style="color:#a6e22e">&quot;world&quot;</span><span>)
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	helloHandler := </span><span style="color:#a6e22e">new</span><span>(HelloHandler)
</span><span>	worldHandler := </span><span style="color:#a6e22e">new</span><span>(WorldHandler)
</span>	server := http.Server{
<span>		Addr: </span><span style="color:#a6e22e">&quot;0.0.0.0:8080&quot;</span><span>,
</span>	}
<span>	http.Handle(</span><span style="color:#a6e22e">&quot;/hello&quot;</span><span>, helloHandler)
</span><span>	http.Handle(</span><span style="color:#a6e22e">&quot;/world&quot;</span><span>, worldHandler)
</span><span>	http.HandleFunc(</span><span style="color:#a6e22e">&quot;/hello2&quot;</span><span>, hello)
</span><span>	http.HandleFunc(</span><span style="color:#a6e22e">&quot;/world2&quot;</span><span>, world)
</span>	server.ListenAndServe()
<!-- -->}</code></pre></code></pre>
<h3>何が違うのか</h3>
<p>やってることは <code>DefaultServeMux.Handle(pattern, handler)</code> なので同じ。
既存のインターフェースがある場合は、 <code>ServeHTTP</code> メソッドを追加するだけでハンドラになるからそういった場合は、 <code>http.Handle</code> のほうが手軽。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Handle</span><span class="hljs-function hljs-params">(pattern </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">string</span><span class="hljs-function hljs-params">, handler Handler)</span><span> { DefaultServeMux.Handle(pattern, handler) }
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">HandleFunc</span><span class="hljs-function hljs-params">(pattern </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">string</span><span class="hljs-function hljs-params">, handler </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(ResponseWriter, *Request)</span><span class="hljs-function">)</span><span> {
</span>	DefaultServeMux.HandleFunc(pattern, handler)
<!-- -->}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(mux *ServeMux)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">HandleFunc</span><span class="hljs-function hljs-params">(pattern </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">string</span><span class="hljs-function hljs-params">, handler </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(ResponseWriter, *Request)</span><span class="hljs-function">)</span><span> {
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> handler == </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#a6e22e">panic</span><span>(</span><span style="color:#a6e22e">&quot;http: nil handler&quot;</span><span>)
</span>	}
<!-- -->	mux.Handle(pattern, HandlerFunc(handler))
<!-- -->}</code></pre></code></pre>
<h2>サードパーティー製のマルチプレクサ</h2>
<p>標準でも特に辛くない。 <code>request.Method</code> でメソッドも取得できるのでかなり使い勝手もいい。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/create&quot;</span><span>, createUsers)
</span><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/read/&quot;</span><span>, readUsers)
</span><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/update/&quot;</span><span>, updateUsers)
</span><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/delete/&quot;</span><span>, deleteUsers)
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">readerUsers</span><span class="hljs-function hljs-params">(writer http.ResponseWriter, request *http.Request)</span><span> {
</span><span>	sub := strings.TrimPrefix(request.URL.Path, </span><span style="color:#a6e22e">&quot;/users/read/&quot;</span><span>)
</span><span>	userId, err := strconv.Atoi(sub) </span><span style="color:#75715e">// これで /users/read/:id の id を取得できる</span><span>
</span>}</code></pre></code></pre>
<p>下記のような、 <code>/users/:user_id/tasks/:task_id</code> みたいに解析を結構頑張らないといけない場合は結構辛い。</p>
<pre><code class="language-go"><pre style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/2/tasks/create&quot;</span><span>, createUsers)
</span><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/2/tasks/read/&quot;</span><span>, readUsers)
</span><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/2/tasks/update/&quot;</span><span>, updateUsers)
</span><span>mux.HandleFunc(</span><span style="color:#a6e22e">&quot;/users/2/tasks/delete/&quot;</span><span>, deleteUsers)</span></code></pre></code></pre>
<p>この辺が良さそう。</p>
<ul>
<li><a href="https://github.com/gorilla/mux">https://github.com/gorilla/mux</a></li>
<li><a href="https://github.com/julienschmidt/httprouter">https://github.com/julienschmidt/httprouter</a></li>
</ul><script src="/_next/static/chunks/webpack-0954c5d36ad957a9.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/45686ffcb70a597f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"3:I[2846,[],\"\"]\n6:I[4707,[],\"\"]\n8:I[6423,[],\"\"]\na:I[1060,[],\"\"]\n7:[\"id\",\"20210723021243\",\"d\"]\nb:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L3\",null,{\"buildId\":\"DbSjnD7TkIFiSbRUpl1am\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"docs\",\"20210723021243\"],\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"id\",\"20210723021243\",\"d\"],{\"children\":[\"__PAGE__?{\\\"id\\\":\\\"20210723021243\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"id\",\"20210723021243\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L4\",\"$L5\",null],null],null]},[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$7\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/45686ffcb70a597f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_36bd41\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L9\"],\"globalErrorComponent\":\"$a\",\"missingSlots\":\"$Wb\"}]\n"])</script><script>self.__next_f.push([1,"c:I[2972,[\"972\",\"static/chunks/972-7c12054a4e525885.js\",\"314\",\"static/chunks/app/docs/%5Bid%5D/page-8f3672b7de158179.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"div\",null,{\"children\":[null,[\"$\",\"$Lc\",null,{\"href\":\"/\",\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"color\":\"black\",\"fontSize\":\"22px\",\"cusor\":\"pointer\"},\"children\":\"MyDocs\"}]}]]}],[\"$\",\"p\",null,{}]],[\"$\",\"h1\",null,{\"children\":[\"$\",\"b\",null,{\"children\":[\"# \",\"Golangのhttp/netについて調べた\"]}]}],[[\"$\",\"h2\",\"h2-0\",{\"children\":\"サーバ\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"何もしないサーバを起動。\"}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"package\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" main\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"import\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"net/http\\\"\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"main\"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"()\"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.ListenAndServe(\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"\\\"\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", \"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"nil\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":[[\"$\",\"code\",null,{\"children\":\"ListenAndServe\"}],\" はネットワークアドレスとハンドラを引数で受け取る。ハンドラが nil の場合は \",[\"$\",\"code\",null,{\"children\":\"DefaultServerMux\"}],\" が使われる。\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Server の構造体はこんな感じ。\"}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" Server \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tAddr \"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"\\tHandler Handler\\n\",\"\\tTLSConfig *tls.Config\\n\",\"\\tReadTimeout time.Duration\\n\",\"\\tReadHeaderTimeout time.Duration\\n\",\"\\tWriteTimeout time.Duration\\n\",\"\\tIdleTimeout time.Duration\\n\",[\"$\",\"span\",\"code-segement13\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tMaxHeaderBytes \"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"int\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tTLSNextProto \"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"[\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"]\"]}],[\"$\",\"span\",\"code-segement21\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(*Server, *tls.Conn, Handler)\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tConnState \"]}],[\"$\",\"span\",\"code-segement25\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(net.Conn, ConnState)\"]}],[\"$\",\"span\",\"code-segement27\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"\\tErrorLog *log.Logger\\n\",[\"$\",\"span\",\"code-segement29\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tBaseContext \"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement31\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(net.Listener)\"]}],[\"$\",\"span\",\"code-segement32\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement33\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"context\"]}],[\"$\",\"span\",\"code-segement34\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\".\"]}],[\"$\",\"span\",\"code-segement35\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"Context\"]}],[\"$\",\"span\",\"code-segement36\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement37\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tConnContext \"]}],[\"$\",\"span\",\"code-segement38\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement39\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(ctx context.Context, c net.Conn)\"]}],[\"$\",\"span\",\"code-segement40\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement41\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"context\"]}],[\"$\",\"span\",\"code-segement42\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\".\"]}],[\"$\",\"span\",\"code-segement43\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"Context\"]}],[\"$\",\"span\",\"code-segement44\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"\\tinShutdown atomicBool\\n\",[\"$\",\"span\",\"code-segement46\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tdisableKeepAlives \"]}],[\"$\",\"span\",\"code-segement47\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"int32\"]}],[\"$\",\"span\",\"code-segement48\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"\\tnextProtoOnce     sync.Once\\n\",\"\\tnextProtoErr      error\\n\",\"\\tmu         sync.Mutex\\n\",[\"$\",\"span\",\"code-segement52\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tlisteners  \"]}],[\"$\",\"span\",\"code-segement53\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"code-segement54\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"[*net.Listener]\"]}],[\"$\",\"span\",\"code-segement55\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement56\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],[\"$\",\"span\",\"code-segement57\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tactiveConn \"]}],[\"$\",\"span\",\"code-segement58\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"map\"]}],[\"$\",\"span\",\"code-segement59\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"[*conn]\"]}],[\"$\",\"span\",\"code-segement60\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement61\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],[\"$\",\"span\",\"code-segement62\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tdoneChan   \"]}],[\"$\",\"span\",\"code-segement63\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"chan\"]}],[\"$\",\"span\",\"code-segement64\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement65\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement66\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],[\"$\",\"span\",\"code-segement67\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tonShutdown []\"]}],[\"$\",\"span\",\"code-segement68\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement69\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"()\"]}],[\"$\",\"span\",\"code-segement70\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"設定を変更する場合は Server の構造体に値を指定する。\"}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"main\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"()\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],\"\\tserver := http.Server{\\n\",[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\\tAddr:    \"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"0.0.0.0:8080\\\"\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\",\\n\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\\tHandler: \"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"nil\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\",\\n\"]}],\"\\t}\\n\",\"\\tserver.ListenAndServe()\"]]}]}]}]}],\"\\n\",[\"$\",\"h3\",\"h3-0\",{\"children\":\"ハンドラとハンドラ関数\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"ハンドラがない場合すべてのリクエストで 404 を返す。\"}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":[\"ハンドラとは、 \",[\"$\",\"code\",null,{\"children\":\"ServerHTTP メソッド\"}],\" を持ったインターフェースのことを指す。\\nこのメソッドは、 \",[\"$\",\"code\",null,{\"children\":\"インターフェース HTTPResponseWriter\"}],\" と \",[\"$\",\"code\",null,{\"children\":\"構造体 Request のポインタ\"}],\" の 2 つの引数を取る。\\nつまり、 \",[\"$\",\"code\",null,{\"children\":\"ServerHTTP(http.ResponseWriter, *http.Request)\"}],\" をもつインターフェースがハンドラになる。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" HelloHandler \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(h *HelloHandler)\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"ServeHTTP\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"hello\\\"\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",\"\\n\",[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement21\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"main\"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"()\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thelloHandler := \"]}],[\"$\",\"span\",\"code-segement25\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"new\"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"(HelloHandler)\\n\"]}],\"\\tserver := http.Server{\\n\",[\"$\",\"span\",\"code-segement28\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\\tAddr:    \"]}],[\"$\",\"span\",\"code-segement29\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"0.0.0.0:8080\\\"\"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\",\\n\"]}],\"\\t\\tHandler: helloHandler,\\n\",\"\\t}\\n\",\"\\tserver.ListenAndServe()\\n\",\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\"この状態だと、すべてのアクセスが 1 つのハンドラに行く。\"}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"実際は URL ごとに異なるハンドラで処理する必要があるため Handler フィールドに値を指定しない ( デフォルトで DefaultServerMux を使う ) 。\"}],\"\\n\",[\"$\",\"pre\",\"pre-4\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" HelloHandler \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" WorldHandler \"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(h *HelloHandler)\"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"ServeHTTP\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"hello\\\"\"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement25\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(w *WorldHandler)\"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement27\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"ServeHTTP\"]}],[\"$\",\"span\",\"code-segement28\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement29\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement31\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"world\\\"\"]}],[\"$\",\"span\",\"code-segement32\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",\"\\n\",[\"$\",\"span\",\"code-segement35\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement36\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement37\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement38\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"main\"]}],[\"$\",\"span\",\"code-segement39\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"()\"]}],[\"$\",\"span\",\"code-segement40\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement41\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thelloHandler := \"]}],[\"$\",\"span\",\"code-segement42\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"new\"]}],[\"$\",\"span\",\"code-segement43\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"(HelloHandler)\\n\"]}],[\"$\",\"span\",\"code-segement44\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tworldHandler := \"]}],[\"$\",\"span\",\"code-segement45\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"new\"]}],[\"$\",\"span\",\"code-segement46\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"(WorldHandler)\\n\"]}],\"\\tserver := http.Server{\\n\",[\"$\",\"span\",\"code-segement48\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\\tAddr: \"]}],[\"$\",\"span\",\"code-segement49\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"0.0.0.0:8080\\\"\"]}],[\"$\",\"span\",\"code-segement50\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\",\\n\"]}],\"\\t}\\n\",[\"$\",\"span\",\"code-segement52\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.Handle(\"]}],[\"$\",\"span\",\"code-segement53\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/hello\\\"\"]}],[\"$\",\"span\",\"code-segement54\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", helloHandler)\\n\"]}],[\"$\",\"span\",\"code-segement55\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.Handle(\"]}],[\"$\",\"span\",\"code-segement56\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/world\\\"\"]}],[\"$\",\"span\",\"code-segement57\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", worldHandler)\\n\"]}],\"\\tserver.ListenAndServe()\\n\",\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"children\":[[\"$\",\"code\",null,{\"children\":\"http.Handle\"}],\" は実際には DefaultServeMux の Handle メソッドを呼び出している。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-5\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"Handle\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(pattern \"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"hljs-function hljs-params\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\", handler Handler)\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" { DefaultServeMux.Handle(pattern, handler) }\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"children\":[\"ハンドラとは、 \",[\"$\",\"code\",null,{\"children\":\"ServerHTTP(http.ResponseWriter, *http.Request)\"}],\" をもつインターフェースのこと。\\nハンドラ関数とは、ハンドラのように振る舞う関数。リクエストのポインタを受け取ることができる。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-6\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"package\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" main\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"import\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" (\\n\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"fmt\\\"\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"net/http\\\"\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\")\\n\",\"\\n\",[\"$\",\"span\",\"code-segement14\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" HelloHandler \"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"type\"]}],[\"$\",\"span\",\"code-segement21\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" WorldHandler \"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"struct\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"{}\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement25\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement27\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement28\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(h *HelloHandler)\"]}],[\"$\",\"span\",\"code-segement29\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"ServeHTTP\"]}],[\"$\",\"span\",\"code-segement31\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement32\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement33\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement34\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"hello\\\"\"]}],[\"$\",\"span\",\"code-segement35\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",[\"$\",\"span\",\"code-segement37\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement38\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement39\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement40\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(w *WorldHandler)\"]}],[\"$\",\"span\",\"code-segement41\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement42\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"ServeHTTP\"]}],[\"$\",\"span\",\"code-segement43\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement44\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement45\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement46\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"world\\\"\"]}],[\"$\",\"span\",\"code-segement47\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",\"\\n\",[\"$\",\"span\",\"code-segement50\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement51\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement52\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement53\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"hello\"]}],[\"$\",\"span\",\"code-segement54\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement55\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement56\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement57\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"hello\\\"\"]}],[\"$\",\"span\",\"code-segement58\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",[\"$\",\"span\",\"code-segement60\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement61\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement62\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement63\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"world\"]}],[\"$\",\"span\",\"code-segement64\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement65\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement66\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tfmt.Fprintf(writer, \"]}],[\"$\",\"span\",\"code-segement67\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"world\\\"\"]}],[\"$\",\"span\",\"code-segement68\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"}\\n\",\"\\n\",[\"$\",\"span\",\"code-segement71\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement72\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement73\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement74\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"main\"]}],[\"$\",\"span\",\"code-segement75\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"()\"]}],[\"$\",\"span\",\"code-segement76\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement77\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thelloHandler := \"]}],[\"$\",\"span\",\"code-segement78\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"new\"]}],[\"$\",\"span\",\"code-segement79\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"(HelloHandler)\\n\"]}],[\"$\",\"span\",\"code-segement80\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tworldHandler := \"]}],[\"$\",\"span\",\"code-segement81\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"new\"]}],[\"$\",\"span\",\"code-segement82\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"(WorldHandler)\\n\"]}],\"\\tserver := http.Server{\\n\",[\"$\",\"span\",\"code-segement84\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\\tAddr: \"]}],[\"$\",\"span\",\"code-segement85\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"0.0.0.0:8080\\\"\"]}],[\"$\",\"span\",\"code-segement86\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\",\\n\"]}],\"\\t}\\n\",[\"$\",\"span\",\"code-segement88\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.Handle(\"]}],[\"$\",\"span\",\"code-segement89\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/hello\\\"\"]}],[\"$\",\"span\",\"code-segement90\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", helloHandler)\\n\"]}],[\"$\",\"span\",\"code-segement91\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.Handle(\"]}],[\"$\",\"span\",\"code-segement92\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/world\\\"\"]}],[\"$\",\"span\",\"code-segement93\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", worldHandler)\\n\"]}],[\"$\",\"span\",\"code-segement94\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement95\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/hello2\\\"\"]}],[\"$\",\"span\",\"code-segement96\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", hello)\\n\"]}],[\"$\",\"span\",\"code-segement97\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\thttp.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement98\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/world2\\\"\"]}],[\"$\",\"span\",\"code-segement99\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", world)\\n\"]}],\"\\tserver.ListenAndServe()\\n\",\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"h3\",\"h3-1\",{\"children\":\"何が違うのか\"}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"children\":[\"やってることは \",[\"$\",\"code\",null,{\"children\":\"DefaultServeMux.Handle(pattern, handler)\"}],\" なので同じ。\\n既存のインターフェースがある場合は、 \",[\"$\",\"code\",null,{\"children\":\"ServeHTTP\"}],\" メソッドを追加するだけでハンドラになるからそういった場合は、 \",[\"$\",\"code\",null,{\"children\":\"http.Handle\"}],\" のほうが手軽。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-7\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"Handle\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(pattern \"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"hljs-function hljs-params\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\", handler Handler)\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" { DefaultServeMux.Handle(pattern, handler) }\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"HandleFunc\"]}],[\"$\",\"span\",\"code-segement12\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(pattern \"]}],[\"$\",\"span\",\"code-segement13\",{\"className\":\"hljs-function hljs-params\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\", handler \"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"hljs-function hljs-params\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(ResponseWriter, *Request)\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\")\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],\"\\tDefaultServeMux.HandleFunc(pattern, handler)\\n\",\"}\\n\",\"\\n\",[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement25\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(mux *ServeMux)\"]}],[\"$\",\"span\",\"code-segement26\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement27\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"HandleFunc\"]}],[\"$\",\"span\",\"code-segement28\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(pattern \"]}],[\"$\",\"span\",\"code-segement29\",{\"className\":\"hljs-function hljs-params\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"string\"]}],[\"$\",\"span\",\"code-segement30\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\", handler \"]}],[\"$\",\"span\",\"code-segement31\",{\"className\":\"hljs-function hljs-params\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement32\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(ResponseWriter, *Request)\"]}],[\"$\",\"span\",\"code-segement33\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\")\"]}],[\"$\",\"span\",\"code-segement34\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement35\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\"]}],[\"$\",\"span\",\"code-segement36\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"if\"]}],[\"$\",\"span\",\"code-segement37\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" handler == \"]}],[\"$\",\"span\",\"code-segement38\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"nil\"]}],[\"$\",\"span\",\"code-segement39\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement40\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\t\\t\"]}],[\"$\",\"span\",\"code-segement41\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"panic\"]}],[\"$\",\"span\",\"code-segement42\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"(\"]}],[\"$\",\"span\",\"code-segement43\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"http: nil handler\\\"\"]}],[\"$\",\"span\",\"code-segement44\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],\"\\t}\\n\",\"\\tmux.Handle(pattern, HandlerFunc(handler))\\n\",\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"サードパーティー製のマルチプレクサ\"}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"children\":[\"標準でも特に辛くない。 \",[\"$\",\"code\",null,{\"children\":\"request.Method\"}],\" でメソッドも取得できるのでかなり使い勝手もいい。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-8\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/create\\\"\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", createUsers)\\n\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/read/\\\"\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", readUsers)\\n\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/update/\\\"\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", updateUsers)\\n\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/delete/\\\"\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", deleteUsers)\\n\"]}],\"\\n\",[\"$\",\"span\",\"code-segement13\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\"]}],[\"$\",\"span\",\"code-segement14\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#f92672\",\"fontWeight\":\"bold\"},\"children\":[\"func\"]}],[\"$\",\"span\",\"code-segement15\",{\"className\":\"hljs-function\",\"style\":{},\"children\":[\" \"]}],[\"$\",\"span\",\"code-segement16\",{\"className\":\"hljs-function\",\"style\":{\"color\":\"#a6e22e\",\"fontWeight\":\"bold\"},\"children\":[\"readerUsers\"]}],[\"$\",\"span\",\"code-segement17\",{\"className\":\"hljs-function hljs-params\",\"style\":{},\"children\":[\"(writer http.ResponseWriter, request *http.Request)\"]}],[\"$\",\"span\",\"code-segement18\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\" {\\n\"]}],[\"$\",\"span\",\"code-segement19\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tsub := strings.TrimPrefix(request.URL.Path, \"]}],[\"$\",\"span\",\"code-segement20\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/read/\\\"\"]}],[\"$\",\"span\",\"code-segement21\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\")\\n\"]}],[\"$\",\"span\",\"code-segement22\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\tuserId, err := strconv.Atoi(sub) \"]}],[\"$\",\"span\",\"code-segement23\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#75715e\"},\"children\":[\"// これで /users/read/:id の id を取得できる\"]}],[\"$\",\"span\",\"code-segement24\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"\\n\"]}],\"}\"]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"children\":[\"下記のような、 \",[\"$\",\"code\",null,{\"children\":\"/users/:user_id/tasks/:task_id\"}],\" みたいに解析を結構頑張らないといけない場合は結構辛い。\"]}],\"\\n\",[\"$\",\"pre\",\"pre-9\",{\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"children\":[\"$\",\"pre\",null,{\"style\":{\"display\":\"block\",\"overflowX\":\"auto\",\"padding\":\"0.5em\",\"background\":\"#272822\",\"color\":\"#ddd\"},\"children\":[\"$\",\"code\",null,{\"className\":\"language-go\",\"style\":{\"whiteSpace\":\"pre\"},\"children\":[false,[[\"$\",\"span\",\"code-segement0\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement1\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/2/tasks/create\\\"\"]}],[\"$\",\"span\",\"code-segement2\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", createUsers)\\n\"]}],[\"$\",\"span\",\"code-segement3\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement4\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/2/tasks/read/\\\"\"]}],[\"$\",\"span\",\"code-segement5\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", readUsers)\\n\"]}],[\"$\",\"span\",\"code-segement6\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement7\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/2/tasks/update/\\\"\"]}],[\"$\",\"span\",\"code-segement8\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", updateUsers)\\n\"]}],[\"$\",\"span\",\"code-segement9\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\"mux.HandleFunc(\"]}],[\"$\",\"span\",\"code-segement10\",{\"className\":\"$undefined\",\"style\":{\"color\":\"#a6e22e\"},\"children\":[\"\\\"/users/2/tasks/delete/\\\"\"]}],[\"$\",\"span\",\"code-segement11\",{\"className\":\"$undefined\",\"style\":{},\"children\":[\", deleteUsers)\"]}]]]}]}]}]}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"children\":\"この辺が良さそう。\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/gorilla/mux\",\"children\":\"https://github.com/gorilla/mux\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"a\",\"a-0\",{\"href\":\"https://github.com/julienschmidt/httprouter\",\"children\":\"https://github.com/julienschmidt/httprouter\"}]}],\"\\n\"]}]]]\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"MyDocs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Generated by create next app\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n4:null\n"])</script></body></html>