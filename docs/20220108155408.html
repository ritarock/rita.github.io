<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/e44854d771c00df0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e44854d771c00df0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-d98b4a7f39fdfc80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-327d6f89185e0007.js" defer=""></script><script src="/_next/static/chunks/594-14c965e1fcce40c6.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-5449b7016e4923d1.js" defer=""></script><script src="/_next/static/U6R7CMMdXPU1CTPoaVNEN/_buildManifest.js" defer=""></script><script src="/_next/static/U6R7CMMdXPU1CTPoaVNEN/_ssgManifest.js" defer=""></script><script src="/_next/static/U6R7CMMdXPU1CTPoaVNEN/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->ent と echo で API 作る</b></h1><h2>ent</h2>
<h3>インストール</h3>
<p>ent と DB の client をインストールする。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ go get -d entgo.io/ent/cmd/ent
</span>$ go get github.com/mattn/go-sqlite3
</code></div><p class="h-2"></p></pre>
<h3>スキーマの作成</h3>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ go run entgo.io/ent/cmd/ent init Todo</span></code></div><p class="h-2"></p></pre>
<p><code node="[object Object]">ent/schema/todo.go</code> を編集する。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#75715e">// Fields of the Todo.</span><span>
</span><span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function hljs-params">(Todo)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Fields</span><span class="hljs-function hljs-params">()</span><span class="hljs-function"> []</span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">ent</span><span class="hljs-function">.</span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Field</span><span> {
</span><span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> []ent.Field{
</span><span>		field.String(</span><span style="color:#a6e22e">&quot;name&quot;</span><span>).
</span><span>			Default(</span><span style="color:#a6e22e">&quot;&quot;</span><span>),
</span><span>		field.Bool(</span><span style="color:#a6e22e">&quot;status&quot;</span><span>).
</span><span>			Default(</span><span style="color:#f92672;font-weight:bold">false</span><span>),
</span><span>		field.Time(</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>).
</span><span>			Default(</span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">()</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">time</span><span class="hljs-function">.</span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Time</span><span> {
</span><span>				</span><span style="color:#f92672;font-weight:bold">return</span><span> time.Now()
</span>			}),
<!-- -->	}
<!-- -->}
</code></div><p class="h-2"></p></pre>
<h3>コード生成</h3>
<p>shema ファイルを元にコードを生成するので編集後は実行する必要がある。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ go generate ./ent</span></code></div><p class="h-2"></p></pre>
<h3>マイグレーション部分を実装</h3>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span>
<span>	client, err := ent.Open(</span><span style="color:#a6e22e">&quot;sqlite3&quot;</span><span>, </span><span style="color:#a6e22e">&quot;file:todo.sqlite?cache=shared&amp;_fk=1&quot;</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		log.Fatalf(</span><span style="color:#a6e22e">&quot;faild opening connection to sqlit&quot;</span><span>)
</span>	}
<span>	</span><span style="color:#f92672;font-weight:bold">defer</span><span> client.Close()
</span>
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err := client.Schema.Create(context.Background()); err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		log.Fatalf(</span><span style="color:#a6e22e">&quot;faild creating schema&quot;</span><span>)
</span>	}
<!-- -->}
</code></div><p class="h-2"></p></pre>
<h2>echo</h2>
<p><code node="[object Object]">Todo</code> の struct を定義。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> Todo </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Name   </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;name&quot;`</span><span>
</span><span>	Status </span><span style="color:#f92672;font-weight:bold">bool</span><span>   </span><span style="color:#a6e22e">`json:&quot;status&quot;`</span><span>
</span>}
</code></div><p class="h-2"></p></pre>
<p>今回は CRUD 可能な Todo アプリを作りたいので以下のハンドラを作成する。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>e := echo.New()
</span>
<span>e.POST(</span><span style="color:#a6e22e">&quot;/todo&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: </span><span style="color:#a6e22e">&quot;ok&quot;</span><span>})
</span>})
<span>e.GET(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: </span><span style="color:#a6e22e">&quot;ok&quot;</span><span>})
</span>})
<span>e.PUT(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: </span><span style="color:#a6e22e">&quot;ok&quot;</span><span>})
</span>})
<span>e.DELETE(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: </span><span style="color:#a6e22e">&quot;ok&quot;</span><span>})
</span>})
<!-- -->
<span>e.Logger.Fatal(e.Start(</span><span style="color:#a6e22e">&quot;:8080&quot;</span><span>))</span></code></div><p class="h-2"></p></pre>
<h2>create を実装</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>e.POST(</span><span style="color:#a6e22e">&quot;/todo&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span>	t := &amp;Todo{}
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err := c.Bind(t); err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>		})
<!-- -->	}
<!-- -->	todo, err := client.Todo.
<!-- -->		Create().
<!-- -->		SetName(t.Name).
<!-- -->		SetStatus(t.Status).
<!-- -->		SetCreatedAt(time.Now()).
<!-- -->		Save(context.Background())
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>		})
<!-- -->	}
<!-- -->
<span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>		</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:   todo.Name,
</span><span>		</span><span style="color:#a6e22e">&quot;status&quot;</span><span>: strconv.FormatBool(todo.Status),
</span>	})
<!-- -->})
</code></div><p class="h-2"></p></pre>
<p>実行。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ curl --location --request POST </span><span style="color:#a6e22e">&#x27;http://localhost:8080/todo&#x27;</span><span> \
</span><span>       --header </span><span style="color:#a6e22e">&#x27;Content-Type: application/json&#x27;</span><span> \
</span><span>       --data-raw </span><span style="color:#a6e22e">&#x27;{&quot;name&quot;: &quot;todo1&quot;}&#x27;</span><span>
</span><span>{</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:</span><span style="color:#a6e22e">&quot;todo1&quot;</span><span>,</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:</span><span style="color:#a6e22e">&quot;false&quot;</span><span>}</span></code></div><p class="h-2"></p></pre>
<h2>READ を実装</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>e.GET(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	id, _ := strconv.Atoi(c.Param(</span><span style="color:#a6e22e">&quot;id&quot;</span><span>))
</span>
<!-- -->	todo, err := client.Todo.
<!-- -->		Query().
<!-- -->		Where(todo.ID(id)).
<!-- -->		Only(context.Background())
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>		})
<!-- -->	}
<span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>		</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:       todo.Name,
</span><span>		</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:     strconv.FormatBool(todo.Status),
</span><span>		</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>: todo.CreatedAt.String(),
</span>	})
<!-- -->})
</code></div><p class="h-2"></p></pre>
<p>実行。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ curl http://localhost:8080/todo/1
</span><span>{</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>:</span><span style="color:#a6e22e">&quot;2022-01-09 15:30:02.059031 +0900 +0900&quot;</span><span>,</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:</span><span style="color:#a6e22e">&quot;todo1&quot;</span><span>,</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:</span><span style="color:#a6e22e">&quot;false&quot;</span><span>}</span></code></div><p class="h-2"></p></pre>
<h2>UPDATE を実装</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>e.PUT(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	id, _ := strconv.Atoi(c.Param(</span><span style="color:#a6e22e">&quot;id&quot;</span><span>))
</span>	t := &amp;Todo{}
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err := c.Bind(t); err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>		})
<!-- -->	}
<!-- -->
<!-- -->	todo, err := client.Todo.
<!-- -->		UpdateOneID(id).
<!-- -->		SetName(t.Name).
<!-- -->		SetStatus(t.Status).
<!-- -->		Save(context.Background())
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>		})
<!-- -->	}
<!-- -->
<span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>		</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:       todo.Name,
</span><span>		</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:     strconv.FormatBool(todo.Status),
</span><span>		</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>: todo.CreatedAt.String(),
</span>	})
<!-- -->})
</code></div><p class="h-2"></p></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ curl --location --request PUT </span><span style="color:#a6e22e">&#x27;http://localhost:8080/todo/1&#x27;</span><span> \
</span><span>       --header </span><span style="color:#a6e22e">&#x27;Content-Type: application/json&#x27;</span><span> \
</span><span>       --data-raw </span><span style="color:#a6e22e">&#x27;{&quot;name&quot;: &quot;todo1&quot;, &quot;status&quot;: true}&#x27;</span><span>
</span><span>{</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>:</span><span style="color:#a6e22e">&quot;2022-01-09 15:30:02.059031 +0900 +0900&quot;</span><span>,</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:</span><span style="color:#a6e22e">&quot;todo1&quot;</span><span>,</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:</span><span style="color:#a6e22e">&quot;true&quot;</span><span>}</span></code></div><p class="h-2"></p></pre>
<h2>DELETE を実装</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span>e.DELETE(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>	id, _ := strconv.Atoi(c.Param(</span><span style="color:#a6e22e">&quot;id&quot;</span><span>))
</span>	err := client.Todo.
<!-- -->		DeleteOneID(id).
<!-- -->		Exec(context.Background())
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>		})
<!-- -->	}
<!-- -->
<span>	</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>		</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: fmt.Sprintf(</span><span style="color:#a6e22e">&quot;DELETE: %v&quot;</span><span>, id),
</span>	})
<!-- -->})
</code></div><p class="h-2"></p></pre>
<p>実行。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>curl --location --request DELETE </span><span style="color:#a6e22e">&#x27;http://localhost:8080/todo/1&#x27;</span><span>
</span><span>{</span><span style="color:#a6e22e">&quot;message&quot;</span><span>:</span><span style="color:#a6e22e">&quot;DELETE: 1&quot;</span><span>}</span></code></div><p class="h-2"></p></pre>
<h3>コード全体</h3>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-go" style="white-space:pre"><span style="color:#f92672;font-weight:bold">package</span><span> main
</span>
<span></span><span style="color:#f92672;font-weight:bold">import</span><span> (
</span><span>	</span><span style="color:#a6e22e">&quot;context&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;echo-ent-crud/ent&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;echo-ent-crud/ent/todo&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;fmt&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;log&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;net/http&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;strconv&quot;</span><span>
</span><span>	</span><span style="color:#a6e22e">&quot;time&quot;</span><span>
</span>
<span>	</span><span style="color:#a6e22e">&quot;github.com/labstack/echo/v4&quot;</span><span>
</span><span>	_ </span><span style="color:#a6e22e">&quot;github.com/mattn/go-sqlite3&quot;</span><span>
</span>)
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Todo </span><span style="color:#f92672;font-weight:bold">struct</span><span> {
</span><span>	Name   </span><span style="color:#f92672;font-weight:bold">string</span><span> </span><span style="color:#a6e22e">`json:&quot;name&quot;`</span><span>
</span><span>	Status </span><span style="color:#f92672;font-weight:bold">bool</span><span>   </span><span style="color:#a6e22e">`json:&quot;status&quot;`</span><span>
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">main</span><span class="hljs-function hljs-params">()</span><span> {
</span><span>	client, err := ent.Open(</span><span style="color:#a6e22e">&quot;sqlite3&quot;</span><span>, </span><span style="color:#a6e22e">&quot;file:todo.sqlite?cache=shared&amp;_fk=1&quot;</span><span>)
</span><span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		log.Fatalf(</span><span style="color:#a6e22e">&quot;faild opening connection to sqlit&quot;</span><span>)
</span>	}
<span>	</span><span style="color:#f92672;font-weight:bold">defer</span><span> client.Close()
</span>
<span>	</span><span style="color:#f92672;font-weight:bold">if</span><span> err := client.Schema.Create(context.Background()); err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>		log.Fatalf(</span><span style="color:#a6e22e">&quot;faild creating schema&quot;</span><span>)
</span>	}
<!-- -->
<!-- -->	e := echo.New()
<!-- -->
<span>	e.POST(</span><span style="color:#a6e22e">&quot;/todo&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span>		t := &amp;Todo{}
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err := c.Bind(t); err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>			</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>				</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>			})
<!-- -->		}
<!-- -->		todo, err := client.Todo.
<!-- -->			Create().
<!-- -->			SetName(t.Name).
<!-- -->			SetStatus(t.Status).
<!-- -->			SetCreatedAt(time.Now()).
<!-- -->			Save(context.Background())
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>			</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>				</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>			})
<!-- -->		}
<!-- -->
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:   todo.Name,
</span><span>			</span><span style="color:#a6e22e">&quot;status&quot;</span><span>: strconv.FormatBool(todo.Status),
</span>		})
<!-- -->	})
<!-- -->
<span>	e.GET(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>		id, _ := strconv.Atoi(c.Param(</span><span style="color:#a6e22e">&quot;id&quot;</span><span>))
</span>
<!-- -->		todo, err := client.Todo.
<!-- -->			Query().
<!-- -->			Where(todo.ID(id)).
<!-- -->			Only(context.Background())
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>			</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>				</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>			})
<!-- -->		}
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:       todo.Name,
</span><span>			</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:     strconv.FormatBool(todo.Status),
</span><span>			</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>: todo.CreatedAt.String(),
</span>		})
<!-- -->	})
<!-- -->
<span>	e.PUT(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>		id, _ := strconv.Atoi(c.Param(</span><span style="color:#a6e22e">&quot;id&quot;</span><span>))
</span>		t := &amp;Todo{}
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err := c.Bind(t); err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>			</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>				</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>			})
<!-- -->		}
<!-- -->
<!-- -->		todo, err := client.Todo.
<!-- -->			UpdateOneID(id).
<!-- -->			SetName(t.Name).
<!-- -->			SetStatus(t.Status).
<!-- -->			Save(context.Background())
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>			</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>				</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>			})
<!-- -->		}
<!-- -->
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;name&quot;</span><span>:       todo.Name,
</span><span>			</span><span style="color:#a6e22e">&quot;status&quot;</span><span>:     strconv.FormatBool(todo.Status),
</span><span>			</span><span style="color:#a6e22e">&quot;created_at&quot;</span><span>: todo.CreatedAt.String(),
</span>		})
<!-- -->	})
<!-- -->
<span>	e.DELETE(</span><span style="color:#a6e22e">&quot;/todo/:id&quot;</span><span>, </span><span class="hljs-function" style="color:#f92672;font-weight:bold">func</span><span class="hljs-function hljs-params">(c echo.Context)</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">error</span><span> {
</span><span>		id, _ := strconv.Atoi(c.Param(</span><span style="color:#a6e22e">&quot;id&quot;</span><span>))
</span>		err := client.Todo.
<!-- -->			DeleteOneID(id).
<!-- -->			Exec(context.Background())
<span>		</span><span style="color:#f92672;font-weight:bold">if</span><span> err != </span><span style="color:#f92672;font-weight:bold">nil</span><span> {
</span><span>			</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusInternalServerError, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>				</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: http.StatusText(http.StatusInternalServerError),
</span>			})
<!-- -->		}
<!-- -->
<span>		</span><span style="color:#f92672;font-weight:bold">return</span><span> c.JSON(http.StatusOK, </span><span style="color:#f92672;font-weight:bold">map</span><span>[</span><span style="color:#f92672;font-weight:bold">string</span><span>]</span><span style="color:#f92672;font-weight:bold">string</span><span>{
</span><span>			</span><span style="color:#a6e22e">&quot;message&quot;</span><span>: fmt.Sprintf(</span><span style="color:#a6e22e">&quot;DELETE: %v&quot;</span><span>, id),
</span>		})
<!-- -->	})
<!-- -->
<span>	e.Logger.Fatal(e.Start(</span><span style="color:#a6e22e">&quot;:8080&quot;</span><span>))
</span>}
</code></div><p class="h-2"></p></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20220108155408","title":"ent と echo で API 作る","content":"\n## ent\n### インストール\nent と DB の client をインストールする。\n```bash\n$ go get -d entgo.io/ent/cmd/ent\n$ go get github.com/mattn/go-sqlite3\n```\n\n### スキーマの作成\n```bash\n$ go run entgo.io/ent/cmd/ent init Todo\n```\n\n`ent/schema/todo.go` を編集する。\n```go\n// Fields of the Todo.\nfunc (Todo) Fields() []ent.Field {\n\treturn []ent.Field{\n\t\tfield.String(\"name\").\n\t\t\tDefault(\"\"),\n\t\tfield.Bool(\"status\").\n\t\t\tDefault(false),\n\t\tfield.Time(\"created_at\").\n\t\t\tDefault(func() time.Time {\n\t\t\t\treturn time.Now()\n\t\t\t}),\n\t}\n}\n```\n\n### コード生成\nshema ファイルを元にコードを生成するので編集後は実行する必要がある。\n```bash\n$ go generate ./ent\n```\n\n### マイグレーション部分を実装\n```go\nfunc main() {\n\n\tclient, err := ent.Open(\"sqlite3\", \"file:todo.sqlite?cache=shared\u0026_fk=1\")\n\tif err != nil {\n\t\tlog.Fatalf(\"faild opening connection to sqlit\")\n\t}\n\tdefer client.Close()\n\n\tif err := client.Schema.Create(context.Background()); err != nil {\n\t\tlog.Fatalf(\"faild creating schema\")\n\t}\n}\n```\n\n## echo\n`Todo` の struct を定義。\n```go\ntype Todo struct {\n\tName   string `json:\"name\"`\n\tStatus bool   `json:\"status\"`\n}\n```\n\n今回は CRUD 可能な Todo アプリを作りたいので以下のハンドラを作成する。\n```go\ne := echo.New()\n\ne.POST(\"/todo\", func(c echo.Context) error {\n\treturn c.JSON(http.StatusOK, map[string]string{\"message\": \"ok\"})\n})\ne.GET(\"/todo/:id\", func(c echo.Context) error {\n\treturn c.JSON(http.StatusOK, map[string]string{\"message\": \"ok\"})\n})\ne.PUT(\"/todo/:id\", func(c echo.Context) error {\n\treturn c.JSON(http.StatusOK, map[string]string{\"message\": \"ok\"})\n})\ne.DELETE(\"/todo/:id\", func(c echo.Context) error {\n\treturn c.JSON(http.StatusOK, map[string]string{\"message\": \"ok\"})\n})\n\ne.Logger.Fatal(e.Start(\":8080\"))\n```\n\n## create を実装\n```go\ne.POST(\"/todo\", func(c echo.Context) error {\n\tt := \u0026Todo{}\n\tif err := c.Bind(t); err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t})\n\t}\n\ttodo, err := client.Todo.\n\t\tCreate().\n\t\tSetName(t.Name).\n\t\tSetStatus(t.Status).\n\t\tSetCreatedAt(time.Now()).\n\t\tSave(context.Background())\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t})\n\t}\n\n\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\"name\":   todo.Name,\n\t\t\"status\": strconv.FormatBool(todo.Status),\n\t})\n})\n```\n\n実行。\n```bash\n$ curl --location --request POST 'http://localhost:8080/todo' \\\n       --header 'Content-Type: application/json' \\\n       --data-raw '{\"name\": \"todo1\"}'\n{\"name\":\"todo1\",\"status\":\"false\"}\n```\n\n## READ を実装\n```go\ne.GET(\"/todo/:id\", func(c echo.Context) error {\n\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\n\ttodo, err := client.Todo.\n\t\tQuery().\n\t\tWhere(todo.ID(id)).\n\t\tOnly(context.Background())\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t})\n\t}\n\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\"name\":       todo.Name,\n\t\t\"status\":     strconv.FormatBool(todo.Status),\n\t\t\"created_at\": todo.CreatedAt.String(),\n\t})\n})\n```\n\n実行。\n```bash\n$ curl http://localhost:8080/todo/1\n{\"created_at\":\"2022-01-09 15:30:02.059031 +0900 +0900\",\"name\":\"todo1\",\"status\":\"false\"}\n```\n\n## UPDATE を実装\n```go\ne.PUT(\"/todo/:id\", func(c echo.Context) error {\n\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\tt := \u0026Todo{}\n\tif err := c.Bind(t); err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t})\n\t}\n\n\ttodo, err := client.Todo.\n\t\tUpdateOneID(id).\n\t\tSetName(t.Name).\n\t\tSetStatus(t.Status).\n\t\tSave(context.Background())\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t})\n\t}\n\n\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\"name\":       todo.Name,\n\t\t\"status\":     strconv.FormatBool(todo.Status),\n\t\t\"created_at\": todo.CreatedAt.String(),\n\t})\n})\n```\n\n```bash\n$ curl --location --request PUT 'http://localhost:8080/todo/1' \\\n       --header 'Content-Type: application/json' \\\n       --data-raw '{\"name\": \"todo1\", \"status\": true}'\n{\"created_at\":\"2022-01-09 15:30:02.059031 +0900 +0900\",\"name\":\"todo1\",\"status\":\"true\"}\n```\n\n## DELETE を実装\n```go\ne.DELETE(\"/todo/:id\", func(c echo.Context) error {\n\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\terr := client.Todo.\n\t\tDeleteOneID(id).\n\t\tExec(context.Background())\n\tif err != nil {\n\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t})\n\t}\n\n\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\"message\": fmt.Sprintf(\"DELETE: %v\", id),\n\t})\n})\n```\n\n実行。\n```bash\ncurl --location --request DELETE 'http://localhost:8080/todo/1'\n{\"message\":\"DELETE: 1\"}\n```\n\n### コード全体\n```go\npackage main\n\nimport (\n\t\"context\"\n\t\"echo-ent-crud/ent\"\n\t\"echo-ent-crud/ent/todo\"\n\t\"fmt\"\n\t\"log\"\n\t\"net/http\"\n\t\"strconv\"\n\t\"time\"\n\n\t\"github.com/labstack/echo/v4\"\n\t_ \"github.com/mattn/go-sqlite3\"\n)\n\ntype Todo struct {\n\tName   string `json:\"name\"`\n\tStatus bool   `json:\"status\"`\n}\n\nfunc main() {\n\tclient, err := ent.Open(\"sqlite3\", \"file:todo.sqlite?cache=shared\u0026_fk=1\")\n\tif err != nil {\n\t\tlog.Fatalf(\"faild opening connection to sqlit\")\n\t}\n\tdefer client.Close()\n\n\tif err := client.Schema.Create(context.Background()); err != nil {\n\t\tlog.Fatalf(\"faild creating schema\")\n\t}\n\n\te := echo.New()\n\n\te.POST(\"/todo\", func(c echo.Context) error {\n\t\tt := \u0026Todo{}\n\t\tif err := c.Bind(t); err != nil {\n\t\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t\t})\n\t\t}\n\t\ttodo, err := client.Todo.\n\t\t\tCreate().\n\t\t\tSetName(t.Name).\n\t\t\tSetStatus(t.Status).\n\t\t\tSetCreatedAt(time.Now()).\n\t\t\tSave(context.Background())\n\t\tif err != nil {\n\t\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t\t})\n\t\t}\n\n\t\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\t\"name\":   todo.Name,\n\t\t\t\"status\": strconv.FormatBool(todo.Status),\n\t\t})\n\t})\n\n\te.GET(\"/todo/:id\", func(c echo.Context) error {\n\t\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\n\t\ttodo, err := client.Todo.\n\t\t\tQuery().\n\t\t\tWhere(todo.ID(id)).\n\t\t\tOnly(context.Background())\n\t\tif err != nil {\n\t\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t\t})\n\t\t}\n\t\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\t\"name\":       todo.Name,\n\t\t\t\"status\":     strconv.FormatBool(todo.Status),\n\t\t\t\"created_at\": todo.CreatedAt.String(),\n\t\t})\n\t})\n\n\te.PUT(\"/todo/:id\", func(c echo.Context) error {\n\t\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\t\tt := \u0026Todo{}\n\t\tif err := c.Bind(t); err != nil {\n\t\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t\t})\n\t\t}\n\n\t\ttodo, err := client.Todo.\n\t\t\tUpdateOneID(id).\n\t\t\tSetName(t.Name).\n\t\t\tSetStatus(t.Status).\n\t\t\tSave(context.Background())\n\t\tif err != nil {\n\t\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t\t})\n\t\t}\n\n\t\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\t\"name\":       todo.Name,\n\t\t\t\"status\":     strconv.FormatBool(todo.Status),\n\t\t\t\"created_at\": todo.CreatedAt.String(),\n\t\t})\n\t})\n\n\te.DELETE(\"/todo/:id\", func(c echo.Context) error {\n\t\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\t\terr := client.Todo.\n\t\t\tDeleteOneID(id).\n\t\t\tExec(context.Background())\n\t\tif err != nil {\n\t\t\treturn c.JSON(http.StatusInternalServerError, map[string]string{\n\t\t\t\t\"message\": http.StatusText(http.StatusInternalServerError),\n\t\t\t})\n\t\t}\n\n\t\treturn c.JSON(http.StatusOK, map[string]string{\n\t\t\t\"message\": fmt.Sprintf(\"DELETE: %v\", id),\n\t\t})\n\t})\n\n\te.Logger.Fatal(e.Start(\":8080\"))\n}\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20220108155408"},"buildId":"U6R7CMMdXPU1CTPoaVNEN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>