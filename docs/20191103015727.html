<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a58c9bb1e05a64ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a58c9bb1e05a64ba.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-d38be8d96a62f950.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-4c0bfde4693f048b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2d6bf7b3192a8752.js" defer=""></script><script src="/_next/static/chunks/996-96c017f2628f3a7d.js" defer=""></script><script src="/_next/static/chunks/238-6c9572b4a47f3e2a.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-11871a0dd3bce32a.js" defer=""></script><script src="/_next/static/WO88-BZ4H50Eu4wzY2ZqE/_buildManifest.js" defer=""></script><script src="/_next/static/WO88-BZ4H50Eu4wzY2ZqE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><a style="text-decoration:none" href="/"><div style="color:black;font-size:22px;cursor:pointer">MyDocs</div></a></div><p></p><h1><b># <!-- -->データベース操作</b></h1><h2>データベースの作成</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>CREATE DATABASE database</span><span style="color:#a6e22e">_name;</span></code></pre></div></pre>
<h2>データベースの削除</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>DROP DATABASE database</span><span style="color:#a6e22e">_name;</span></code></pre></div></pre>
<h2>テーブルの作成</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>CREATE TABLE table</span><span style="color:#a6e22e">_name (col_</span><span>name type, ...);</span></code></pre></div></pre>
<h3>主キー</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>CREATE TABLE table</span><span style="color:#a6e22e">_name (col_</span><span>name type, ..., PRIMARY KEY (col</span><span style="color:#a6e22e">_name));</span></code></pre></div></pre>
<ul>
<li>PRIMARY KEY の重複と NULL は NG</li>
<li>複数の列を指定できる (複合主キー)<!-- -->
<ul>
<li>PRIMARY KEY (列名 1, 列名 2 )</li>
</ul>
</li>
</ul>
<h3>外部キー</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>CREATE TABLE table</span><span style="color:#a6e22e">_name (
</span><span style="color:#a6e22e">  col_</span><span>name type, ...,
</span><span>  FOREIGN KEY (col</span><span style="color:#a6e22e">_name) REFERENCES parent_</span><span>table</span><span style="color:#a6e22e">_name(col_</span><span>name)
</span>);</code></pre></div></pre>
<ul>
<li>子テーブルの外部キーの値は親テーブルに存在しないといけない</li>
<li>参照される値 (親テーブル) の UPDATE / DELETE は NG</li>
</ul>
<h4>親テーブルの UPDATE / DELETE 時の設定</h4>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>CREATE TABLE table</span><span style="color:#a6e22e">_name (
</span><span style="color:#a6e22e">  col_</span><span>name type, ...,
</span><span>  FOREIGN KEY (col</span><span style="color:#a6e22e">_name) REFERENCES parent_</span><span>table</span><span style="color:#a6e22e">_name(col_</span><span>name)
</span>  ON DELETE [ アクション ]
<!-- -->  ON UPDATE [ アクション ]
<!-- -->);
</code></pre></div></pre>
<p>設定できるアクション。</p>
<table><thead><tr><th>アクション</th><th>詳細</th></tr></thead><tbody><tr><td>RESTRICT</td><td>親テーブルに対して UPDATE / DELETE を行うとエラーになる ( デフォルト )</td></tr><tr><td>CASCADE</td><td>親テーブルに対して UPDATE / DELETE を行うと、子テーブルの一致する行に自動的に UPDATE / DELETE を行う</td></tr><tr><td>SET NULL</td><td>親テーブルに対して UPDATE / DELETE を行うと、子テーブルの外部キーを NULL に設定する</td></tr></tbody></table>
<h2>データの検索</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT col</span><span style="color:#a6e22e">_name1, col_</span><span>name2, ... FROM table</span><span style="color:#a6e22e">_name [ 条件 ];</span></code></pre></div></pre>
<h3>条件</h3>
<ul>
<li>比較演算子</li>
</ul>
<table><thead><tr><th>演算子</th><th>意味</th></tr></thead><tbody><tr><td>&quot;=&quot;</td><td>等しい</td></tr><tr><td>&quot;&lt;&quot;</td><td>小さい</td></tr><tr><td>&quot;&gt;&quot;</td><td>大きい</td></tr><tr><td>&quot;&lt;=&quot;</td><td>以下</td></tr><tr><td>&quot;&gt;=&quot;</td><td>以上</td></tr><tr><td>&quot;&lt;&gt;&quot;</td><td>等しくない</td></tr></tbody></table>
<ul>
<li>BETWEEN</li>
</ul>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">* FROM table_name WHERE BETWEEN value1 AND value2;</span></code></pre></div></pre>
<p>指定した範囲に値があるものを取得。</p>
<ul>
<li>IN</li>
</ul>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">* FROM table_name WHERE col_name IN (&#x27;value1&#x27;, &#x27;value2&#x27;);</span></code></pre></div></pre>
<p>指定した値のリストの中にあるものを取得。</p>
<ul>
<li>LIKE</li>
</ul>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">* FROM table_name WHERE col_name LIKE &#x27;_100%&#x27;;</span></code></pre></div></pre>
<p><code>%</code> は任意の文字数の任意の文字、 <code>_</code> は 1 文字の任意の文字。</p>
<ul>
<li>サブクエリ</li>
</ul>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">* FROM table_name
</span><span style="color:#a6e22e">WHERE col_name1 = (
</span><span style="color:#a6e22e">  SELECT *</span><span> FROM table</span><span style="color:#a6e22e">_name WHERE col_</span><span>name2 = value
</span>);</code></pre></div></pre>
<p>副問合せ。</p>
<h3>DISTINCT</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT DISTINCT col</span><span style="color:#a6e22e">_name1, col_</span><span>name2, ... FROM table</span><span style="color:#a6e22e">_name;</span></code></pre></div></pre>
<p>SELECT の結果から重複業を除外できる。</p>
<p><code>GROUP BY</code> でも重複削除できる。</p>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT col</span><span style="color:#a6e22e">_name1, col_</span><span>name2, ... FROM table</span><span style="color:#a6e22e">_name GROUP BY col_</span><span>name1;</span></code></pre></div></pre>
<h3>ORDER BY</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">* FROM table_name ORDER BY col_name1 ASC, col_name2 DESC;</span></code></pre></div></pre>
<p>ASC は昇順。 DESC は降順。 ASC は省略可能。</p>
<h3>LIMIT</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">* FROM table_name ORDER BY col_name LIMIT 5;</span></code></pre></div></pre>
<h3>集約関数</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT col</span><span style="color:#a6e22e">_name, MAX(col_</span><span>name) FROM table</span><span style="color:#a6e22e">_name;</span></code></pre></div></pre>
<p>基本的に NULL は無視される。
集約関数の種類。</p>
<table><thead><tr><th>関数</th><th>意味</th></tr></thead><tbody><tr><td>MAX</td><td>最大値</td></tr><tr><td>MIN</td><td>最小値</td></tr><tr><td>SUM</td><td>合計</td></tr><tr><td>AVG</td><td>平均</td></tr><tr><td>COUNT</td><td>カウント</td></tr></tbody></table>
<p>SUM / AVG / COUNT は DISTINCT をサポートしている。</p>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT col</span><span style="color:#a6e22e">_name, COUNT( DISTINCT col_</span><span>name ) FROM table</span><span style="color:#a6e22e">_name;</span></code></pre></div></pre>
<h3>GROUP BY</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT col</span><span style="color:#a6e22e">_name, COUNT(col_</span><span>name) FROM table</span><span style="color:#a6e22e">_name GROUP BY col_</span><span>name;</span></code></pre></div></pre>
<p>テーブルを集約キーでグループ分けしてから集計する。</p>
<h3>HAVING</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT COUNT(col</span><span style="color:#a6e22e">_name1) FROM table_</span><span>name GROUP BY col</span><span style="color:#a6e22e">_name1 HAVING COUNT(col_</span><span>name1) &gt;= value;</span></code></pre></div></pre>
<p><code>GROUP BY</code> されたグループに対して条件を指定できる。</p>
<p>この場合、列名 1 で集計した値をカウントしてから HAVING で指定した条件のもののみを取得する。</p>
<h2>結合 ( JOIN )</h2>
<p>結合の種類は 3 つ。</p>
<ul>
<li>クロス結合 ( CROSS JOIN )</li>
<li>内部結合 ( INNER JOIN )</li>
<li>外部結合 ( OUTER JOIN )</li>
</ul>
<h3>クロス結合 ( CROSS JOIN )</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT </span><span style="color:#a6e22e">*
</span><span style="color:#a6e22e">FROM table_name1 CROSS JOIN table_name2;</span></code></pre></div></pre>
<p>すべてのテーブルの組み合わせを作る。</p>
<h3>内部結合 ( INNER JOIN )</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT table</span><span style="color:#a6e22e">_name1.*, table_</span><span>name2.col</span><span style="color:#a6e22e">_name, ...
</span><span style="color:#a6e22e">FROM table_</span><span>name1 INNER JOIN table</span><span style="color:#a6e22e">_name2
</span><span style="color:#a6e22e">ON table_</span><span>name1.col</span><span style="color:#a6e22e">_name1 = table_</span><span>name2.col</span><span style="color:#a6e22e">_name1;</span></code></pre></div></pre>
<p>クロス結合の部分集合。条件一致したものだけを取得する。</p>
<p><code>USING</code> でも書ける。</p>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT table</span><span style="color:#a6e22e">_name1.*, table_</span><span>name2.col</span><span style="color:#a6e22e">_name, ...
</span><span style="color:#a6e22e">FROM table_</span><span>name1 INNER JOIN table</span><span style="color:#a6e22e">_name2 USING(col_</span><span>name);</span></code></pre></div></pre>
<h3>外部結合</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT table</span><span style="color:#a6e22e">_name1.*, table_</span><span>name2.col</span><span style="color:#a6e22e">_name, ...
</span><span style="color:#a6e22e">FROM table_</span><span>name1 ( LEFT | RIGHT ) OUTER JOIN table</span><span style="color:#a6e22e">_name2
</span><span style="color:#a6e22e">ON table_</span><span>name1.col</span><span style="color:#a6e22e">_name1 = table_</span><span>name2.col</span><span style="color:#a6e22e">_name1;</span></code></pre></div></pre>
<p>内部結合と同様に条件一致したものを取得し、さらに、マッチしなかった ( LEFT | RIGHT ) のテーブルの行は残す。</p>
<table><thead><tr><th>書式</th><th>内容</th></tr></thead><tbody><tr><td>LEFT OUTER JOIN</td><td>FROM のあとに書かれたテーブルのデータだけを取得</td></tr><tr><td>RIGHT OUTER JOIN</td><td>JOIN の後に書かれたテーブルのデータだけを取得</td></tr></tbody></table>
<h2>テーブルの削除</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>DROP TABLE table</span><span style="color:#a6e22e">_name;</span></code></pre></div></pre>
<h2>データの挿入</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>INSERT INTO database</span><span style="color:#a6e22e">_name.table_</span><span>name(col</span><span style="color:#a6e22e">_name1, col_</span><span>name2, ...) VALUES (value1, value2, ...);</span></code></pre></div></pre>
<p>全てのカラムに値を追加する場合は以下のように書ける。</p>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>INSERT INTO table</span><span style="color:#a6e22e">_name VALUES(value1, value2, ...);</span></code></pre></div></pre>
<h2>ビュー</h2>
<p>データを持たず実行分だけが入っている。</p>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>CREATE VIEW view</span><span style="color:#a6e22e">_name (col_</span><span>name1, col</span><span style="color:#a6e22e">_name2, ...) AS select_</span><span>statement;</span></code></pre></div></pre>
<h2>数値として取り出す</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>SELECT col</span><span style="color:#a6e22e">_name FROM as unsigned FROM table_</span><span>name;</span></code></pre></div></pre>
<h2>index の付け方</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>ALTER TABLE table</span><span style="color:#a6e22e">_name AND INDEX index_</span><span>name (col</span><span style="color:#a6e22e">_name);</span></code></pre></div></pre>
<h2>トランザクション</h2>
<p><code>BEGIN</code> で開始して, <code>COMMIT</code> で反映, <code>ROLLBACK</code> で取り消しができる。</p>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">sql</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-markdown" style="white-space:pre"><span>BEGIN;
</span>  SQL1;
<!-- -->  SQL2;
<!-- -->COMMIT;</code></pre></div></pre></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"contents":{"id":"20191103015727","title":"データベース操作","body":"\n## データベースの作成\n```sql\nCREATE DATABASE database_name;\n```\n\n## データベースの削除\n```sql\nDROP DATABASE database_name;\n```\n\n## テーブルの作成\n```sql\nCREATE TABLE table_name (col_name type, ...);\n```\n\n### 主キー\n```sql\nCREATE TABLE table_name (col_name type, ..., PRIMARY KEY (col_name));\n```\n- PRIMARY KEY の重複と NULL は NG\n- 複数の列を指定できる (複合主キー)\n  - PRIMARY KEY (列名 1, 列名 2 )\n\n### 外部キー\n```sql\nCREATE TABLE table_name (\n  col_name type, ...,\n  FOREIGN KEY (col_name) REFERENCES parent_table_name(col_name)\n);\n```\n- 子テーブルの外部キーの値は親テーブルに存在しないといけない\n- 参照される値 (親テーブル) の UPDATE / DELETE は NG\n\n#### 親テーブルの UPDATE / DELETE 時の設定\n```sql\nCREATE TABLE table_name (\n  col_name type, ...,\n  FOREIGN KEY (col_name) REFERENCES parent_table_name(col_name)\n  ON DELETE [ アクション ]\n  ON UPDATE [ アクション ]\n);\n\n```\n設定できるアクション。\n|アクション|詳細|\n|-|-|\nRESTRICT|親テーブルに対して UPDATE / DELETE を行うとエラーになる ( デフォルト )\nCASCADE|親テーブルに対して UPDATE / DELETE を行うと、子テーブルの一致する行に自動的に UPDATE / DELETE を行う\nSET NULL|親テーブルに対して UPDATE / DELETE を行うと、子テーブルの外部キーを NULL に設定する\n\n\n## データの検索\n```sql\nSELECT col_name1, col_name2, ... FROM table_name [ 条件 ];\n```\n\n### 条件\n- 比較演算子\n\n|演算子|意味|\n|-|-|\n\"=\"|等しい\n\"\u003c\"|小さい\n\"\u003e\"|大きい\n\"\u003c=\"|以下\n\"\u003e=\"|以上\n\"\u003c\u003e\"|等しくない\n\n- BETWEEN\n```sql\nSELECT * FROM table_name WHERE BETWEEN value1 AND value2;\n```\n指定した範囲に値があるものを取得。\n\n- IN\n```sql\nSELECT * FROM table_name WHERE col_name IN ('value1', 'value2');\n```\n指定した値のリストの中にあるものを取得。\n\n- LIKE\n```sql\nSELECT * FROM table_name WHERE col_name LIKE '_100%';\n```\n`%` は任意の文字数の任意の文字、 `_` は 1 文字の任意の文字。\n\n- サブクエリ\n```sql\nSELECT * FROM table_name\nWHERE col_name1 = (\n  SELECT * FROM table_name WHERE col_name2 = value\n);\n```\n副問合せ。\n\n### DISTINCT\n```sql\nSELECT DISTINCT col_name1, col_name2, ... FROM table_name;\n```\nSELECT の結果から重複業を除外できる。\n\n`GROUP BY` でも重複削除できる。\n```sql\nSELECT col_name1, col_name2, ... FROM table_name GROUP BY col_name1;\n```\n\n### ORDER BY\n```sql\nSELECT * FROM table_name ORDER BY col_name1 ASC, col_name2 DESC;\n```\nASC は昇順。 DESC は降順。 ASC は省略可能。\n\n### LIMIT\n```sql\nSELECT * FROM table_name ORDER BY col_name LIMIT 5;\n```\n\n### 集約関数\n```sql\nSELECT col_name, MAX(col_name) FROM table_name;\n```\n基本的に NULL は無視される。\n集約関数の種類。\n|関数|意味|\n|-|-|\nMAX|最大値\nMIN|最小値\nSUM|合計\nAVG|平均\nCOUNT|カウント\n\nSUM / AVG / COUNT は DISTINCT をサポートしている。\n```sql\nSELECT col_name, COUNT( DISTINCT col_name ) FROM table_name;\n```\n\n### GROUP BY\n```sql\nSELECT col_name, COUNT(col_name) FROM table_name GROUP BY col_name;\n```\nテーブルを集約キーでグループ分けしてから集計する。\n\n### HAVING\n```sql\nSELECT COUNT(col_name1) FROM table_name GROUP BY col_name1 HAVING COUNT(col_name1) \u003e= value;\n```\n`GROUP BY` されたグループに対して条件を指定できる。\n\nこの場合、列名 1 で集計した値をカウントしてから HAVING で指定した条件のもののみを取得する。\n\n## 結合 ( JOIN )\n結合の種類は 3 つ。\n- クロス結合 ( CROSS JOIN )\n- 内部結合 ( INNER JOIN )\n- 外部結合 ( OUTER JOIN )\n\n### クロス結合 ( CROSS JOIN )\n```sql\nSELECT *\nFROM table_name1 CROSS JOIN table_name2;\n```\nすべてのテーブルの組み合わせを作る。\n\n### 内部結合 ( INNER JOIN )\n```sql\nSELECT table_name1.*, table_name2.col_name, ...\nFROM table_name1 INNER JOIN table_name2\nON table_name1.col_name1 = table_name2.col_name1;\n```\nクロス結合の部分集合。条件一致したものだけを取得する。\n\n`USING` でも書ける。\n```sql\nSELECT table_name1.*, table_name2.col_name, ...\nFROM table_name1 INNER JOIN table_name2 USING(col_name);\n```\n\n### 外部結合\n```sql\nSELECT table_name1.*, table_name2.col_name, ...\nFROM table_name1 ( LEFT | RIGHT ) OUTER JOIN table_name2\nON table_name1.col_name1 = table_name2.col_name1;\n```\n内部結合と同様に条件一致したものを取得し、さらに、マッチしなかった ( LEFT | RIGHT ) のテーブルの行は残す。\n\n|書式|内容|\n|-|-|\nLEFT OUTER JOIN|FROM のあとに書かれたテーブルのデータだけを取得\nRIGHT OUTER JOIN|JOIN の後に書かれたテーブルのデータだけを取得\n\n## テーブルの削除\n```sql\nDROP TABLE table_name;\n```\n\n## データの挿入\n```sql\nINSERT INTO database_name.table_name(col_name1, col_name2, ...) VALUES (value1, value2, ...);\n```\n\n全てのカラムに値を追加する場合は以下のように書ける。\n```sql\nINSERT INTO table_name VALUES(value1, value2, ...);\n```\n\n## ビュー\nデータを持たず実行分だけが入っている。\n```sql\nCREATE VIEW view_name (col_name1, col_name2, ...) AS select_statement;\n```\n\n## 数値として取り出す\n```sql\nSELECT col_name FROM as unsigned FROM table_name;\n```\n\n## index の付け方\n```sql\nALTER TABLE table_name AND INDEX index_name (col_name);\n```\n\n## トランザクション\n`BEGIN` で開始して, `COMMIT` で反映, `ROLLBACK` で取り消しができる。\n```sql\nBEGIN;\n  SQL1;\n  SQL2;\nCOMMIT;\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20191103015727"},"buildId":"WO88-BZ4H50Eu4wzY2ZqE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>