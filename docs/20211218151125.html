<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/e44854d771c00df0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e44854d771c00df0.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-d98b4a7f39fdfc80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-327d6f89185e0007.js" defer=""></script><script src="/_next/static/chunks/594-14c965e1fcce40c6.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-5449b7016e4923d1.js" defer=""></script><script src="/_next/static/_DJ56jee9Jq5wqHN8NeJz/_buildManifest.js" defer=""></script><script src="/_next/static/_DJ56jee9Jq5wqHN8NeJz/_ssgManifest.js" defer=""></script><script src="/_next/static/_DJ56jee9Jq5wqHN8NeJz/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->TypeScript 勉強する</b></h1><h2>型いろいろ</h2>
<h3>discriminated unions</h3>
<p>意味のある共通のプロパティをもたせて判別に使う。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> Bird {
</span><span>  </span><span class="hljs-attr">flySpped</span><span>: </span><span style="color:#a6e22e">number</span><span>;
</span><span>  </span><span style="color:#f92672;font-weight:bold">type</span><span>: </span><span style="color:#a6e22e">&quot;bird&quot;</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">interface</span><span> Horse {
</span><span>  </span><span class="hljs-attr">runSpeed</span><span>: </span><span style="color:#a6e22e">number</span><span>;
</span><span>  </span><span style="color:#f92672;font-weight:bold">type</span><span>: </span><span style="color:#a6e22e">&quot;horse&quot;</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> Animal = Bird | Horse;
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">animalSpeed</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">animal: Animal</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">switch</span><span> (animal.type) {
</span><span>    </span><span style="color:#f92672;font-weight:bold">case</span><span> </span><span style="color:#a6e22e">&quot;bird&quot;</span><span>:
</span><span>      </span><span style="color:#a6e22e">console</span><span>.log(animal.flySpped);
</span><span>      </span><span style="color:#f92672;font-weight:bold">break</span><span>;
</span><span>    </span><span style="color:#f92672;font-weight:bold">case</span><span> </span><span style="color:#a6e22e">&quot;horse&quot;</span><span>:
</span><span>      </span><span style="color:#a6e22e">console</span><span>.log(animal.runSpeed);
</span>  }
<!-- -->}
</code></div><p class="h-2"></p></pre>
<h3>型キャスト</h3>
<p>文字列を数値に変換する場合、 <code node="[object Object]">+</code> を変数の前につけるだけでよい。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const </span><span class="hljs-attr">a</span><span> = </span><span style="color:#a6e22e">&quot;1&quot;</span><span style="color:#75715e">;</span><span>
</span><span>const </span><span class="hljs-attr">b</span><span> = </span><span style="color:#a6e22e">&quot;2&quot;</span><span style="color:#75715e">;</span><span>
</span>
<span>const </span><span class="hljs-attr">result</span><span> = +a + +b</span><span style="color:#75715e">;</span><span>
</span><span>console.log(result)</span><span style="color:#75715e">; // 3</span></code></div><p class="h-2"></p></pre>
<p>前に <code node="[object Object]">&lt;&gt;</code> で型を書くか、後ろに <code node="[object Object]">as</code> を付けて型キャストできる。
祖運剤が確定している場合は <code node="[object Object]">!</code> を付けてエラーを回避できる。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const </span><span class="hljs-attr">input1</span><span> = &lt;HTMLInputElement&gt; document.getElementById(</span><span style="color:#a6e22e">&quot;num&quot;</span><span>)!</span><span style="color:#75715e">;</span><span>
</span><span>const </span><span class="hljs-attr">input2</span><span> = document.getElementById(</span><span style="color:#a6e22e">&quot;num&quot;</span><span>)! as HTMLInputElement</span><span style="color:#75715e">;</span></code></div><p class="h-2"></p></pre>
<h3>インデックス型</h3>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>interface ErrorInterface {
</span><span>  [</span><span style="color:#f92672;font-weight:bold">prop</span><span>: </span><span style="color:#a6e22e">string</span><span>]: </span><span style="color:#a6e22e">string</span><span>;
</span>}
<!-- -->
<!-- -->const errorMessage: ErrorInterface = {
<span>  email: </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>,
</span><span>  </span><span style="color:#a6e22e">name</span><span>: </span><span style="color:#a6e22e">&quot;foo&quot;</span><span>,
</span><span>  message: </span><span style="color:#a6e22e">&quot;fuga&quot;</span><span>,
</span>};
<!-- -->
<span>console.</span><span style="color:#a6e22e">log</span><span>(errorMessage); // { email: </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>, </span><span style="color:#a6e22e">name</span><span>: </span><span style="color:#a6e22e">&quot;foo&quot;</span><span>, message: </span><span style="color:#a6e22e">&quot;fuga&quot;</span><span> }</span></code></div><p class="h-2"></p></pre>
<h3>関数オーバーロード</h3>
<p>受け取る型と返す型のパターンを関数の直前に記述する。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> Input = </span><span style="color:#a6e22e">string</span><span> | </span><span style="color:#a6e22e">number</span><span>;
</span>
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">add</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">a: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function hljs-params">, b: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">number</span><span>;
</span><span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">add</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">a: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, b: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">string</span><span>;
</span><span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">add</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">a: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function hljs-params">, b: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">string</span><span>;
</span><span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">add</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">a: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, b: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">string</span><span>;
</span><span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">add</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">a: Input, b: Input</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">if</span><span> (</span><span style="color:#f92672;font-weight:bold">typeof</span><span> a === </span><span style="color:#a6e22e">&quot;string&quot;</span><span> || </span><span style="color:#f92672;font-weight:bold">typeof</span><span> b === </span><span style="color:#a6e22e">&quot;string&quot;</span><span>) {
</span><span>    </span><span style="color:#f92672;font-weight:bold">return</span><span> a.toString() + b.toString();
</span>  }
<span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> a + b;
</span>}
<!-- -->
<span></span><span style="color:#a6e22e">console</span><span>.log(add(</span><span class="hljs-number">1</span><span>, </span><span class="hljs-number">2</span><span>));
</span><span></span><span style="color:#a6e22e">console</span><span>.log(add(</span><span style="color:#a6e22e">&quot;1&quot;</span><span>, </span><span class="hljs-number">2</span><span>));</span></code></div><p class="h-2"></p></pre>
<h3>オプショナルチェイン</h3>
<p><code node="[object Object]">?</code> を使ってオブジェクトに安全にアクセスする。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const fetched = {
</span><span>  id: </span><span style="color:#a6e22e">&quot;id1&quot;</span><span>,
</span><span>  name: </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>,
</span>  job: {
<span>    title: </span><span style="color:#a6e22e">&quot;Dev&quot;</span><span>,
</span><span>    desc: </span><span style="color:#a6e22e">&quot;developer&quot;</span><span>,
</span>  },
<!-- -->};
<!-- -->
<!-- -->console.log(fetched &amp;&amp; fetched.job &amp;&amp; fetched.job.title);
<!-- -->console.log(fetched?.job?.title);
</code></div><p class="h-2"></p></pre>
<h3>null 合体演算子</h3>
<p><code node="[object Object]">null</code> か <code node="[object Object]">undefined</code> のときのみ判定できる。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>let </span><span class="hljs-attr">input</span><span> = </span><span style="color:#a6e22e">&quot;&quot;</span><span style="color:#75715e">;</span><span>
</span><span>const </span><span class="hljs-attr">inputData</span><span> = input ?? </span><span style="color:#a6e22e">&quot;Default&quot;</span><span style="color:#75715e">;</span><span>
</span><span>console.log(inputData)</span><span style="color:#75715e">;</span></code></div><p class="h-2"></p></pre>
<h2>class</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-attr">id</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  name: </span><span style="color:#a6e22e">string</span><span>;
</span>
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, n: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">this</span><span>.id = id;
</span><span>    </span><span style="color:#a6e22e">this</span><span>.name = n;
</span>  }
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">printData</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`ID: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.id}</span><span style="color:#a6e22e">; Name: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> person = </span><span style="color:#f92672;font-weight:bold">new</span><span> Person(</span><span style="color:#a6e22e">&quot;user1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>);
</span><span>person.printData(); </span><span style="color:#75715e">// ID: user1; Name: hoge</span></code></div><p class="h-2"></p></pre>
<p>フィールドとコンストラクタはまとめる事ができる。やり方は <code node="[object Object]">constractor</code> にアクセス修飾子を書くだけ。
引数の名前はフィールド名にしないといけない。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> name: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span>  }
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">printData</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`ID: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.id}</span><span style="color:#a6e22e">; Name: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> person = </span><span style="color:#f92672;font-weight:bold">new</span><span> Person(</span><span style="color:#a6e22e">&quot;user1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>);
</span><span>person.printData(); </span><span style="color:#75715e">// ID: user1; Name: hoge</span></code></div><p class="h-2"></p></pre>
<p><code node="[object Object]">private</code> は外部からアクセスできない。 <code node="[object Object]">readonly</code> は初期化後に変更ができない。
また <code node="[object Object]">protected</code> はサブクラスからのみアクセス可能。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">private</span><span class="hljs-function hljs-params"> </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">readonly</span><span class="hljs-function hljs-params"> id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> name: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span>  }
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">printData</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`ID: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.id}</span><span style="color:#a6e22e">; Name: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> person = </span><span style="color:#f92672;font-weight:bold">new</span><span> Person(</span><span style="color:#a6e22e">&quot;user1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>);
</span><span>person.printData(); </span><span style="color:#75715e">// ID: user1; Name: hoge</span></code></div><p class="h-2"></p></pre>
<h3>getter &amp; setter</h3>
<p><code node="[object Object]">()</code> は不要。プロパティのように実行する。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">private</span><span> _report: </span><span style="color:#a6e22e">string</span><span>;
</span>
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">private</span><span class="hljs-function hljs-params"> </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">readonly</span><span class="hljs-function hljs-params"> id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> name: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">this</span><span>._report = </span><span style="color:#a6e22e">&quot;&quot;</span><span>;
</span>  }
<!-- -->
<span>  </span><span style="color:#f92672;font-weight:bold">get</span><span> </span><span style="color:#a6e22e;font-weight:bold">report</span><span>() {
</span><span>    </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e">this</span><span>._report;
</span>  }
<!-- -->
<span>  </span><span style="color:#f92672;font-weight:bold">set</span><span> </span><span style="color:#a6e22e;font-weight:bold">report</span><span>(</span><span class="hljs-params">input: </span><span class="hljs-params" style="color:#a6e22e">string</span><span>) {
</span><span>    </span><span style="color:#a6e22e">this</span><span>._report = input;
</span>  }
<!-- -->
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">printData</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`ID: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.id}</span><span style="color:#a6e22e">; Name: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> person = </span><span style="color:#f92672;font-weight:bold">new</span><span> Person(</span><span style="color:#a6e22e">&quot;user1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>);
</span><span>person.printData(); </span><span style="color:#75715e">// ID: user1; Name: hoge</span><span>
</span>
<span>person.report = </span><span style="color:#a6e22e">&quot;report1&quot;</span><span>;
</span><span></span><span style="color:#a6e22e">console</span><span>.log(person.report); </span><span style="color:#75715e">// report1</span></code></div><p class="h-2"></p></pre>
<h3>static メソッド &amp; static プロパティ</h3>
<p>static メソッドや static プロパティには this でアクセスできない ( インスタンスからアクセスできない )。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>class Person {
</span><span>  </span><span style="color:#f92672;font-weight:bold">static</span><span> </span><span style="color:#a6e22e">year</span><span> = </span><span class="hljs-number">2021</span><span>;
</span>}
<!-- -->
<span>console.</span><span style="color:#a6e22e">log</span><span>(Person.</span><span style="color:#a6e22e">year</span><span>); </span><span style="color:#75715e">// 2021</span></code></div><p class="h-2"></p></pre>
<h3>抽象メソッド</h3>
<p>抽象メソッドは抽象クラス内でのみ使える。抽象メソッドは関数の構造のみを定義しておく。
抽象クラスからはインスタンスを作れない。継承したサブクラスからはインスタンスを作れる。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">abstract</span><span> </span><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Product</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">protected</span><span class="hljs-function hljs-params"> </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">readonly</span><span class="hljs-function hljs-params"> id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> name: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span>  }
<span>  </span><span style="color:#f92672;font-weight:bold">abstract</span><span> describe(): </span><span style="color:#a6e22e">void</span><span>;
</span>}
<!-- -->
<span></span><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Product1</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#f92672;font-weight:bold">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Product</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, name: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">super</span><span>(id, name);
</span>  }
<!-- -->
<span>  describe(): </span><span style="color:#a6e22e">void</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`ID: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.id}</span><span style="color:#a6e22e">; Name: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> product1 = </span><span style="color:#f92672;font-weight:bold">new</span><span> Product1(</span><span style="color:#a6e22e">&quot;1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>);
</span><span>product1.describe(); </span><span style="color:#75715e">// ID: 1; Name: hoge</span></code></div><p class="h-2"></p></pre>
<h3>シングルトンパターン</h3>
<p>オブジェクトを 1 つしか作らせたくない場合に使う。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">private</span><span> </span><span style="color:#f92672;font-weight:bold">static</span><span> instance: </span><span style="color:#a6e22e;font-weight:bold">Person</span><span>;
</span>
<span>  </span><span style="color:#f92672;font-weight:bold">static</span><span> getInstance() {
</span><span>    </span><span style="color:#f92672;font-weight:bold">if</span><span> (Person.instance) {
</span><span>      </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e">this</span><span>.instance;
</span>    }
<span>    </span><span style="color:#a6e22e">this</span><span>.instance = </span><span style="color:#f92672;font-weight:bold">new</span><span> </span><span style="color:#a6e22e;font-weight:bold">Person</span><span>();
</span><span>    </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e">this</span><span>.instance;
</span>  }
<!-- -->}
<!-- -->
<span>const person = </span><span style="color:#f92672;font-weight:bold">new</span><span> </span><span style="color:#a6e22e;font-weight:bold">Person</span><span>();</span></code></div><p class="h-2"></p></pre>
<h3>interface</h3>
<p>オブジェクトがどんな形であるか定義する。
interface とカスタムタイプの使い分けは、オブジェクトの構造を記述するときは interface を使う。
カスタムタイプは union 型など様々な型を定義できる。 interface を使えばオブジェクトの構造を定義したいという意図を明確にできる。
また interface は readonly 継承もできる。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> </span><span style="color:#bf79db">Named</span><span> {
</span><span>  readonly name: </span><span style="color:#a6e22e">string</span><span>
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">interface</span><span> </span><span style="color:#bf79db">Greetable</span><span> </span><span style="color:#bf79db">extends</span><span> </span><span style="color:#bf79db">Named</span><span> {
</span><span>  hello(phrase: </span><span style="color:#a6e22e">string</span><span>): </span><span style="color:#a6e22e">void</span><span>
</span>}
</code></div><p class="h-2"></p></pre>
<h3>implements</h3>
<p><code node="[object Object]">implements</code> を使って実装する。
抽象クラスとの違いは、 interface では値や実装を持たない。抽象クラスは値や実装を混在させる事ができる。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> PersonInterface {
</span><span>  </span><span class="hljs-attr">id</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  name: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  describe(): </span><span style="color:#a6e22e">void</span><span>;
</span>}
<!-- -->
<span></span><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">implements</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">PersonInterface</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-attr">id</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  name: </span><span style="color:#a6e22e">string</span><span>;
</span>
<span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, n: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">this</span><span>.id = id;
</span><span>    </span><span style="color:#a6e22e">this</span><span>.name = n;
</span>  }
<!-- -->
<span>  describe(): </span><span style="color:#a6e22e">void</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`ID: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.id}</span><span style="color:#a6e22e">; Name: </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  }
<!-- -->}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> person = </span><span style="color:#f92672;font-weight:bold">new</span><span> Person(</span><span style="color:#a6e22e">&quot;1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span>);
</span><span>person.describe(); </span><span style="color:#75715e">// ID: 1; Name: hoge</span></code></div><p class="h-2"></p></pre>
<h2>ジェネリクス</h2>
<p>関数の後ろに <code node="[object Object]">&lt;&gt;</code> を付けて表現する。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">function</span><span> merge</span><span class="hljs-constructor">Object(</span><span class="hljs-constructor hljs-params">objA</span><span class="hljs-constructor">: </span><span class="hljs-constructor hljs-params">object</span><span class="hljs-constructor">, </span><span class="hljs-constructor hljs-params">objB</span><span class="hljs-constructor">: </span><span class="hljs-constructor hljs-params">object</span><span class="hljs-constructor">)</span><span> {
</span><span>  return </span><span class="hljs-module-access hljs-module hljs-identifier">Object</span><span class="hljs-module-access hljs-module">.</span><span>assign(objA, objB);
</span>}
<!-- -->
<span>console.log(merge</span><span class="hljs-constructor">Object({ </span><span class="hljs-constructor hljs-params">id</span><span class="hljs-constructor">: </span><span class="hljs-constructor" style="color:#a6e22e">&quot;1&quot;</span><span class="hljs-constructor"> }, { </span><span class="hljs-constructor hljs-params">name</span><span class="hljs-constructor">: </span><span class="hljs-constructor" style="color:#a6e22e">&quot;hoge&quot;</span><span class="hljs-constructor"> })</span><span>); </span><span style="color:#75715e">// { id: &quot;1&quot;, name: &quot;hoge&quot; }</span></code></div><p class="h-2"></p></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">function</span><span> </span><span style="color:#f92672;font-weight:bold">mergeObject</span><span>&lt;</span><span style="color:#f92672;font-weight:bold">T</span><span>&gt;(</span><span style="color:#bf79db">objA</span><span>: T, </span><span style="color:#bf79db">objB</span><span>: T) {
</span><span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#f92672;font-weight:bold">Object</span><span class="hljs-selector-class">.assign</span><span>(objA, objB);
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">console</span><span class="hljs-selector-class">.log</span><span>(mergeObject({ </span><span style="color:#bf79db">id</span><span>: </span><span style="color:#a6e22e">&quot;1&quot;</span><span> }, { </span><span style="color:#bf79db">name</span><span>: </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span> })); </span><span style="color:#75715e">// { id: &quot;1&quot;, name: &quot;hoge&quot; }</span></code></div><p class="h-2"></p></pre>
<h3>制約をつける</h3>
<p>extends を使う。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>function mergeObject&lt;</span><span style="color:#a6e22e;font-weight:bold">T</span><span> </span><span style="color:#f92672;font-weight:bold">extends</span><span> </span><span class="hljs-class" style="color:#f92672;font-weight:bold">object</span><span class="hljs-class">, </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">U</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#f92672;font-weight:bold">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">object&gt;</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">objA: </span><span class="hljs-class hljs-params" style="color:#a6e22e;font-weight:bold">T</span><span class="hljs-class hljs-params">, objB: </span><span class="hljs-class hljs-params" style="color:#a6e22e;font-weight:bold">U</span><span class="hljs-class">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e;font-weight:bold">Object</span><span>.assign(objA, objB);
</span>}
<!-- -->
<span>console.log(mergeObject({ id: </span><span style="color:#a6e22e">&quot;1&quot;</span><span> }, { name: </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span> })); </span><span style="color:#75715e">// { id: &quot;1&quot;, name: &quot;hoge&quot; }</span></code></div><p class="h-2"></p></pre>
<h3>keyof</h3>
<p><code node="[object Object]">keyof</code> を使うことでオブジェクトのキーの制約を持たせる。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>function addConvert&lt;</span><span style="color:#a6e22e;font-weight:bold">T</span><span> </span><span style="color:#f92672;font-weight:bold">extends</span><span> </span><span class="hljs-class" style="color:#f92672;font-weight:bold">object</span><span class="hljs-class">, </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">U</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#f92672;font-weight:bold">extends</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">keyof</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">T&gt;</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">obj: </span><span class="hljs-class hljs-params" style="color:#a6e22e;font-weight:bold">T</span><span class="hljs-class hljs-params">, key: </span><span class="hljs-class hljs-params" style="color:#a6e22e;font-weight:bold">U</span><span class="hljs-class">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e">&quot;value: &quot;</span><span> + obj[key];
</span>}
<!-- -->
<span>console.log(addConvert({ id: </span><span style="color:#a6e22e">&quot;1&quot;</span><span>, name: </span><span style="color:#a6e22e">&quot;hoge&quot;</span><span> }, </span><span style="color:#a6e22e">&quot;name&quot;</span><span>)); </span><span style="color:#75715e">// value: hoge</span></code></div><p class="h-2"></p></pre>
<h3>ジェネリクスクラス</h3>
<p>クラスの後ろに <code node="[object Object]">&lt;&gt;</code> を付けて表現する。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>class DataStore&lt;T extends string | number&gt; {
</span><span>  private </span><span style="color:#f92672;font-weight:bold">data</span><span>: T[] = [];
</span>
<!-- -->  addItem(item: T) {
<span>    this.</span><span style="color:#f92672;font-weight:bold">data</span><span>.push(item);
</span>  }
<span>  </span><span style="color:#75715e">removeItem(item: T) {</span><span>
</span><span>    </span><span style="color:#f92672;font-weight:bold">if</span><span> (this.</span><span style="color:#f92672;font-weight:bold">data</span><span>.indexOf(item) === -</span><span class="hljs-number">1</span><span>) {
</span><span>      </span><span style="color:#f92672;font-weight:bold">return</span><span>;
</span>    }
<span>    this.</span><span style="color:#f92672;font-weight:bold">data</span><span>.splice(this.</span><span style="color:#f92672;font-weight:bold">data</span><span>.indexOf(item), </span><span class="hljs-number">1</span><span>);
</span>  }
<!-- -->  getItems() {
<span>    </span><span style="color:#f92672;font-weight:bold">return</span><span> [...this.</span><span style="color:#f92672;font-weight:bold">data</span><span>];
</span>  }
<!-- -->}
<!-- -->
<span>const stringDate = </span><span style="color:#f92672;font-weight:bold">new</span><span> DataStore&lt;string&gt;();
</span><span>const numberData = </span><span style="color:#f92672;font-weight:bold">new</span><span> DataStore&lt;number&gt;();
</span><span>stringDate.addItem(</span><span style="color:#a6e22e">&quot;data1&quot;</span><span>);
</span><span>stringDate.addItem(</span><span style="color:#a6e22e">&quot;data2&quot;</span><span>);
</span><span>numberData.addItem(</span><span class="hljs-number">1</span><span>);
</span><span>numberData.addItem(</span><span class="hljs-number">2</span><span>);
</span><span>stringDate.</span><span style="color:#75715e">removeItem(&quot;data2&quot;);</span><span>
</span><span>numberData.</span><span style="color:#75715e">removeItem(2);</span><span>
</span><span>console.</span><span style="color:#f92672;font-weight:bold">log</span><span>(stringDate.getItems()); // [ </span><span style="color:#a6e22e">&quot;data1&quot;</span><span> ]
</span><span>console.</span><span style="color:#f92672;font-weight:bold">log</span><span>(numberData.getItems()); // [ </span><span class="hljs-number">1</span><span> ]</span></code></div><p class="h-2"></p></pre>
<h3>Partial</h3>
<p>一時的に別の型に切り替えることができる。
<code node="[object Object]">Partial</code> で最終的にキャストされる型を指定する。
return するときはキャストが必要。</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#bf79db">interface Todo</span><span> {
</span><span></span><span style="color:#bf79db">  title</span><span>: string;
</span><span></span><span style="color:#bf79db">  desc</span><span>: string;
</span><span></span><span style="color:#bf79db">  date</span><span>: Date;
</span>}
<!-- -->
<span></span><span style="color:#bf79db">function createTodo</span><span>(
</span><span></span><span style="color:#bf79db">  title</span><span>: string,
</span><span></span><span style="color:#bf79db">  desc</span><span>: string,
</span><span></span><span style="color:#bf79db">  date</span><span>: Date,
</span>): Todo {
<span></span><span style="color:#bf79db">  let todo</span><span>: Partial&lt;Todo&gt; = {};
</span><span></span><span style="color:#bf79db">  todo</span><span>.title = title;
</span><span></span><span style="color:#bf79db">  todo</span><span>.desc = desc;
</span><span></span><span style="color:#bf79db">  todo</span><span>.date = date;
</span><span></span><span style="color:#bf79db">  return todo as Todo</span><span>;
</span>}
</code></div><p class="h-2"></p></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20211218151125","title":"TypeScript 勉強する","content":"\n## 型いろいろ\n\n### discriminated unions\n意味のある共通のプロパティをもたせて判別に使う。\n```ts\ninterface Bird {\n  flySpped: number;\n  type: \"bird\";\n}\n\ninterface Horse {\n  runSpeed: number;\n  type: \"horse\";\n}\n\ntype Animal = Bird | Horse;\n\nfunction animalSpeed(animal: Animal) {\n  switch (animal.type) {\n    case \"bird\":\n      console.log(animal.flySpped);\n      break;\n    case \"horse\":\n      console.log(animal.runSpeed);\n  }\n}\n```\n\n### 型キャスト\n文字列を数値に変換する場合、 `+` を変数の前につけるだけでよい。\n```ts\nconst a = \"1\";\nconst b = \"2\";\n\nconst result = +a + +b;\nconsole.log(result); // 3\n```\n\n前に `\u003c\u003e` で型を書くか、後ろに `as` を付けて型キャストできる。\n祖運剤が確定している場合は `!` を付けてエラーを回避できる。\n```ts\nconst input1 = \u003cHTMLInputElement\u003e document.getElementById(\"num\")!;\nconst input2 = document.getElementById(\"num\")! as HTMLInputElement;\n```\n\n### インデックス型\n```ts\ninterface ErrorInterface {\n  [prop: string]: string;\n}\n\nconst errorMessage: ErrorInterface = {\n  email: \"hoge\",\n  name: \"foo\",\n  message: \"fuga\",\n};\n\nconsole.log(errorMessage); // { email: \"hoge\", name: \"foo\", message: \"fuga\" }\n```\n\n### 関数オーバーロード\n受け取る型と返す型のパターンを関数の直前に記述する。\n```ts\ntype Input = string | number;\n\nfunction add(a: number, b: number): number;\nfunction add(a: string, b: number): string;\nfunction add(a: number, b: string): string;\nfunction add(a: string, b: string): string;\nfunction add(a: Input, b: Input) {\n  if (typeof a === \"string\" || typeof b === \"string\") {\n    return a.toString() + b.toString();\n  }\n  return a + b;\n}\n\nconsole.log(add(1, 2));\nconsole.log(add(\"1\", 2));\n```\n\n### オプショナルチェイン\n`?` を使ってオブジェクトに安全にアクセスする。\n```ts\nconst fetched = {\n  id: \"id1\",\n  name: \"hoge\",\n  job: {\n    title: \"Dev\",\n    desc: \"developer\",\n  },\n};\n\nconsole.log(fetched \u0026\u0026 fetched.job \u0026\u0026 fetched.job.title);\nconsole.log(fetched?.job?.title);\n```\n\n### null 合体演算子\n`null` か `undefined` のときのみ判定できる。\n```ts\nlet input = \"\";\nconst inputData = input ?? \"Default\";\nconsole.log(inputData);\n```\n\n## class\n```ts\nclass Person {\n  id: string;\n  name: string;\n\n  constructor(id: string, n: string) {\n    this.id = id;\n    this.name = n;\n  }\n  printData() {\n    console.log(`ID: ${this.id}; Name: ${this.name}`);\n  }\n}\n\nconst person = new Person(\"user1\", \"hoge\");\nperson.printData(); // ID: user1; Name: hoge\n```\n\nフィールドとコンストラクタはまとめる事ができる。やり方は `constractor` にアクセス修飾子を書くだけ。\n引数の名前はフィールド名にしないといけない。\n```ts\nclass Person {\n  constructor(public id: string, public name: string) {\n  }\n  printData() {\n    console.log(`ID: ${this.id}; Name: ${this.name}`);\n  }\n}\n\nconst person = new Person(\"user1\", \"hoge\");\nperson.printData(); // ID: user1; Name: hoge\n```\n\n`private` は外部からアクセスできない。 `readonly` は初期化後に変更ができない。\nまた `protected` はサブクラスからのみアクセス可能。\n```ts\nclass Person {\n  constructor(private readonly id: string, public name: string) {\n  }\n  printData() {\n    console.log(`ID: ${this.id}; Name: ${this.name}`);\n  }\n}\n\nconst person = new Person(\"user1\", \"hoge\");\nperson.printData(); // ID: user1; Name: hoge\n```\n\n### getter \u0026 setter\n`()` は不要。プロパティのように実行する。\n```ts\nclass Person {\n  private _report: string;\n\n  constructor(private readonly id: string, public name: string) {\n    this._report = \"\";\n  }\n\n  get report() {\n    return this._report;\n  }\n\n  set report(input: string) {\n    this._report = input;\n  }\n\n  printData() {\n    console.log(`ID: ${this.id}; Name: ${this.name}`);\n  }\n}\n\nconst person = new Person(\"user1\", \"hoge\");\nperson.printData(); // ID: user1; Name: hoge\n\nperson.report = \"report1\";\nconsole.log(person.report); // report1\n```\n\n### static メソッド \u0026 static プロパティ\nstatic メソッドや static プロパティには this でアクセスできない ( インスタンスからアクセスできない )。\n```ts\nclass Person {\n  static year = 2021;\n}\n\nconsole.log(Person.year); // 2021\n```\n\n### 抽象メソッド\n抽象メソッドは抽象クラス内でのみ使える。抽象メソッドは関数の構造のみを定義しておく。\n抽象クラスからはインスタンスを作れない。継承したサブクラスからはインスタンスを作れる。\n```ts\nabstract class Product {\n  constructor(protected readonly id: string, public name: string) {\n  }\n  abstract describe(): void;\n}\n\nclass Product1 extends Product {\n  constructor(id: string, name: string) {\n    super(id, name);\n  }\n\n  describe(): void {\n    console.log(`ID: ${this.id}; Name: ${this.name}`);\n  }\n}\n\nconst product1 = new Product1(\"1\", \"hoge\");\nproduct1.describe(); // ID: 1; Name: hoge\n```\n\n### シングルトンパターン\nオブジェクトを 1 つしか作らせたくない場合に使う。\n```ts\nclass Person {\n  private static instance: Person;\n\n  static getInstance() {\n    if (Person.instance) {\n      return this.instance;\n    }\n    this.instance = new Person();\n    return this.instance;\n  }\n}\n\nconst person = new Person();\n```\n\n### interface\nオブジェクトがどんな形であるか定義する。\ninterface とカスタムタイプの使い分けは、オブジェクトの構造を記述するときは interface を使う。\nカスタムタイプは union 型など様々な型を定義できる。 interface を使えばオブジェクトの構造を定義したいという意図を明確にできる。\nまた interface は readonly 継承もできる。\n```ts\ninterface Named {\n  readonly name: string\n}\n\ninterface Greetable extends Named {\n  hello(phrase: string): void\n}\n```\n\n### implements\n`implements` を使って実装する。\n抽象クラスとの違いは、 interface では値や実装を持たない。抽象クラスは値や実装を混在させる事ができる。\n```ts\ninterface PersonInterface {\n  id: string;\n  name: string;\n  describe(): void;\n}\n\nclass Person implements PersonInterface {\n  id: string;\n  name: string;\n\n  constructor(id: string, n: string) {\n    this.id = id;\n    this.name = n;\n  }\n\n  describe(): void {\n    console.log(`ID: ${this.id}; Name: ${this.name}`);\n  }\n}\n\nconst person = new Person(\"1\", \"hoge\");\nperson.describe(); // ID: 1; Name: hoge\n```\n\n## ジェネリクス\n関数の後ろに `\u003c\u003e` を付けて表現する。\n```ts\nfunction mergeObject(objA: object, objB: object) {\n  return Object.assign(objA, objB);\n}\n\nconsole.log(mergeObject({ id: \"1\" }, { name: \"hoge\" })); // { id: \"1\", name: \"hoge\" }\n```\n\n```ts\nfunction mergeObject\u003cT\u003e(objA: T, objB: T) {\n  return Object.assign(objA, objB);\n}\n\nconsole.log(mergeObject({ id: \"1\" }, { name: \"hoge\" })); // { id: \"1\", name: \"hoge\" }\n```\n\n### 制約をつける\nextends を使う。\n```ts\nfunction mergeObject\u003cT extends object, U extends object\u003e(objA: T, objB: U) {\n  return Object.assign(objA, objB);\n}\n\nconsole.log(mergeObject({ id: \"1\" }, { name: \"hoge\" })); // { id: \"1\", name: \"hoge\" }\n```\n\n### keyof\n`keyof` を使うことでオブジェクトのキーの制約を持たせる。\n```ts\nfunction addConvert\u003cT extends object, U extends keyof T\u003e(obj: T, key: U) {\n  return \"value: \" + obj[key];\n}\n\nconsole.log(addConvert({ id: \"1\", name: \"hoge\" }, \"name\")); // value: hoge\n```\n\n### ジェネリクスクラス\nクラスの後ろに `\u003c\u003e` を付けて表現する。\n```ts\nclass DataStore\u003cT extends string | number\u003e {\n  private data: T[] = [];\n\n  addItem(item: T) {\n    this.data.push(item);\n  }\n  removeItem(item: T) {\n    if (this.data.indexOf(item) === -1) {\n      return;\n    }\n    this.data.splice(this.data.indexOf(item), 1);\n  }\n  getItems() {\n    return [...this.data];\n  }\n}\n\nconst stringDate = new DataStore\u003cstring\u003e();\nconst numberData = new DataStore\u003cnumber\u003e();\nstringDate.addItem(\"data1\");\nstringDate.addItem(\"data2\");\nnumberData.addItem(1);\nnumberData.addItem(2);\nstringDate.removeItem(\"data2\");\nnumberData.removeItem(2);\nconsole.log(stringDate.getItems()); // [ \"data1\" ]\nconsole.log(numberData.getItems()); // [ 1 ]\n```\n\n### Partial\n一時的に別の型に切り替えることができる。\n`Partial` で最終的にキャストされる型を指定する。\nreturn するときはキャストが必要。\n```ts\ninterface Todo {\n  title: string;\n  desc: string;\n  date: Date;\n}\n\nfunction createTodo(\n  title: string,\n  desc: string,\n  date: Date,\n): Todo {\n  let todo: Partial\u003cTodo\u003e = {};\n  todo.title = title;\n  todo.desc = desc;\n  todo.date = date;\n  return todo as Todo;\n}\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20211218151125"},"buildId":"_DJ56jee9Jq5wqHN8NeJz","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>