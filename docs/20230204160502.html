<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a58c9bb1e05a64ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a58c9bb1e05a64ba.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-d38be8d96a62f950.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-4c0bfde4693f048b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2d6bf7b3192a8752.js" defer=""></script><script src="/_next/static/chunks/996-96c017f2628f3a7d.js" defer=""></script><script src="/_next/static/chunks/238-6c9572b4a47f3e2a.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-11871a0dd3bce32a.js" defer=""></script><script src="/_next/static/WO88-BZ4H50Eu4wzY2ZqE/_buildManifest.js" defer=""></script><script src="/_next/static/WO88-BZ4H50Eu4wzY2ZqE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><a style="text-decoration:none" href="/"><div style="color:black;font-size:22px;cursor:pointer">MyDocs</div></a></div><p></p><h1><b># <!-- -->github action で日付を扱う</b></h1><pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">yaml</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-yaml" style="white-space:pre"><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">test</span><span>
</span>
<span></span><span class="hljs-attr">on:</span><span> [</span><span style="color:#a6e22e">workflow_dispatch</span><span>]
</span>
<span></span><span class="hljs-attr">jobs:</span><span>
</span><span>  </span><span class="hljs-attr">echo-date:</span><span>
</span><span>    </span><span class="hljs-attr">runs-on:</span><span> </span><span style="color:#a6e22e">ubuntu-latest</span><span>
</span>    
<span>    </span><span class="hljs-attr">steps:</span><span>
</span><span>      </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">uses:</span><span> </span><span style="color:#a6e22e">actions/checkout@v3</span><span>
</span>
<span>      </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">set</span><span> </span><span style="color:#a6e22e">date</span><span>
</span><span>        </span><span class="hljs-attr">env:</span><span> </span><span style="color:#a6e22e">&quot;Asia/Tokyo&quot;</span><span>
</span><span>        </span><span class="hljs-attr">run:</span><span> </span><span style="color:#a6e22e">|
</span><span style="color:#a6e22e">          echo &quot;CURRENT_DATETIME=$(date +&#x27;%Y-%m-%d&#x27;)&quot; &gt;&gt; $GITHUB_ENV
</span><span style="color:#a6e22e"></span><span>
</span><span>      </span><span style="color:#a6e22e">-</span><span> </span><span class="hljs-attr">name:</span><span> </span><span style="color:#a6e22e">get</span><span> </span><span style="color:#a6e22e">date</span><span>
</span><span>        </span><span class="hljs-attr">run:</span><span> </span><span style="color:#a6e22e">|</span><span>
</span><span>          </span><span style="color:#a6e22e">echo</span><span> </span><span style="color:#a6e22e">${{</span><span> </span><span style="color:#a6e22e">env.CURRENT_DATETIME</span><span> </span><span style="color:#a6e22e">}}</span></code></pre></div></pre>
<p>run の中で環境変数の <code>CURRENT_DATETIME</code> に設定することで、以降は <code>${{ env.CURRENT_DATETIME }}</code> で使うことができる。</p></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"contents":{"id":"20230204160502","title":"github action で日付を扱う","body":"\n```yaml\nname: test\n\non: [workflow_dispatch]\n\njobs:\n  echo-date:\n    runs-on: ubuntu-latest\n    \n    steps:\n      - uses: actions/checkout@v3\n\n      - name: set date\n        env: \"Asia/Tokyo\"\n        run: |\n          echo \"CURRENT_DATETIME=$(date +'%Y-%m-%d')\" \u003e\u003e $GITHUB_ENV\n\n      - name: get date\n        run: |\n          echo ${{ env.CURRENT_DATETIME }}\n```\n\nrun の中で環境変数の `CURRENT_DATETIME` に設定することで、以降は `${{ env.CURRENT_DATETIME }}` で使うことができる。\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20230204160502"},"buildId":"WO88-BZ4H50Eu4wzY2ZqE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>