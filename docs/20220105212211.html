<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ec23c38ee66c087d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec23c38ee66c087d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f65e66e62fc5ca80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c8629aafccf90c37.js" defer=""></script><script src="/_next/static/chunks/996-9e3c12b77542c098.js" defer=""></script><script src="/_next/static/chunks/711-7d68ff1249d1d375.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-2063ba6ca0b41b92.js" defer=""></script><script src="/_next/static/BMZM76PMXFP8NyXSk7UGx/_buildManifest.js" defer=""></script><script src="/_next/static/BMZM76PMXFP8NyXSk7UGx/_ssgManifest.js" defer=""></script><script src="/_next/static/BMZM76PMXFP8NyXSk7UGx/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-10"><h1><b># <!-- -->TypeScript の Utility Types</b></h1><h2>Partial<!-- -->&lt;Type&gt;</h2>
<p><code>Partial&lt;Type&gt;</code> で指定した型に一時的に切り替えることができる。値を返すときはキャストする必要がある。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> Todo {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  desc: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  date: </span><span style="color:#a6e22e">Date</span><span>;
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">createTodo</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">
</span><span class="hljs-function hljs-params">  title: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">  desc: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">  date: </span><span class="hljs-function hljs-params" style="color:#a6e22e">Date</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params"></span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Todo</span><span class="hljs-function"> </span><span>{
</span><span>  </span><span style="color:#75715e">// let todo: Todo = {} // ここでのエラーを防ぐ</span><span>
</span><span>  </span><span style="color:#f92672;font-weight:bold">let</span><span> todo: Partial&lt;Todo&gt; = {};
</span>  todo.title = title;
<!-- -->  todo.desc = desc;
<!-- -->  todo.date = date;
<span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> todo </span><span style="color:#f92672;font-weight:bold">as</span><span> Todo;
</span>}</code></pre></div></pre>
<h2>Required<!-- -->&lt;Type&gt;</h2>
<p>パラメータが欠損したらエラー。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> Todo {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  desc: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  date: </span><span style="color:#a6e22e">Date</span><span>;
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">createTodo</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">
</span><span class="hljs-function hljs-params">  title: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">  desc: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params">  date: </span><span class="hljs-function hljs-params" style="color:#a6e22e">Date</span><span class="hljs-function hljs-params">,
</span><span class="hljs-function hljs-params"></span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">Todo</span><span class="hljs-function"> </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">const</span><span> todo: Required&lt;Todo&gt; = {
</span><span>    </span><span class="hljs-attr">title</span><span>: title,
</span><span>    </span><span class="hljs-attr">desc</span><span>: desc,
</span><span>    </span><span class="hljs-attr">date</span><span>: date,
</span>  };
<!-- -->
<span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> todo;
</span>}</code></pre></div></pre>
<h2>Readonly<!-- -->&lt;Type&gt;</h2>
<p>初期化したあとにパラメータを変更できないようにする。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> Todo {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> todo: Readonly&lt;Todo&gt; = {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">&quot;create&quot;</span><span>,
</span>};
<!-- -->
<span></span><span style="color:#75715e">// todo.title = &quot;update&quot;</span></code></pre></div></pre>
<h2>Record&lt;Keys, Type&gt;</h2>
<p>Key とその型を指定できる。辞書として使いたい場合に適している。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> CatInfo {
</span><span>  </span><span class="hljs-attr">age</span><span>: </span><span style="color:#a6e22e">number</span><span>;
</span><span>  breed: </span><span style="color:#a6e22e">string</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> CatName = </span><span style="color:#a6e22e">&quot;miffy&quot;</span><span> | </span><span style="color:#a6e22e">&quot;boris&quot;</span><span> | </span><span style="color:#a6e22e">&quot;mordred&quot;</span><span>;
</span>
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> cats: Record&lt;CatName, CatInfo&gt; = {
</span><span>  </span><span class="hljs-attr">miffy</span><span>: { </span><span class="hljs-attr">age</span><span>: </span><span class="hljs-number">10</span><span>, </span><span class="hljs-attr">breed</span><span>: </span><span style="color:#a6e22e">&quot;Persian&quot;</span><span> },
</span><span>  </span><span class="hljs-attr">boris</span><span>: { </span><span class="hljs-attr">age</span><span>: </span><span class="hljs-number">5</span><span>, </span><span class="hljs-attr">breed</span><span>: </span><span style="color:#a6e22e">&quot;Maine Coon&quot;</span><span> },
</span><span>  </span><span class="hljs-attr">mordred</span><span>: { </span><span class="hljs-attr">age</span><span>: </span><span class="hljs-number">16</span><span>, </span><span class="hljs-attr">breed</span><span>: </span><span style="color:#a6e22e">&quot;British Shorthair&quot;</span><span> },
</span>};
<!-- -->
<span></span><span style="color:#a6e22e">console</span><span>.log(cats);
</span><span></span><span style="color:#75715e">// {</span><span>
</span><span></span><span style="color:#75715e">//   miffy: { age: 10, breed: &quot;Persian&quot; },</span><span>
</span><span></span><span style="color:#75715e">//   boris: { age: 5, breed: &quot;Maine Coon&quot; },</span><span>
</span><span></span><span style="color:#75715e">//   mordred: { age: 16, breed: &quot;British Shorthair&quot; }</span><span>
</span><span></span><span style="color:#75715e">// }</span><span>
</span>
<span></span><span style="color:#a6e22e">console</span><span>.log(cats.boris);
</span><span></span><span style="color:#75715e">// { age: 5, breed: &quot;Maine Coon&quot; }</span></code></pre></div></pre>
<h2>Pick&lt;Type, Keys&gt;</h2>
<p>keys に指定したプロパティの型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> Todo {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  desc: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  completed: </span><span style="color:#a6e22e">boolean</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> TodoPreview = Pick&lt;Todo, </span><span style="color:#a6e22e">&quot;title&quot;</span><span> | </span><span style="color:#a6e22e">&quot;completed&quot;</span><span>&gt;;
</span>
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> todo: TodoPreview = {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">&quot;Clean room&quot;</span><span>,
</span><span>  </span><span class="hljs-attr">completed</span><span>: </span><span style="color:#f92672;font-weight:bold">false</span><span>,
</span>};</code></pre></div></pre>
<h2>Omit&lt;Type, Keys&gt;</h2>
<p>keys に指定した以外のプロパティの型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> Todo {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  desc: </span><span style="color:#a6e22e">string</span><span>;
</span><span>  completed: </span><span style="color:#a6e22e">boolean</span><span>;
</span><span>  createdAt: </span><span style="color:#a6e22e">number</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> TodoPreview = Omit&lt;Todo, </span><span style="color:#a6e22e">&quot;desc&quot;</span><span>&gt;;
</span>
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> todo: TodoPreview = {
</span><span>  </span><span class="hljs-attr">title</span><span>: </span><span style="color:#a6e22e">&quot;Clean room&quot;</span><span>,
</span><span>  </span><span class="hljs-attr">completed</span><span>: </span><span style="color:#f92672;font-weight:bold">false</span><span>,
</span><span>  </span><span class="hljs-attr">createdAt</span><span>: </span><span class="hljs-number">1000</span><span>,
</span>};</code></pre></div></pre>
<h2>Exclude&lt;Type, ExcludedUnion&gt;</h2>
<p><code>Exclude&lt;T, U&gt;</code> T から U を除いた型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> T0 = Exclude&lt;</span><span style="color:#a6e22e">&quot;a&quot;</span><span> | </span><span style="color:#a6e22e">&quot;b&quot;</span><span> | </span><span style="color:#a6e22e">&quot;c&quot;</span><span>, </span><span style="color:#a6e22e">&quot;a&quot;</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T0 = &quot;b&quot; | &quot;c&quot;</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = Exclude&lt;</span><span style="color:#a6e22e">&quot;a&quot;</span><span> | </span><span style="color:#a6e22e">&quot;b&quot;</span><span> | </span><span style="color:#a6e22e">&quot;c&quot;</span><span>, </span><span style="color:#a6e22e">&quot;a&quot;</span><span> | </span><span style="color:#a6e22e">&quot;b&quot;</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T1 = &quot;c&quot;</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T2 = Exclude&lt;</span><span style="color:#a6e22e">string</span><span> | </span><span style="color:#a6e22e">number</span><span> | (</span><span class="hljs-function">() =&gt;</span><span> </span><span style="color:#a6e22e">void</span><span>), </span><span style="color:#a6e22e">Function</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T2 = string | number</span></code></pre></div></pre>
<h2>Extract&lt;Type, Union&gt;</h2>
<p><code>Extract&lt;T, U&gt;</code> T と U のユニオン型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> T0 = Extract&lt;</span><span style="color:#a6e22e">&quot;a&quot;</span><span> | </span><span style="color:#a6e22e">&quot;b&quot;</span><span> | </span><span style="color:#a6e22e">&quot;c&quot;</span><span>, </span><span style="color:#a6e22e">&quot;a&quot;</span><span> | </span><span style="color:#a6e22e">&quot;f&quot;</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T0 = &quot;a&quot;</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = Extract&lt;</span><span style="color:#a6e22e">string</span><span> | </span><span style="color:#a6e22e">number</span><span> | (</span><span class="hljs-function">() =&gt;</span><span> </span><span style="color:#a6e22e">void</span><span>), </span><span style="color:#a6e22e">Function</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T1 = () =&gt; void</span></code></pre></div></pre>
<h2>NonNullable<!-- -->&lt;Type&gt;</h2>
<p><code>null</code> と <code>undefined</code> を除いた型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> T0 = NonNullable&lt;</span><span style="color:#a6e22e">string</span><span> | </span><span style="color:#a6e22e">number</span><span> | </span><span style="color:#f92672;font-weight:bold">undefined</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T0 = string | number</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = NonNullable&lt;</span><span style="color:#a6e22e">string</span><span>[] | </span><span style="color:#f92672;font-weight:bold">null</span><span> | </span><span style="color:#f92672;font-weight:bold">undefined</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T1 = string[]</span></code></pre></div></pre>
<h2>Parameters<!-- -->&lt;Type&gt;</h2>
<p><code>Parameters&lt;T&gt;</code> では T は関数型の必要がある。 T が関数のとき T の引数一覧をタプル型で作成する。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">declare</span><span> </span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">f1</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">arg: { a: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function hljs-params">; b: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params"> }</span><span class="hljs-function">): </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">void</span><span>;
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T0 = Parameters&lt;</span><span class="hljs-function">() =&gt;</span><span> </span><span style="color:#a6e22e">string</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T0 = []</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = Parameters&lt;</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">s: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">) =&gt;</span><span> </span><span style="color:#a6e22e">void</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T1 = [s: string]</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T2 = Parameters&lt;&lt;T&gt;</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">arg: T</span><span class="hljs-function">) =&gt;</span><span> T&gt;;
</span><span></span><span style="color:#75715e">// type T2 = [arg: unknown]</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T3 = Parameters&lt;</span><span style="color:#f92672;font-weight:bold">typeof</span><span> f1&gt;;
</span><span></span><span style="color:#75715e">// type T3 = [arg: {</span><span>
</span><span></span><span style="color:#75715e">//   a: number;</span><span>
</span><span></span><span style="color:#75715e">//   b: string;</span><span>
</span><span></span><span style="color:#75715e">// }]</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> F = </span><span class="hljs-function">(</span><span class="hljs-function hljs-params">arg1: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function hljs-params">, arg2: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function">) =&gt;</span><span> </span><span style="color:#a6e22e">string</span><span>;
</span><span></span><span style="color:#f92672;font-weight:bold">type</span><span> F1 = Parameters&lt;F&gt;;
</span><span></span><span style="color:#75715e">// type F1 = [arg1: string, arg2: number]</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> v: F1 = [</span><span style="color:#a6e22e">&quot;a&quot;</span><span>, </span><span class="hljs-number">123</span><span>];</span></code></pre></div></pre>
<h2>ConstructorParameters<!-- -->&lt;Type&gt;</h2>
<p>class のコンストラクタ関数の引数の型からタプル型を作成する。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">type</span><span> T0 = ConstructorParameters&lt;ErrorConstructor&gt;;
</span><span></span><span style="color:#75715e">// type T0 = [message?: string]</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = ConstructorParameters&lt;FunctionConstructor&gt;;
</span><span></span><span style="color:#75715e">// type T1 = string[]</span><span>
</span>
<span></span><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Person</span><span class="hljs-class"> </span><span>{
</span><span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">constructor</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> id: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function hljs-params">, </span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">public</span><span class="hljs-function hljs-params"> name: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">)</span><span> {}
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> P = ConstructorParameters&lt;</span><span style="color:#f92672;font-weight:bold">typeof</span><span> Person&gt;;
</span><span></span><span style="color:#75715e">// type P = [id: number, name: string]</span></code></pre></div></pre>
<h2>ReturnType<!-- -->&lt;Type&gt;</h2>
<p>戻り値からなる型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">declare</span><span> </span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">f1</span><span class="hljs-function">(</span><span class="hljs-function">): </span><span>{ a: </span><span style="color:#a6e22e">number</span><span>; b: </span><span style="color:#a6e22e">string</span><span> };
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T0 = ReturnType&lt;</span><span class="hljs-function">() =&gt;</span><span> </span><span style="color:#a6e22e">string</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T0 = string</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = ReturnType&lt;</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">s: </span><span class="hljs-function hljs-params" style="color:#a6e22e">string</span><span class="hljs-function">) =&gt;</span><span> </span><span style="color:#a6e22e">void</span><span>&gt;;
</span><span></span><span style="color:#75715e">// type T1 = void</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T2 = ReturnType&lt;&lt;T&gt;</span><span class="hljs-function">() =&gt;</span><span> T&gt;;
</span><span></span><span style="color:#75715e">// type T2 = unknown</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T3 = ReturnType&lt;&lt;T </span><span style="color:#f92672;font-weight:bold">extends</span><span> U, U </span><span style="color:#f92672;font-weight:bold">extends</span><span> </span><span style="color:#a6e22e">number</span><span>[]&gt;</span><span class="hljs-function">() =&gt;</span><span> T&gt;;
</span><span></span><span style="color:#75715e">// type T3 = number[]</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T4 = ReturnType&lt;</span><span style="color:#f92672;font-weight:bold">typeof</span><span> f1&gt;;
</span><span></span><span style="color:#75715e">// type T4 = {</span><span>
</span><span></span><span style="color:#75715e">//   a: number;</span><span>
</span><span></span><span style="color:#75715e">//   b: string;</span><span>
</span><span></span><span style="color:#75715e">// }</span></code></pre></div></pre>
<h2>InstanceType<!-- -->&lt;Type&gt;</h2>
<p>コンストラクタの戻り値からなる型。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">C</span><span class="hljs-class"> </span><span>{
</span><span>  x = </span><span class="hljs-number">0</span><span>;
</span><span>  y = </span><span class="hljs-number">0</span><span>;
</span>}
<!-- -->
<span></span><span class="hljs-class" style="color:#f92672;font-weight:bold">class</span><span class="hljs-class"> </span><span class="hljs-class" style="color:#a6e22e;font-weight:bold">Foo</span><span class="hljs-class"> </span><span>{}
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T0 = InstanceType&lt;</span><span style="color:#f92672;font-weight:bold">typeof</span><span> C&gt;;
</span><span></span><span style="color:#75715e">// type T0 = C</span><span>
</span>
<span></span><span style="color:#f92672;font-weight:bold">type</span><span> T1 = InstanceType&lt;</span><span style="color:#f92672;font-weight:bold">typeof</span><span> Foo&gt;;
</span><span></span><span style="color:#75715e">// type T1 = Foo</span></code></pre></div></pre>
<h2>ThisParameterType<!-- -->&lt;Type&gt;</h2>
<p>関数型の this パラメータの型を抽出した型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">toHex</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#a6e22e">this</span><span class="hljs-function hljs-params">: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e">this</span><span>.toString();
</span>}
<!-- -->
<span></span><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">numberToString</span><span class="hljs-function">(</span><span class="hljs-function hljs-params">n: ThisParameterType&lt;</span><span class="hljs-function hljs-params" style="color:#f92672;font-weight:bold">typeof</span><span class="hljs-function hljs-params"> toHex&gt;</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> toHex.apply(n);
</span>}
<!-- -->
<span></span><span style="color:#a6e22e">console</span><span>.log(numberToString(</span><span class="hljs-number">123</span><span>));
</span><span></span><span style="color:#75715e">// 123</span></code></pre></div></pre>
<h2>OmitThisParameter<!-- -->&lt;Type&gt;</h2>
<p>関数型の this パラメータの型を除いた型になる。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span class="hljs-function" style="color:#f92672;font-weight:bold">function</span><span class="hljs-function"> </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">toHex</span><span class="hljs-function">(</span><span class="hljs-function hljs-params" style="color:#a6e22e">this</span><span class="hljs-function hljs-params">: </span><span class="hljs-function hljs-params" style="color:#a6e22e">number</span><span class="hljs-function">) </span><span>{
</span><span>  </span><span style="color:#f92672;font-weight:bold">return</span><span> </span><span style="color:#a6e22e">this</span><span>.toString();
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> fiveToHex: OmitThisParameter&lt;</span><span style="color:#f92672;font-weight:bold">typeof</span><span> toHex&gt; = toHex.bind(</span><span class="hljs-number">123</span><span>);
</span>
<span></span><span style="color:#a6e22e">console</span><span>.log(fiveToHex());
</span><span></span><span style="color:#75715e">// 123</span></code></pre></div></pre>
<h2>ThisType<!-- -->&lt;Type&gt;</h2>
<p>オブジェクト内の this の型を正しい型にする。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi hkjzUR">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">interface</span><span> User {
</span><span>  </span><span class="hljs-attr">name</span><span>: </span><span style="color:#a6e22e">string</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">interface</span><span> Greeting {
</span><span>  hello(): </span><span style="color:#a6e22e">void</span><span>;
</span>}
<!-- -->
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> user: Greeting &amp; ThisType&lt;User&gt; = {
</span><span>  </span><span class="hljs-function" style="color:#a6e22e;font-weight:bold">hello</span><span class="hljs-function">(</span><span class="hljs-function">)</span><span> {
</span><span>    </span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">`Hello </span><span style="color:#a6e22e">${</span><span style="color:#a6e22e">this</span><span style="color:#a6e22e">.name}</span><span style="color:#a6e22e">`</span><span>);
</span>  },
<!-- -->};</code></pre></div></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20220105212211","title":"TypeScript の Utility Types","body":"\n## Partial\u003cType\u003e\n`Partial\u003cType\u003e` で指定した型に一時的に切り替えることができる。値を返すときはキャストする必要がある。\n```ts\ninterface Todo {\n  title: string;\n  desc: string;\n  date: Date;\n}\n\nfunction createTodo(\n  title: string,\n  desc: string,\n  date: Date,\n): Todo {\n  // let todo: Todo = {} // ここでのエラーを防ぐ\n  let todo: Partial\u003cTodo\u003e = {};\n  todo.title = title;\n  todo.desc = desc;\n  todo.date = date;\n  return todo as Todo;\n}\n```\n\n## Required\u003cType\u003e\nパラメータが欠損したらエラー。\n```ts\ninterface Todo {\n  title: string;\n  desc: string;\n  date: Date;\n}\n\nfunction createTodo(\n  title: string,\n  desc: string,\n  date: Date,\n): Todo {\n  const todo: Required\u003cTodo\u003e = {\n    title: title,\n    desc: desc,\n    date: date,\n  };\n\n  return todo;\n}\n```\n\n## Readonly\u003cType\u003e\n初期化したあとにパラメータを変更できないようにする。\n```ts\ninterface Todo {\n  title: string;\n}\n\nconst todo: Readonly\u003cTodo\u003e = {\n  title: \"create\",\n};\n\n// todo.title = \"update\"\n```\n\n## Record\u003cKeys, Type\u003e\nKey とその型を指定できる。辞書として使いたい場合に適している。\n```ts\ninterface CatInfo {\n  age: number;\n  breed: string;\n}\n\ntype CatName = \"miffy\" | \"boris\" | \"mordred\";\n\nconst cats: Record\u003cCatName, CatInfo\u003e = {\n  miffy: { age: 10, breed: \"Persian\" },\n  boris: { age: 5, breed: \"Maine Coon\" },\n  mordred: { age: 16, breed: \"British Shorthair\" },\n};\n\nconsole.log(cats);\n// {\n//   miffy: { age: 10, breed: \"Persian\" },\n//   boris: { age: 5, breed: \"Maine Coon\" },\n//   mordred: { age: 16, breed: \"British Shorthair\" }\n// }\n\nconsole.log(cats.boris);\n// { age: 5, breed: \"Maine Coon\" }\n```\n\n## Pick\u003cType, Keys\u003e\nkeys に指定したプロパティの型になる。\n```ts\ninterface Todo {\n  title: string;\n  desc: string;\n  completed: boolean;\n}\n\ntype TodoPreview = Pick\u003cTodo, \"title\" | \"completed\"\u003e;\n\nconst todo: TodoPreview = {\n  title: \"Clean room\",\n  completed: false,\n};\n```\n\n## Omit\u003cType, Keys\u003e\nkeys に指定した以外のプロパティの型になる。\n```ts\ninterface Todo {\n  title: string;\n  desc: string;\n  completed: boolean;\n  createdAt: number;\n}\n\ntype TodoPreview = Omit\u003cTodo, \"desc\"\u003e;\n\nconst todo: TodoPreview = {\n  title: \"Clean room\",\n  completed: false,\n  createdAt: 1000,\n};\n```\n\n## Exclude\u003cType, ExcludedUnion\u003e\n`Exclude\u003cT, U\u003e` T から U を除いた型になる。\n```ts\ntype T0 = Exclude\u003c\"a\" | \"b\" | \"c\", \"a\"\u003e;\n// type T0 = \"b\" | \"c\"\n\ntype T1 = Exclude\u003c\"a\" | \"b\" | \"c\", \"a\" | \"b\"\u003e;\n// type T1 = \"c\"\n\ntype T2 = Exclude\u003cstring | number | (() =\u003e void), Function\u003e;\n// type T2 = string | number\n```\n\n## Extract\u003cType, Union\u003e\n`Extract\u003cT, U\u003e` T と U のユニオン型になる。\n```ts\ntype T0 = Extract\u003c\"a\" | \"b\" | \"c\", \"a\" | \"f\"\u003e;\n// type T0 = \"a\"\n\ntype T1 = Extract\u003cstring | number | (() =\u003e void), Function\u003e;\n// type T1 = () =\u003e void\n```\n\n## NonNullable\u003cType\u003e\n`null` と `undefined` を除いた型になる。\n```ts\ntype T0 = NonNullable\u003cstring | number | undefined\u003e;\n// type T0 = string | number\n\ntype T1 = NonNullable\u003cstring[] | null | undefined\u003e;\n// type T1 = string[]\n```\n\n## Parameters\u003cType\u003e\n`Parameters\u003cT\u003e` では T は関数型の必要がある。 T が関数のとき T の引数一覧をタプル型で作成する。\n```ts\ndeclare function f1(arg: { a: number; b: string }): void;\n\ntype T0 = Parameters\u003c() =\u003e string\u003e;\n// type T0 = []\n\ntype T1 = Parameters\u003c(s: string) =\u003e void\u003e;\n// type T1 = [s: string]\n\ntype T2 = Parameters\u003c\u003cT\u003e(arg: T) =\u003e T\u003e;\n// type T2 = [arg: unknown]\n\ntype T3 = Parameters\u003ctypeof f1\u003e;\n// type T3 = [arg: {\n//   a: number;\n//   b: string;\n// }]\n\ntype F = (arg1: string, arg2: number) =\u003e string;\ntype F1 = Parameters\u003cF\u003e;\n// type F1 = [arg1: string, arg2: number]\n\nconst v: F1 = [\"a\", 123];\n```\n\n## ConstructorParameters\u003cType\u003e\nclass のコンストラクタ関数の引数の型からタプル型を作成する。\n```ts\ntype T0 = ConstructorParameters\u003cErrorConstructor\u003e;\n// type T0 = [message?: string]\n\ntype T1 = ConstructorParameters\u003cFunctionConstructor\u003e;\n// type T1 = string[]\n\nclass Person {\n  constructor(public id: number, public name: string) {}\n}\n\ntype P = ConstructorParameters\u003ctypeof Person\u003e;\n// type P = [id: number, name: string]\n```\n\n## ReturnType\u003cType\u003e\n戻り値からなる型になる。\n```ts\ndeclare function f1(): { a: number; b: string };\n\ntype T0 = ReturnType\u003c() =\u003e string\u003e;\n// type T0 = string\n\ntype T1 = ReturnType\u003c(s: string) =\u003e void\u003e;\n// type T1 = void\n\ntype T2 = ReturnType\u003c\u003cT\u003e() =\u003e T\u003e;\n// type T2 = unknown\n\ntype T3 = ReturnType\u003c\u003cT extends U, U extends number[]\u003e() =\u003e T\u003e;\n// type T3 = number[]\n\ntype T4 = ReturnType\u003ctypeof f1\u003e;\n// type T4 = {\n//   a: number;\n//   b: string;\n// }\n```\n\n## InstanceType\u003cType\u003e\nコンストラクタの戻り値からなる型。\n```ts\nclass C {\n  x = 0;\n  y = 0;\n}\n\nclass Foo {}\n\ntype T0 = InstanceType\u003ctypeof C\u003e;\n// type T0 = C\n\ntype T1 = InstanceType\u003ctypeof Foo\u003e;\n// type T1 = Foo\n```\n\n## ThisParameterType\u003cType\u003e\n関数型の this パラメータの型を抽出した型になる。\n```ts\nfunction toHex(this: number) {\n  return this.toString();\n}\n\nfunction numberToString(n: ThisParameterType\u003ctypeof toHex\u003e) {\n  return toHex.apply(n);\n}\n\nconsole.log(numberToString(123));\n// 123\n```\n\n## OmitThisParameter\u003cType\u003e\n関数型の this パラメータの型を除いた型になる。\n```ts\nfunction toHex(this: number) {\n  return this.toString();\n}\n\nconst fiveToHex: OmitThisParameter\u003ctypeof toHex\u003e = toHex.bind(123);\n\nconsole.log(fiveToHex());\n// 123\n```\n\n## ThisType\u003cType\u003e\nオブジェクト内の this の型を正しい型にする。\n```ts\ninterface User {\n  name: string;\n}\n\ninterface Greeting {\n  hello(): void;\n}\n\nconst user: Greeting \u0026 ThisType\u003cUser\u003e = {\n  hello() {\n    console.log(`Hello ${this.name}`);\n  },\n};\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20220105212211"},"buildId":"BMZM76PMXFP8NyXSk7UGx","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>