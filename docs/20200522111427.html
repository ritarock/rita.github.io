<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/ec23c38ee66c087d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ec23c38ee66c087d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f65e66e62fc5ca80.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c8629aafccf90c37.js" defer=""></script><script src="/_next/static/chunks/996-9e3c12b77542c098.js" defer=""></script><script src="/_next/static/chunks/711-7d68ff1249d1d375.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-4b3cef17c5260f19.js" defer=""></script><script src="/_next/static/_Oeh_r-o8XR9F2QkwcIjt/_buildManifest.js" defer=""></script><script src="/_next/static/_Oeh_r-o8XR9F2QkwcIjt/_ssgManifest.js" defer=""></script><script src="/_next/static/_Oeh_r-o8XR9F2QkwcIjt/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-10"><h1><b># <!-- -->deno を触ってみる</b></h1><h2>通常の実行</h2>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">&quot;Wellcome to Deno&quot;</span><span>);</span></code></pre></div></pre>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> deno run hello.ts</span><span>
</span>Wellcome to Deno</code></pre></div></pre>
<h2>http request があるとき</h2>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">const</span><span> url = Deno.args[</span><span class="hljs-number">0</span><span>];
</span><span></span><span style="color:#f92672;font-weight:bold">const</span><span> res = </span><span style="color:#f92672;font-weight:bold">await</span><span> fetch(url);
</span>
<span></span><span style="color:#f92672;font-weight:bold">const</span><span> body = </span><span style="color:#f92672;font-weight:bold">new</span><span> </span><span style="color:#a6e22e">Uint8Array</span><span>(</span><span style="color:#f92672;font-weight:bold">await</span><span> res.arrayBuffer());
</span><span></span><span style="color:#f92672;font-weight:bold">await</span><span> Deno.stdout.write(body);</span></code></pre></div></pre>
<p><code>--allow-net</code> をつける。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps</span></code></pre></div></pre>
<h3>コマンドラインで引数を渡す</h3>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#a6e22e">console</span><span>.log(Deno.args)</span></code></pre></div></pre>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> deno run args.ts 1 2 3</span><span>
</span>[ &quot;1&quot;, &quot;2&quot;, &quot;3&quot; ]</code></pre></div></pre>
<h2>ファイル読み込み</h2>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">for</span><span> (</span><span style="color:#f92672;font-weight:bold">let</span><span> i = </span><span class="hljs-number">0</span><span>; i &lt; Deno.args.length; i++) {
</span><span>    </span><span style="color:#f92672;font-weight:bold">let</span><span> filename = Deno.args[i];
</span><span>    </span><span style="color:#f92672;font-weight:bold">let</span><span> file = </span><span style="color:#f92672;font-weight:bold">await</span><span> Deno.open(filename);
</span><span>    </span><span style="color:#f92672;font-weight:bold">await</span><span> Deno.copy(file, Deno.stdout);
</span>    file.close();
<!-- -->}</code></pre></div></pre>
<p><code>--allow-read</code> をつける。</p>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> deno run --allow-read read.ts args.ts</span><span>
</span>console.log(Deno.args);</code></pre></div></pre>
<h2>server を起動</h2>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">ts</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-typescript" style="white-space:pre"><span style="color:#f92672;font-weight:bold">const</span><span> listener = Deno.listen({ </span><span class="hljs-attr">port</span><span>: </span><span class="hljs-number">8080</span><span>  });
</span><span></span><span style="color:#a6e22e">console</span><span>.log(</span><span style="color:#a6e22e">&quot;listening on 0.0.0.0:8080&quot;</span><span>);
</span><span></span><span style="color:#f92672;font-weight:bold">for</span><span> </span><span style="color:#f92672;font-weight:bold">await</span><span> (</span><span style="color:#f92672;font-weight:bold">const</span><span> conn </span><span style="color:#f92672;font-weight:bold">of</span><span> listener) {
</span>      Deno.copy(conn, conn);
<!-- -->}</code></pre></div></pre>
<pre><div class="sc-bczRLJ xShwa"><div class="sc-gsnTZi viLYE">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> deno run --allow-net server.ts</span></code></pre></div></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20200522111427","title":"deno を触ってみる","body":"\n## 通常の実行\n```ts\nconsole.log(\"Wellcome to Deno\");\n```\n\n```bash\n$ deno run hello.ts\nWellcome to Deno\n```\n\n## http request があるとき\n```ts\nconst url = Deno.args[0];\nconst res = await fetch(url);\n\nconst body = new Uint8Array(await res.arrayBuffer());\nawait Deno.stdout.write(body);\n```\n\n`--allow-net` をつける。\n```bash\n$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps\n```\n\n### コマンドラインで引数を渡す\n```ts\nconsole.log(Deno.args)\n```\n\n```bash\n$ deno run args.ts 1 2 3\n[ \"1\", \"2\", \"3\" ]\n```\n\n## ファイル読み込み\n```ts\nfor (let i = 0; i \u003c Deno.args.length; i++) {\n    let filename = Deno.args[i];\n    let file = await Deno.open(filename);\n    await Deno.copy(file, Deno.stdout);\n    file.close();\n}\n```\n\n`--allow-read` をつける。\n```bash\n$ deno run --allow-read read.ts args.ts\nconsole.log(Deno.args);\n```\n\n## server を起動\n```ts\nconst listener = Deno.listen({ port: 8080  });\nconsole.log(\"listening on 0.0.0.0:8080\");\nfor await (const conn of listener) {\n      Deno.copy(conn, conn);\n}\n```\n\n```bash\n$ deno run --allow-net server.ts\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20200522111427"},"buildId":"_Oeh_r-o8XR9F2QkwcIjt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>