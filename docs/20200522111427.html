<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/79ced7a237fa562c72d5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/79ced7a237fa562c72d5.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-fb76148cfcfb42ca18eb.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-1f2c591c5d3bfcfc95e6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-42cedee763d16b21c0e8.js" defer=""></script><script src="/_next/static/chunks/408-35579d04b0c1f804c73d.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-fe98cebb0eae538362b0.js" defer=""></script><script src="/_next/static/jITjVXzT9TXoB_7cfdIny/_buildManifest.js" defer=""></script><script src="/_next/static/jITjVXzT9TXoB_7cfdIny/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><div><div class="bg-gray-600 h-10 leading-10 text-2xl"><a class="no-underline text-gray-100 mx-2" href="/">MyDocs</a></div></div><div class="mx-7"><h1><b># <!-- -->deno を触ってみる</b></h1><h2>通常の実行</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>console.</span><span style="color:#a6e22e">log</span><span>(&quot;Wellcome to Deno&quot;);</span></code></div><p class="h-2"></p></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run hello.ts
</span>Wellcome to Deno
</code></div><p class="h-2"></p></pre>
<h2>http request があるとき</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const </span><span class="hljs-attr">url</span><span> = De</span><span style="color:#f92672;font-weight:bold">no</span><span>.args[</span><span class="hljs-number">0</span><span>]</span><span style="color:#75715e">;</span><span>
</span><span>const </span><span class="hljs-attr">res</span><span> = await fetch(url)</span><span style="color:#75715e">;</span><span>
</span>
<span>const </span><span class="hljs-attr">body</span><span> = new Uint8Array(await res.arrayBuffer())</span><span style="color:#75715e">;</span><span>
</span><span>await Deno.stdout.write(body)</span><span style="color:#75715e">;</span></code></div><p class="h-2"></p></pre>
<p><code node="[object Object]">--allow-net</code> をつける.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps</span></code></div><p class="h-2"></p></pre>
<h3>コマンドラインで引数を渡す</h3>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>console.</span><span style="color:#a6e22e">log</span><span>(Deno.</span><span style="color:#a6e22e">args</span><span>)</span></code></div><p class="h-2"></p></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run args.ts 1 2 3
</span><span>[ </span><span style="color:#a6e22e">&quot;1&quot;</span><span>, </span><span style="color:#a6e22e">&quot;2&quot;</span><span>, </span><span style="color:#a6e22e">&quot;3&quot;</span><span> ]</span></code></div><p class="h-2"></p></pre>
<h2>ファイル読み込み</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span style="color:#f92672;font-weight:bold">for</span><span> (</span><span style="color:#f92672;font-weight:bold">let</span><span> i = </span><span class="hljs-number">0</span><span>; i &lt; </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>args.length; i++) {
</span><span>    </span><span style="color:#f92672;font-weight:bold">let</span><span> filename = </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>args</span><span style="color:#f92672;font-weight:bold">[</span><span class="hljs-identifier" style="color:#f92672;font-weight:bold">i</span><span style="color:#f92672;font-weight:bold">]</span><span>;
</span><span>    </span><span style="color:#f92672;font-weight:bold">let</span><span> file = await </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span style="color:#f92672;font-weight:bold">open</span><span>(filename);
</span><span>    await </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>copy(file, </span><span class="hljs-module-access hljs-module hljs-identifier">Deno</span><span class="hljs-module-access hljs-module">.</span><span>stdout);
</span><span>    file.close</span><span style="color:#f92672;font-weight:bold">()</span><span>;
</span>}
</code></div><p class="h-2"></p></pre>
<p><code node="[object Object]">--allow-read</code> をつける.</p>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run --allow-read read.ts args.ts
</span>console.log(Deno.args);
</code></div><p class="h-2"></p></pre>
<h2>server を起動</h2>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-ts" style="white-space:pre"><span>const listener = Deno.listen({ port: </span><span class="hljs-number">8080</span><span>  })</span><span style="color:#75715e">;</span><span>
</span><span>console.log(</span><span style="color:#a6e22e">&quot;listening on 0.0.0.0:8080&quot;</span><span>)</span><span style="color:#75715e">;</span><span>
</span><span>for await (</span><span style="color:#f92672">const</span><span> conn of listener) {
</span><span>      Deno.copy(</span><span style="color:#f92672">conn</span><span>, conn)</span><span style="color:#75715e">;</span><span>
</span>}
</code></div><p class="h-2"></p></pre>
<pre><div node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-bash" style="white-space:pre"><span>$ deno run --allow-net server.ts</span></code></div><p class="h-2"></p></pre></div><br/></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"docBody":{"id":"20200522111427","title":"deno を触ってみる","content":"\n## 通常の実行\n```ts\nconsole.log(\"Wellcome to Deno\");\n```\n\n```bash\n$ deno run hello.ts\nWellcome to Deno\n```\n\n## http request があるとき\n```ts\nconst url = Deno.args[0];\nconst res = await fetch(url);\n\nconst body = new Uint8Array(await res.arrayBuffer());\nawait Deno.stdout.write(body);\n```\n\n`--allow-net` をつける.\n```bash\n$ deno run --allow-net http.ts https://deno.land/manual/getting_started/first_steps\n```\n\n### コマンドラインで引数を渡す\n```ts\nconsole.log(Deno.args)\n```\n\n```bash\n$ deno run args.ts 1 2 3\n[ \"1\", \"2\", \"3\" ]\n```\n\n## ファイル読み込み\n```ts\nfor (let i = 0; i \u003c Deno.args.length; i++) {\n    let filename = Deno.args[i];\n    let file = await Deno.open(filename);\n    await Deno.copy(file, Deno.stdout);\n    file.close();\n}\n```\n\n`--allow-read` をつける.\n```bash\n$ deno run --allow-read read.ts args.ts\nconsole.log(Deno.args);\n```\n\n## server を起動\n```ts\nconst listener = Deno.listen({ port: 8080  });\nconsole.log(\"listening on 0.0.0.0:8080\");\nfor await (const conn of listener) {\n      Deno.copy(conn, conn);\n}\n```\n\n```bash\n$ deno run --allow-net server.ts\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20200522111427"},"buildId":"jITjVXzT9TXoB_7cfdIny","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>