<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>MyDocs</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/a58c9bb1e05a64ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a58c9bb1e05a64ba.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-d38be8d96a62f950.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-4c0bfde4693f048b.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2d6bf7b3192a8752.js" defer=""></script><script src="/_next/static/chunks/996-96c017f2628f3a7d.js" defer=""></script><script src="/_next/static/chunks/238-6c9572b4a47f3e2a.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5Bid%5D-11871a0dd3bce32a.js" defer=""></script><script src="/_next/static/WO88-BZ4H50Eu4wzY2ZqE/_buildManifest.js" defer=""></script><script src="/_next/static/WO88-BZ4H50Eu4wzY2ZqE/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><a style="text-decoration:none" href="/"><div style="color:black;font-size:22px;cursor:pointer">MyDocs</div></a></div><p></p><h1><b># <!-- -->Docker のインストールからコンテナ作成まで</b></h1><h2>開発環境</h2>
<ul>
<li>Ubuntu/trusty64</li>
</ul>
<h2>Docker のインストール</h2>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> sudo apt-get update</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> sudo apt-get -y install \
</span><span class="bash">    apt-transport-https \
</span><span class="bash">    ca-certificates \
</span><span class="bash">    curl \
</span><span class="bash">    software-properties-common</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> sudo apt-key fingerprint 0EBFCD88</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> sudo add-apt-repository -y  \
</span><span class="bash">   </span><span class="bash" style="color:#a6e22e">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
</span><span class="bash" style="color:#a6e22e">   </span><span class="bash" style="color:#a6e22e">$(lsb_release -cs)</span><span class="bash" style="color:#a6e22e"> \
</span><span class="bash" style="color:#a6e22e">   stable&quot;</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> sudo apt-get update</span><span>
</span><span></span><span style="color:#75715e">$</span><span class="bash"> sudo apt-get install -y docker-ce</span></code></pre></div></pre>
<h2>Docker コマンド</h2>
<h3>ローカルに保存された docker イメージの一覧を取得</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker images</span></code></pre></div></pre>
<h3>docker hub にあるイメージを検索</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker search &lt;イメージ&gt;</span></code></pre></div></pre>
<h3>docker hub にあるイメージをローカルに取得する</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker pull &lt;イメージ&gt;</span></code></pre></div></pre>
<h3>コンテナでプロセスを起動する</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker run -it &lt;イメージ&gt; /bin/bash</span></code></pre></div></pre>
<h3>プロセスを確認する ( 停止されたものも含む )</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker ps -a</span></code></pre></div></pre>
<h3>停止されたコンテナの削除</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker rm &lt;コンテナid&gt;</span></code></pre></div></pre>
<p>id は一意なので頭の 4 桁程度入力すれば OK。</p>
<h3>コンテナを全て削除</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker rm $(docker ps -aq)</span></code></pre></div></pre>
<h3>exit と同時にコンテナの削除</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker run --rm -it &lt;イメージ&gt; /bin/bash</span></code></pre></div></pre>
<h3>ポートをホスト側に公開して起動</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker run -it -p 80:80 &lt;イメージ&gt; /bin/bash</span></code></pre></div></pre>
<h3>外部ファイルを取り込む</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker run -it -v &lt;ホスト側のパス&gt;:&lt;コンテナ側のパス&gt; &lt;イメージ&gt; /bin/bash</span></code></pre></div></pre>
<h2>Dockerfile 作成してからの流れ</h2>
<h3>Dockerfile からイメージを作成</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker build -t &lt;作成するイメージ名&gt; .</span></code></pre></div></pre>
<h3>作成したイメージからコンテナを起動</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker run --name &lt;起動するコンテナ名&gt; -d -p &lt;イメージ名&gt;</span></code></pre></div></pre>
<h3>コンテナの停止</h3>
<pre><div class="sc-bgqQcB dzTJyN"><div class="sc-gTRrQi bBvEVj">bash</div><pre node="[object Object]" style="display:block;overflow-x:auto;padding:0.5em;background:#272822;color:#ddd"><code class="language-shell" style="white-space:pre"><span style="color:#75715e">$</span><span class="bash"> docker stop &lt;コンテナ名&gt;</span></code></pre></div></pre></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"contents":{"id":"20180213090000","title":"Docker のインストールからコンテナ作成まで","body":"\n## 開発環境\n- Ubuntu/trusty64\n\n## Docker のインストール\n```bash\n$ sudo apt-get update\n$ sudo apt-get -y install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common\n$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n$ sudo apt-key fingerprint 0EBFCD88\n$ sudo add-apt-repository -y  \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n$ sudo apt-get update\n$ sudo apt-get install -y docker-ce\n```\n\n## Docker コマンド\n### ローカルに保存された docker イメージの一覧を取得\n```bash\n$ docker images\n```\n\n### docker hub にあるイメージを検索\n```bash\n$ docker search \u003cイメージ\u003e\n```\n\n### docker hub にあるイメージをローカルに取得する\n```bash\n$ docker pull \u003cイメージ\u003e\n```\n\n### コンテナでプロセスを起動する\n```bash\n$ docker run -it \u003cイメージ\u003e /bin/bash\n```\n\n### プロセスを確認する ( 停止されたものも含む )\n```bash\n$ docker ps -a\n```\n\n### 停止されたコンテナの削除\n```bash\n$ docker rm \u003cコンテナid\u003e\n```\n\nid は一意なので頭の 4 桁程度入力すれば OK。\n\n### コンテナを全て削除\n```bash\n$ docker rm $(docker ps -aq)\n```\n\n### exit と同時にコンテナの削除\n```bash\n$ docker run --rm -it \u003cイメージ\u003e /bin/bash\n```\n\n### ポートをホスト側に公開して起動\n```bash\n$ docker run -it -p 80:80 \u003cイメージ\u003e /bin/bash\n```\n\n### 外部ファイルを取り込む\n```bash\n$ docker run -it -v \u003cホスト側のパス\u003e:\u003cコンテナ側のパス\u003e \u003cイメージ\u003e /bin/bash\n```\n\n## Dockerfile 作成してからの流れ\n### Dockerfile からイメージを作成\n```bash\n$ docker build -t \u003c作成するイメージ名\u003e .\n```\n\n### 作成したイメージからコンテナを起動\n```bash\n$ docker run --name \u003c起動するコンテナ名\u003e -d -p \u003cイメージ名\u003e\n```\n\n### コンテナの停止\n```bash\n$ docker stop \u003cコンテナ名\u003e\n```\n"}},"__N_SSG":true},"page":"/docs/[id]","query":{"id":"20180213090000"},"buildId":"WO88-BZ4H50Eu4wzY2ZqE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>